/*
 jquery.fullscreen 1.1.0
 https://github.com/kayahr/jquery-fullscreen-plugin
 Copyright (C) 2012 Klaus Reimer <k@ailis.de>
 Licensed under the MIT license
 (See http://www.opensource.org/licenses/mit-license)
*/
(function(a,b){function c(a,w,c){if(c===b&&a.nodeType===1)if(c="data-"+w.replace(ha,"$1-$2").toLowerCase(),c=a.getAttribute(c),typeof c==="string"){try{c=c==="true"?!0:c==="false"?!1:c==="null"?null:!e.isNaN(c)?parseFloat(c):U.test(c)?e.parseJSON(c):c}catch(j){}e.data(a,w,c)}else c=b;return c}function d(a){for(var b in a)if(b!=="toJSON")return!1;return!0}function g(a,w,c){var j=w+"defer",d=w+"queue",s=w+"mark",f=e.data(a,j,b,!0);f&&(c==="queue"||!e.data(a,d,b,!0))&&(c==="mark"||!e.data(a,s,b,!0))&&
setTimeout(function(){!e.data(a,d,b,!0)&&!e.data(a,s,b,!0)&&(e.removeData(a,j,!0),f.resolve())},0)}function f(){return!1}function h(){return!0}function n(a,w,c){var j=e.extend({},c[0]);j.type=a;j.originalEvent={};j.liveFired=b;e.event.handle.call(w,j);j.isDefaultPrevented()&&c[0].preventDefault()}function l(a){var b,c,j,d,s,f,g,h,O,m,o,n=[];d=[];s=e._data(this,"events");if(!(a.liveFired===this||!s||!s.live||a.target.disabled||a.button&&a.type==="click")){a.namespace&&(o=RegExp("(^|\\.)"+a.namespace.split(".").join("\\.(?:.*\\.)?")+
"(\\.|$)"));a.liveFired=this;var l=s.live.slice(0);for(g=0;g<l.length;g++)s=l[g],s.origType.replace(V,"")===a.type?d.push(s.selector):l.splice(g--,1);d=e(a.target).closest(d,a.currentTarget);for(h=0,O=d.length;h<O;h++){m=d[h];for(g=0;g<l.length;g++)if(s=l[g],m.selector===s.selector&&(!o||o.test(s.namespace))&&!m.elem.disabled){f=m.elem;j=null;if(s.preType==="mouseenter"||s.preType==="mouseleave")a.type=s.preType,(j=e(a.relatedTarget).closest(s.selector)[0])&&e.contains(f,j)&&(j=f);(!j||j!==f)&&n.push({elem:f,
handleObj:s,level:m.level})}}for(h=0,O=n.length;h<O;h++){d=n[h];if(c&&d.level>c)break;a.currentTarget=d.elem;a.data=d.handleObj.data;a.handleObj=d.handleObj;o=d.handleObj.origHandler.apply(d.elem,arguments);if(o===!1||a.isPropagationStopped())if(c=d.level,o===!1&&(b=!1),a.isImmediatePropagationStopped())break}return b}}function u(a,b){return(a&&a!=="*"?a+".":"")+b.replace(P,"`").replace(oa,"&")}function t(a,b,c){b=b||0;if(e.isFunction(b))return e.grep(a,function(a,k){return!!b.call(a,k,a)===c});else if(b.nodeType)return e.grep(a,
function(a){return a===b===c});else if(typeof b==="string"){var j=e.grep(a,function(a){return a.nodeType===1});if(Ya.test(b))return e.filter(b,j,!c);else b=e.filter(b,j)}return e.grep(a,function(a){return e.inArray(a,b)>=0===c})}function z(a,b){if(b.nodeType===1&&e.hasData(a)){var c=e.expando,j=e.data(a),d=e.data(b,j);if(j=j[c]){var f=j.events,d=d[c]=e.extend({},j);if(f){delete d.handle;d.events={};for(var g in f){c=0;for(j=f[g].length;c<j;c++)e.event.add(b,g+(f[g][c].namespace?".":"")+f[g][c].namespace,
f[g][c],f[g][c].data)}}}}}function B(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes();b.mergeAttributes&&b.mergeAttributes(a);c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c==="input"&&(a.type==="checkbox"||a.type==="radio")){if(a.checked)b.defaultChecked=b.checked=a.checked;if(b.value!==a.value)b.value=a.value}else if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue;b.removeAttribute(e.expando)}}
function C(a){return"getElementsByTagName"in a?a.getElementsByTagName("*"):"querySelectorAll"in a?a.querySelectorAll("*"):[]}function D(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function Q(a){e.nodeName(a,"input")?D(a):"getElementsByTagName"in a&&e.grep(a.getElementsByTagName("input"),D)}function N(a,b){b.src?e.ajax({url:b.src,async:!1,dataType:"script"}):e.globalEval((b.text||b.textContent||b.innerHTML||"").replace(Za,"/*$0*/"));b.parentNode&&b.parentNode.removeChild(b)}
function $(a,b,c){var j=b==="width"?a.offsetWidth:a.offsetHeight,d=b==="width"?$a:ab;if(j>0)return c!=="border"&&e.each(d,function(){c||(j-=parseFloat(e.css(a,"padding"+this))||0);c==="margin"?j+=parseFloat(e.css(a,c+this))||0:j-=parseFloat(e.css(a,"border"+this+"Width"))||0}),j+"px";j=ia(a,b,b);if(j<0||j==null)j=a.style[b]||0;j=parseFloat(j)||0;c&&e.each(d,function(){j+=parseFloat(e.css(a,"padding"+this))||0;c!=="padding"&&(j+=parseFloat(e.css(a,"border"+this+"Width"))||0);c==="margin"&&(j+=parseFloat(e.css(a,
c+this))||0)});return j+"px"}function A(a){return function(b,c){var k;typeof b!=="string"&&(c=b,b="*");if(e.isFunction(c))for(var j=b.toLowerCase().split(Fa),d=0,f=j.length,g,Z;d<f;d++)g=j[d],(Z=/^\+/.test(g))&&(g=g.substr(1)||"*"),k=a[g]=a[g]||[],g=k,g[Z?"unshift":"push"](c)}}function J(a,c,e,j,d,f){d=d||c.dataTypes[0];f=f||{};f[d]=!0;for(var d=a[d],g=0,Z=d?d.length:0,h=a===ya,m;g<Z&&(h||!m);g++)m=d[g](c,e,j),typeof m==="string"&&(!h||f[m]?m=b:(c.dataTypes.unshift(m),m=J(a,c,e,j,m,f)));if((h||!m)&&
!f["*"])m=J(a,c,e,j,"*",f);return m}function aa(a,c){var v,j,d=e.ajaxSettings.flatOptions||{};for(v in c)c[v]!==b&&((d[v]?a:j||(j={}))[v]=c[v]);j&&e.extend(!0,a,j)}function ja(a,b,c,j){if(e.isArray(b))e.each(b,function(b,w){c||bb.test(a)?j(a,w):ja(a+"["+(typeof w==="object"||e.isArray(w)?b:"")+"]",w,c,j)});else if(!c&&b!=null&&typeof b==="object")for(var d in b)ja(a+"["+d+"]",b[d],c,j);else j(a,b)}function F(){try{return new a.XMLHttpRequest}catch(b){}}function q(){setTimeout(R,0);return sa=e.now()}
function R(){sa=b}function W(a,b){var c={};e.each(Ga.concat.apply([],Ga.slice(0,b)),function(){c[this]=a});return c}function ba(a){if(!za[a]){var b=p.body,c=e("<"+a+">").appendTo(b),j=c.css("display");c.remove();if(j==="none"||j===""){if(!S)S=p.createElement("iframe"),S.frameBorder=S.width=S.height=0;b.appendChild(S);if(!ka||!S.createElement)ka=(S.contentWindow||S.contentDocument).document,ka.write((p.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),ka.close();c=ka.createElement(a);
ka.body.appendChild(c);j=e.css(c,"display");b.removeChild(S)}za[a]=j}return za[a]}function M(a){return e.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}var p=a.document,Y=a.navigator,ca=a.location,e=function(){function k(){if(!c.isReady){try{p.documentElement.doScroll("left")}catch(a){setTimeout(k,1);return}c.ready()}}var c=function(a,b){return new c.fn.init(a,b,d)},e=a.jQuery,j=a.$,d,f=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,g=/\S/,Z=/^\s+/,h=/\s+$/,m=/\d/,o=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,
n=/^[\],:{}\s]*$/,l=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,r=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,u=/(?:^|:|,)(?:\s*\[)+/g,L=/(webkit)[ \/]([\w.]+)/,B=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,G=/(mozilla)(?:.*? rv:([\w.]+))?/,cb=/-([a-z]|[0-9])/ig,db=/^-ms-/,eb=function(a,b){return(b+"").toUpperCase()},pa=Y.userAgent,ta,la,fb=Object.prototype.toString,Aa=Object.prototype.hasOwnProperty,x=Array.prototype.push,z=Array.prototype.slice,C=String.prototype.trim,
q=Array.prototype.indexOf,K={};c.fn=c.prototype={constructor:c,init:function(a,k,e){var v;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(a==="body"&&!k&&p.body)return this.context=p,this[0]=p.body,this.selector=a,this.length=1,this;if(typeof a==="string")if((v=a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3?[null,a,null]:f.exec(a))&&(v[1]||!k))if(v[1])return e=(k=k instanceof c?k[0]:k)?k.ownerDocument||k:p,(a=o.exec(a))?c.isPlainObject(k)?(a=[p.createElement(a[1])],
c.fn.attr.call(a,k,!0)):a=[e.createElement(a[1])]:(a=c.buildFragment([v[1]],[e]),a=(a.cacheable?c.clone(a.fragment):a.fragment).childNodes),c.merge(this,a);else{if((k=p.getElementById(v[2]))&&k.parentNode){if(k.id!==v[2])return e.find(a);this.length=1;this[0]=k}this.context=p;this.selector=a;return this}else return!k||k.jquery?(k||e).find(a):this.constructor(k).find(a);else if(c.isFunction(a))return e.ready(a);if(a.selector!==b)this.selector=a.selector,this.context=a.context;return c.makeArray(a,
this)},selector:"",jquery:"1.6.3",length:0,size:function(){return this.length},toArray:function(){return z.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,k){var e=this.constructor();c.isArray(a)?x.apply(e,a):c.merge(e,a);e.prevObject=this;e.context=this.context;if(b==="find")e.selector=this.selector+(this.selector?" ":"")+k;else if(b)e.selector=this.selector+"."+b+"("+k+")";return e},each:function(a,b){return c.each(this,a,b)},ready:function(a){c.bindReady();
ta.done(a);return this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(z.apply(this,arguments),"slice",z.call(arguments).join(","))},map:function(a){return this.pushStack(c.map(this,function(b,k){return a.call(b,k,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:x,sort:[].sort,splice:[].splice};c.fn.init.prototype=c.fn;c.extend=c.fn.extend=function(){var a,
k,e,v,j,d=arguments[0]||{},E=1,f=arguments.length,s=!1;typeof d==="boolean"&&(s=d,d=arguments[1]||{},E=2);typeof d!=="object"&&!c.isFunction(d)&&(d={});f===E&&(d=this,--E);for(;E<f;E++)if((a=arguments[E])!=null)for(k in a)e=d[k],v=a[k],d!==v&&(s&&v&&(c.isPlainObject(v)||(j=c.isArray(v)))?(j?(j=!1,e=e&&c.isArray(e)?e:[]):e=e&&c.isPlainObject(e)?e:{},d[k]=c.extend(s,e,v)):v!==b&&(d[k]=v));return d};c.extend({noConflict:function(b){if(a.$===c)a.$=j;if(b&&a.jQuery===c)a.jQuery=e;return c},isReady:!1,
readyWait:1,holdReady:function(a){a?c.readyWait++:c.ready(!0)},ready:function(a){if(a===!0&&!--c.readyWait||a!==!0&&!c.isReady){if(!p.body)return setTimeout(c.ready,1);c.isReady=!0;a!==!0&&--c.readyWait>0||(ta.resolveWith(p,[c]),c.fn.trigger&&c(p).trigger("ready").unbind("ready"))}},bindReady:function(){if(!ta){ta=c._Deferred();if(p.readyState==="complete")return setTimeout(c.ready,1);if(p.addEventListener)p.addEventListener("DOMContentLoaded",la,!1),a.addEventListener("load",c.ready,!1);else if(p.attachEvent){p.attachEvent("onreadystatechange",
la);a.attachEvent("onload",c.ready);var b=!1;try{b=a.frameElement==null}catch(e){}p.documentElement.doScroll&&b&&k()}}},isFunction:function(a){return c.type(a)==="function"},isArray:Array.isArray||function(a){return c.type(a)==="array"},isWindow:function(a){return a&&typeof a==="object"&&"setInterval"in a},isNaN:function(a){return a==null||!m.test(a)||isNaN(a)},type:function(a){return a==null?String(a):K[fb.call(a)]||"object"},isPlainObject:function(a){if(!a||c.type(a)!=="object"||a.nodeType||c.isWindow(a))return!1;
try{if(a.constructor&&!Aa.call(a,"constructor")&&!Aa.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(k){return!1}for(var e in a);return e===b||Aa.call(a,e)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw a;},parseJSON:function(b){if(typeof b!=="string"||!b)return null;b=c.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(n.test(b.replace(l,"@").replace(r,"]").replace(u,"")))return(new Function("return "+b))();c.error("Invalid JSON: "+b)},parseXML:function(k){var e,
v;try{a.DOMParser?(v=new DOMParser,e=v.parseFromString(k,"text/xml")):(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(k))}catch(d){e=b}(!e||!e.documentElement||e.getElementsByTagName("parsererror").length)&&c.error("Invalid XML: "+k);return e},noop:function(){},globalEval:function(b){b&&g.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(db,"ms-").replace(cb,eb)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===
b.toUpperCase()},each:function(a,k,e){var v,d=0,j=a.length,E=j===b||c.isFunction(a);if(e)if(E)for(v in a){if(k.apply(a[v],e)===!1)break}else for(;d<j;){if(k.apply(a[d++],e)===!1)break}else if(E)for(v in a){if(k.call(a[v],v,a[v])===!1)break}else for(;d<j;)if(k.call(a[d],d,a[d++])===!1)break;return a},trim:C?function(a){return a==null?"":C.call(a)}:function(a){return a==null?"":a.toString().replace(Z,"").replace(h,"")},makeArray:function(a,b){var k=b||[];if(a!=null){var e=c.type(a);a.length==null||
e==="string"||e==="function"||e==="regexp"||c.isWindow(a)?x.call(k,a):c.merge(k,a)}return k},inArray:function(a,b){if(!b)return-1;if(q)return q.call(b,a);for(var k=0,c=b.length;k<c;k++)if(b[k]===a)return k;return-1},merge:function(a,k){var c=a.length,e=0;if(typeof k.length==="number")for(var w=k.length;e<w;e++)a[c++]=k[e];else for(;k[e]!==b;)a[c++]=k[e++];a.length=c;return a},grep:function(a,b,k){for(var c=[],e,k=!!k,w=0,v=a.length;w<v;w++)e=!!b(a[w],w),k!==e&&c.push(a[w]);return c},map:function(a,
k,e){var v,d,j=[],E=0,f=a.length;if(a instanceof c||f!==b&&typeof f==="number"&&(f>0&&a[0]&&a[f-1]||f===0||c.isArray(a)))for(;E<f;E++)v=k(a[E],E,e),v!=null&&(j[j.length]=v);else for(d in a)v=k(a[d],d,e),v!=null&&(j[j.length]=v);return j.concat.apply([],j)},guid:1,proxy:function(a,k){if(typeof k==="string")var e=a[k],k=a,a=e;if(!c.isFunction(a))return b;var v=z.call(arguments,2),e=function(){return a.apply(k,v.concat(z.call(arguments)))};e.guid=a.guid=a.guid||e.guid||c.guid++;return e},access:function(a,
k,e,v,d,j){var E=a.length;if(typeof k==="object"){for(var f in k)c.access(a,f,k[f],v,d,e);return a}if(e!==b){v=!j&&v&&c.isFunction(e);for(f=0;f<E;f++)d(a[f],k,v?e.call(a[f],f,d(a[f],k)):e,j);return a}return E?d(a[0],k):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();a=L.exec(a)||B.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&G.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}},sub:function(){function a(b,k){return new a.fn.init(b,k)}c.extend(!0,a,this);a.superclass=
this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(k,e){e&&e instanceof c&&!(e instanceof a)&&(e=a(e));return c.fn.init.call(this,k,e,b)};a.fn.init.prototype=a.fn;var b=a(p);return a},browser:{}});c.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){K["[object "+b+"]"]=b.toLowerCase()});pa=c.uaMatch(pa);if(pa.browser)c.browser[pa.browser]=!0,c.browser.version=pa.version;if(c.browser.webkit)c.browser.safari=!0;g.test("\u00a0")&&(Z=
/^[\s\xA0]+/,h=/[\s\xA0]+$/);d=c(p);p.addEventListener?la=function(){p.removeEventListener("DOMContentLoaded",la,!1);c.ready()}:p.attachEvent&&(la=function(){p.readyState==="complete"&&(p.detachEvent("onreadystatechange",la),c.ready())});return c}(),da="done fail isResolved isRejected promise then always pipe".split(" "),qa=[].slice;e.extend({_Deferred:function(){var a=[],b,c,d,f={done:function(){if(!d){var c=arguments,v,g,h,m,o;b&&(o=b,b=0);for(v=0,g=c.length;v<g;v++)h=c[v],m=e.type(h),m==="array"?
f.done.apply(f,h):m==="function"&&a.push(h);o&&f.resolveWith(o[0],o[1])}return this},resolveWith:function(e,f){if(!d&&!b&&!c){f=f||[];c=1;try{for(;a[0];)a.shift().apply(e,f)}finally{b=[e,f],c=0}}return this},resolve:function(){f.resolveWith(this,arguments);return this},isResolved:function(){return!(!c&&!b)},cancel:function(){d=1;a=[];return this}};return f},Deferred:function(a){var b=e._Deferred(),c=e._Deferred(),d;e.extend(b,{then:function(a,k){b.done(a).fail(k);return this},always:function(){return b.done.apply(b,
arguments).fail.apply(this,arguments)},fail:c.done,rejectWith:c.resolveWith,reject:c.resolve,isRejected:c.isResolved,pipe:function(a,k){return e.Deferred(function(c){e.each({done:[a,"resolve"],fail:[k,"reject"]},function(a,k){var v=k[0],d=k[1],j;if(e.isFunction(v))b[a](function(){if((j=v.apply(this,arguments))&&e.isFunction(j.promise))j.promise().then(c.resolve,c.reject);else c[d+"With"](this===b?c:this,[j])});else b[a](c[d])})}).promise()},promise:function(a){if(a==null){if(d)return d;d=a={}}for(var k=
da.length;k--;)a[da[k]]=b[da[k]];return a}});b.done(c.cancel).fail(b.cancel);delete b.cancel;a&&a.call(b,b);return b},when:function(a){function b(a){return function(b){c[a]=arguments.length>1?qa.call(arguments,0):b;--s||g.resolveWith(g,qa.call(c,0))}}var c=arguments,d=0,f=c.length,s=f,g=f<=1&&a&&e.isFunction(a.promise)?a:e.Deferred();if(f>1){for(;d<f;d++)c[d]&&e.isFunction(c[d].promise)?c[d].promise().then(b(d),g.reject):--s;s||g.resolveWith(g,c)}else g!==a&&g.resolveWith(g,f?[a]:[]);return g.promise()}});
e.support=function(){var a=p.createElement("div"),b=p.documentElement,c,d,f,g,y,h;a.setAttribute("className","t");a.innerHTML="   <link><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type=checkbox>";c=a.getElementsByTagName("*");d=a.getElementsByTagName("a")[0];if(!c||!c.length||!d)return{};f=p.createElement("select");g=f.appendChild(p.createElement("option"));c=a.getElementsByTagName("input")[0];y={leadingWhitespace:a.firstChild.nodeType===3,tbody:!a.getElementsByTagName("tbody").length,
htmlSerialize:!!a.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:d.getAttribute("href")==="/a",opacity:/^0.55$/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:c.value==="on",optSelected:g.selected,getSetAttribute:a.className!=="t",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0};c.checked=!0;y.noCloneChecked=c.cloneNode(!0).checked;f.disabled=
!0;y.optDisabled=!g.disabled;try{delete a.test}catch(m){y.deleteExpando=!1}!a.addEventListener&&a.attachEvent&&a.fireEvent&&(a.attachEvent("onclick",function(){y.noCloneEvent=!1}),a.cloneNode(!0).fireEvent("onclick"));c=p.createElement("input");c.value="t";c.setAttribute("type","radio");y.radioValue=c.value==="t";c.setAttribute("checked","checked");a.appendChild(c);d=p.createDocumentFragment();d.appendChild(a.firstChild);y.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked;a.innerHTML="";
a.style.width=a.style.paddingLeft="1px";f=p.getElementsByTagName("body")[0];d=p.createElement(f?"div":"body");g={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};f&&e.extend(g,{position:"absolute",left:"-1000px",top:"-1000px"});for(h in g)d.style[h]=g[h];d.appendChild(a);b=f||b;b.insertBefore(d,b.firstChild);y.appendChecked=c.checked;y.boxModel=a.offsetWidth===2;if("zoom"in a.style)a.style.display="inline",a.style.zoom=1,y.inlineBlockNeedsLayout=a.offsetWidth===2,a.style.display=
"",a.innerHTML="<div style='width:4px;'></div>",y.shrinkWrapBlocks=a.offsetWidth!==2;a.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";f=a.getElementsByTagName("td");c=f[0].offsetHeight===0;f[0].style.display="";f[1].style.display="none";y.reliableHiddenOffsets=c&&f[0].offsetHeight===0;a.innerHTML="";if(p.defaultView&&p.defaultView.getComputedStyle)c=p.createElement("div"),c.style.width="0",c.style.marginRight="0",a.appendChild(c),y.reliableMarginRight=
(parseInt((p.defaultView.getComputedStyle(c,null)||{marginRight:0}).marginRight,10)||0)===0;d.innerHTML="";b.removeChild(d);if(a.attachEvent)for(h in{submit:1,change:1,focusin:1})b="on"+h,c=b in a,c||(a.setAttribute(b,"return;"),c=typeof a[b]==="function"),y[h+"Bubbles"]=c;d=d=f=g=f=c=a=c=null;return y}();e.boxModel=e.support.boxModel;var U=/^(?:\{.*\}|\[.*\])$/,ha=/([a-z])([A-Z])/g;e.extend({cache:{},uuid:0,expando:"jQuery"+(e.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",
applet:!0},hasData:function(a){a=a.nodeType?e.cache[a[e.expando]]:a[e.expando];return!!a&&!d(a)},data:function(a,c,d,j){if(e.acceptData(a)){var f=e.expando,g=typeof c==="string",y=a.nodeType,h=y?e.cache:a,m=y?a[e.expando]:a[e.expando]&&e.expando;if(m&&(!j||!m||!h[m]||h[m][f])||!(g&&d===b)){if(!m)y?a[e.expando]=m=++e.uuid:m=e.expando;if(!h[m]&&(h[m]={},!y))h[m].toJSON=e.noop;if(typeof c==="object"||typeof c==="function")j?h[m][f]=e.extend(h[m][f],c):h[m]=e.extend(h[m],c);a=h[m];j&&(a[f]||(a[f]={}),
a=a[f]);d!==b&&(a[e.camelCase(c)]=d);if(c==="events"&&!a[c])return a[f]&&a[f].events;g?(d=a[c],d==null&&(d=a[e.camelCase(c)])):d=a;return d}}},removeData:function(a,b,c){if(e.acceptData(a)){var j,f=e.expando,g=a.nodeType,y=g?e.cache:a,h=g?a[e.expando]:e.expando;if(y[h]){if(b&&(j=c?y[h][f]:y[h]))if(j[b]||(b=e.camelCase(b)),delete j[b],!d(j))return;if(c&&(delete y[h][f],!d(y[h])))return;b=y[h][f];e.support.deleteExpando||!y.setInterval?delete y[h]:y[h]=null;if(b){y[h]={};if(!g)y[h].toJSON=e.noop;y[h][f]=
b}else g&&(e.support.deleteExpando?delete a[e.expando]:a.removeAttribute?a.removeAttribute(e.expando):a[e.expando]=null)}}},_data:function(a,b,c){return e.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=e.noData[a.nodeName.toLowerCase()];if(b)return!(b===!0||a.getAttribute("classid")!==b)}return!0}});e.fn.extend({data:function(a,w){var d=null;if(typeof a==="undefined"){if(this.length&&(d=e.data(this[0]),this[0].nodeType===1))for(var j=this[0].attributes,f,g=0,y=j.length;g<y;g++)f=j[g].name,
f.indexOf("data-")===0&&(f=e.camelCase(f.substring(5)),c(this[0],f,d[f]));return d}else if(typeof a==="object")return this.each(function(){e.data(this,a)});var h=a.split(".");h[1]=h[1]?"."+h[1]:"";return w===b?(d=this.triggerHandler("getData"+h[1]+"!",[h[0]]),d===b&&this.length&&(d=e.data(this[0],a),d=c(this[0],a,d)),d===b&&h[1]?this.data(h[0]):d):this.each(function(){var b=e(this),c=[h[0],w];b.triggerHandler("setData"+h[1]+"!",c);e.data(this,a,w);b.triggerHandler("changeData"+h[1]+"!",c)})},removeData:function(a){return this.each(function(){e.removeData(this,
a)})}});e.extend({_mark:function(a,c){a&&(c=(c||"fx")+"mark",e.data(a,c,(e.data(a,c,b,!0)||0)+1,!0))},_unmark:function(a,c,d){a!==!0&&(d=c,c=a,a=!1);if(c){var d=d||"fx",j=d+"mark";(a=a?0:(e.data(c,j,b,!0)||1)-1)?e.data(c,j,a,!0):(e.removeData(c,j,!0),g(c,d,"mark"))}},queue:function(a,c,d){if(a){var c=(c||"fx")+"queue",j=e.data(a,c,b,!0);d&&(!j||e.isArray(d)?j=e.data(a,c,e.makeArray(d),!0):j.push(d));return j||[]}},dequeue:function(a,b){var b=b||"fx",c=e.queue(a,b),d=c.shift();d==="inprogress"&&(d=
c.shift());d&&(b==="fx"&&c.unshift("inprogress"),d.call(a,function(){e.dequeue(a,b)}));c.length||(e.removeData(a,b+"queue",!0),g(a,b,"queue"))}});e.fn.extend({queue:function(a,c){typeof a!=="string"&&(c=a,a="fx");return c===b?e.queue(this[0],a):this.each(function(){var b=e.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&e.dequeue(this,a)})},dequeue:function(a){return this.each(function(){e.dequeue(this,a)})},delay:function(a,b){a=e.fx?e.fx.speeds[a]||a:a;b=b||"fx";return this.queue(b,function(){var c=
this;setTimeout(function(){e.dequeue(c,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a){function c(){--g||d.resolveWith(j,[j])}typeof a!=="string"&&(a=b);var a=a||"fx",d=e.Deferred(),j=this,f=j.length,g=1,h=a+"defer",m=a+"queue";a+="mark";for(var o;f--;)if(o=e.data(j[f],h,b,!0)||(e.data(j[f],m,b,!0)||e.data(j[f],a,b,!0))&&e.data(j[f],h,e._Deferred(),!0))g++,o.done(c);c();return d.promise()}});var H=/[\n\t\r]/g,ea=/\s+/,ua=/\r/g,x=/^(?:button|input)$/i,m=/^(?:button|input|object|select|textarea)$/i,
o=/^a(?:rea)?$/i,r=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,L,G;e.fn.extend({attr:function(a,b){return e.access(this,a,b,!0,e.attr)},removeAttr:function(a){return this.each(function(){e.removeAttr(this,a)})},prop:function(a,b){return e.access(this,a,b,!0,e.prop)},removeProp:function(a){a=e.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,f,g,h,m;if(e.isFunction(a))return this.each(function(b){e(this).addClass(a.call(this,
b,this.className))});if(a&&typeof a==="string"){b=a.split(ea);for(c=0,d=this.length;c<d;c++)if(f=this[c],f.nodeType===1)if(!f.className&&b.length===1)f.className=a;else{g=" "+f.className+" ";for(h=0,m=b.length;h<m;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");f.className=e.trim(g)}}return this},removeClass:function(a){var c,d,j,f,g,h,m;if(e.isFunction(a))return this.each(function(b){e(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a==="string"||a===b){c=(a||"").split(ea);for(d=0,j=
this.length;d<j;d++)if(f=this[d],f.nodeType===1&&f.className)if(a){g=(" "+f.className+" ").replace(H," ");for(h=0,m=c.length;h<m;h++)g=g.replace(" "+c[h]+" "," ");f.className=e.trim(g)}else f.className=""}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b==="boolean";return e.isFunction(a)?this.each(function(c){e(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c==="string")for(var f,g=0,h=e(this),m=b,o=a.split(ea);f=o[g++];)m=d?m:!h.hasClass(f),h[m?"addClass":
"removeClass"](f);else if(c==="undefined"||c==="boolean")this.className&&e._data(this,"__className__",this.className),this.className=this.className||a===!1?"":e._data(this,"__className__")||""})},hasClass:function(a){for(var a=" "+a+" ",b=0,c=this.length;b<c;b++)if(this[b].nodeType===1&&(" "+this[b].className+" ").replace(H," ").indexOf(a)>-1)return!0;return!1},val:function(a){var c,d,j=this[0];if(!arguments.length){if(j){if((c=e.valHooks[j.nodeName.toLowerCase()]||e.valHooks[j.type])&&"get"in c&&
(d=c.get(j,"value"))!==b)return d;d=j.value;return typeof d==="string"?d.replace(ua,""):d==null?"":d}return b}var f=e.isFunction(a);return this.each(function(d){var j=e(this);if(this.nodeType===1&&(d=f?a.call(this,d,j.val()):a,d==null?d="":typeof d==="number"?d+="":e.isArray(d)&&(d=e.map(d,function(a){return a==null?"":a+""})),c=e.valHooks[this.nodeName.toLowerCase()]||e.valHooks[this.type],!c||!("set"in c)||c.set(this,d,"value")===b))this.value=d})}});e.extend({valHooks:{option:{get:function(a){var b=
a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c=a.selectedIndex,d=[],f=a.options,a=a.type==="select-one";if(c<0)return null;for(var g=a?c:0,h=a?c+1:f.length;g<h;g++)if(b=f[g],b.selected&&(e.support.optDisabled?!b.disabled:b.getAttribute("disabled")===null)&&(!b.parentNode.disabled||!e.nodeName(b.parentNode,"optgroup"))){b=e(b).val();if(a)return b;d.push(b)}return a&&!d.length&&f.length?e(f[c]).val():d},set:function(a,b){var c=e.makeArray(b);e(a).find("option").each(function(){this.selected=
e.inArray(e(this).val(),c)>=0});if(!c.length)a.selectedIndex=-1;return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attrFix:{tabindex:"tabIndex"},attr:function(a,c,d,j){var f=a.nodeType;if(!a||f===3||f===8||f===2)return b;if(j&&c in e.attrFn)return e(a)[c](d);if(!("getAttribute"in a))return e.prop(a,c,d);var g,h;if(j=f!==1||!e.isXMLDoc(a))c=e.attrFix[c]||c,(h=e.attrHooks[c])||(r.test(c)?h=G:L&&(h=L));return d!==b?d===null?(e.removeAttr(a,c),b):h&&"set"in h&&j&&
(g=h.set(a,d,c))!==b?g:(a.setAttribute(c,""+d),d):h&&"get"in h&&j&&(g=h.get(a,c))!==null?g:(g=a.getAttribute(c),g===null?b:g)},removeAttr:function(a,b){var c;if(a.nodeType===1&&(b=e.attrFix[b]||b,e.attr(a,b,""),a.removeAttribute(b),r.test(b)&&(c=e.propFix[b]||b)in a))a[c]=!1},attrHooks:{type:{set:function(a,b){if(x.test(a.nodeName)&&a.parentNode)e.error("type property can't be changed");else if(!e.support.radioValue&&b==="radio"&&e.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);if(c)a.value=
c;return b}}},value:{get:function(a,b){return L&&e.nodeName(a,"button")?L.get(a,b):b in a?a.value:null},set:function(a,b,c){if(L&&e.nodeName(a,"button"))return L.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var j=a.nodeType;if(!a||
j===3||j===8||j===2)return b;var f,g;if(j!==1||!e.isXMLDoc(a))c=e.propFix[c]||c,g=e.propHooks[c];return d!==b?g&&"set"in g&&(f=g.set(a,d,c))!==b?f:a[c]=d:g&&"get"in g&&(f=g.get(a,c))!==null?f:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):m.test(a.nodeName)||o.test(a.nodeName)&&a.href?0:b}}}});e.attrHooks.tabIndex=e.propHooks.tabIndex;G={get:function(a,c){var d;return e.prop(a,c)===!0||(d=a.getAttributeNode(c))&&d.nodeValue!==
!1?c.toLowerCase():b},set:function(a,b,c){b===!1?e.removeAttr(a,c):(b=e.propFix[c]||c,b in a&&(a[b]=!0),a.setAttribute(c,c.toLowerCase()));return c}};if(!e.support.getSetAttribute)L=e.valHooks.button={get:function(a,c){var e;return(e=a.getAttributeNode(c))&&e.nodeValue!==""?e.nodeValue:b},set:function(a,b,c){var e=a.getAttributeNode(c);e||(e=p.createAttribute(c),a.setAttributeNode(e));return e.nodeValue=b+""}},e.each(["width","height"],function(a,b){e.attrHooks[b]=e.extend(e.attrHooks[b],{set:function(a,
c){if(c==="")return a.setAttribute(b,"auto"),c}})});e.support.hrefNormalized||e.each(["href","src","width","height"],function(a,c){e.attrHooks[c]=e.extend(e.attrHooks[c],{get:function(a){a=a.getAttribute(c,2);return a===null?b:a}})});if(!e.support.style)e.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}};if(!e.support.optSelected)e.propHooks.selected=e.extend(e.propHooks.selected,{get:function(){return null}});e.support.checkOn||
e.each(["radio","checkbox"],function(){e.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}});e.each(["radio","checkbox"],function(){e.valHooks[this]=e.extend(e.valHooks[this],{set:function(a,b){if(e.isArray(b))return a.checked=e.inArray(e(a).val(),b)>=0}})});var V=/\.(.*)$/,K=/^(?:textarea|input|select)$/i,P=/\./g,oa=/ /g,gb=/[^\w\s.|`]/g,hb=function(a){return a.replace(gb,"\\$&")};e.event={add:function(a,c,d,j){if(!(a.nodeType===3||a.nodeType===8)){if(d===!1)d=
f;else if(!d)return;var g,s;if(d.handler)g=d,d=g.handler;if(!d.guid)d.guid=e.guid++;if(s=e._data(a)){var h=s.events,m=s.handle;if(!h)s.events=h={};if(!m)s.handle=m=function(a){return typeof e!=="undefined"&&(!a||e.event.triggered!==a.type)?e.event.handle.apply(m.elem,arguments):b};m.elem=a;for(var c=c.split(" "),o,O=0,n;o=c[O++];){s=g?e.extend({},g):{handler:d,data:j};o.indexOf(".")>-1?(n=o.split("."),o=n.shift(),s.namespace=n.slice(0).sort().join(".")):(n=[],s.namespace="");s.type=o;if(!s.guid)s.guid=
d.guid;var l=h[o],r=e.event.special[o]||{};if(!l&&(l=h[o]=[],!r.setup||r.setup.call(a,j,n,m)===!1))a.addEventListener?a.addEventListener(o,m,!1):a.attachEvent&&a.attachEvent("on"+o,m);if(r.add&&(r.add.call(a,s),!s.handler.guid))s.handler.guid=d.guid;l.push(s);e.event.global[o]=!0}a=null}}},global:{},remove:function(a,c,d,j){if(!(a.nodeType===3||a.nodeType===8)){d===!1&&(d=f);var g,s,h=0,m,o,O,n,l,r,p=e.hasData(a)&&e._data(a),u=p&&p.events;if(p&&u){if(c&&c.type)d=c.handler,c=c.type;if(!c||typeof c===
"string"&&c.charAt(0)===".")for(g in c=c||"",u)e.event.remove(a,g+c);else{for(c=c.split(" ");g=c[h++];)if(n=g,m=g.indexOf(".")<0,o=[],m||(o=g.split("."),g=o.shift(),O=RegExp("(^|\\.)"+e.map(o.slice(0).sort(),hb).join("\\.(?:.*\\.)?")+"(\\.|$)")),l=u[g])if(d){n=e.event.special[g]||{};for(s=j||0;s<l.length;s++)if(r=l[s],d.guid===r.guid){if(m||O.test(r.namespace))j==null&&l.splice(s--,1),n.remove&&n.remove.call(a,r);if(j!=null)break}if(l.length===0||j!=null&&l.length===1)(!n.teardown||n.teardown.call(a,
o)===!1)&&e.removeEvent(a,g,p.handle),delete u[g]}else for(s=0;s<l.length;s++)if(r=l[s],m||O.test(r.namespace))e.event.remove(a,n,r.handler,s),l.splice(s--,1);if(e.isEmptyObject(u)){if(c=p.handle)c.elem=null;delete p.events;delete p.handle;e.isEmptyObject(p)&&e.removeData(a,b,!0)}}}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,f,j){var g=c.type||c,s=[],h;g.indexOf("!")>=0&&(g=g.slice(0,-1),h=!0);g.indexOf(".")>=0&&(s=g.split("."),g=s.shift(),s.sort());if(f&&!e.event.customEvent[g]||
e.event.global[g]){c=typeof c==="object"?c[e.expando]?c:new e.Event(g,c):new e.Event(g);c.type=g;c.exclusive=h;c.namespace=s.join(".");c.namespace_re=RegExp("(^|\\.)"+s.join("\\.(?:.*\\.)?")+"(\\.|$)");if(j||!f)c.preventDefault(),c.stopPropagation();if(f){if(!(f.nodeType===3||f.nodeType===8)){c.result=b;c.target=f;d=d!=null?e.makeArray(d):[];d.unshift(c);s=f;j=g.indexOf(":")<0?"on"+g:"";do{h=e._data(s,"handle");c.currentTarget=s;h&&h.apply(s,d);if(j&&e.acceptData(s)&&s[j]&&s[j].apply(s,d)===!1)c.result=
!1,c.preventDefault();s=s.parentNode||s.ownerDocument||s===c.target.ownerDocument&&a}while(s&&!c.isPropagationStopped());if(!c.isDefaultPrevented()){var m,s=e.event.special[g]||{};if((!s._default||s._default.call(f.ownerDocument,c)===!1)&&!(g==="click"&&e.nodeName(f,"a"))&&e.acceptData(f)){try{if(j&&f[g])(m=f[j])&&(f[j]=null),e.event.triggered=g,f[g]()}catch(o){}m&&(f[j]=m);e.event.triggered=b}}return c.result}}else e.each(e.cache,function(){var a=this[e.expando];a&&a.events&&a.events[g]&&e.event.trigger(c,
d,a.handle.elem)})}},handle:function(c){var c=e.event.fix(c||a.event),d=((e._data(this,"events")||{})[c.type]||[]).slice(0),f=!c.exclusive&&!c.namespace,j=Array.prototype.slice.call(arguments,0);j[0]=c;c.currentTarget=this;for(var g=0,h=d.length;g<h;g++){var m=d[g];if(f||c.namespace_re.test(m.namespace)){c.handler=m.handler;c.data=m.data;c.handleObj=m;m=m.handler.apply(this,j);if(m!==b)c.result=m,m===!1&&(c.preventDefault(),c.stopPropagation());if(c.isImmediatePropagationStopped())break}}return c.result},
props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(a){if(a[e.expando])return a;for(var c=a,a=e.Event(c),d=this.props.length,f;d;)f=this.props[--d],a[f]=c[f];if(!a.target)a.target=a.srcElement||p;if(a.target.nodeType===
3)a.target=a.target.parentNode;if(!a.relatedTarget&&a.fromElement)a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement;if(a.pageX==null&&a.clientX!=null)d=a.target.ownerDocument||p,c=d.documentElement,d=d.body,a.pageX=a.clientX+(c&&c.scrollLeft||d&&d.scrollLeft||0)-(c&&c.clientLeft||d&&d.clientLeft||0),a.pageY=a.clientY+(c&&c.scrollTop||d&&d.scrollTop||0)-(c&&c.clientTop||d&&d.clientTop||0);if(a.which==null&&(a.charCode!=null||a.keyCode!=null))a.which=a.charCode!=null?a.charCode:a.keyCode;
if(!a.metaKey&&a.ctrlKey)a.metaKey=a.ctrlKey;if(!a.which&&a.button!==b)a.which=a.button&1?1:a.button&2?3:a.button&4?2:0;return a},guid:1E8,proxy:e.proxy,special:{ready:{setup:e.bindReady,teardown:e.noop},live:{add:function(a){e.event.add(this,u(a.origType,a.selector),e.extend({},a,{handler:l,guid:a.handler.guid}))},remove:function(a){e.event.remove(this,u(a.origType,a.selector),a)}},beforeunload:{setup:function(a,b,c){if(e.isWindow(this))this.onbeforeunload=c},teardown:function(a,b){if(this.onbeforeunload===
b)this.onbeforeunload=null}}}};e.removeEvent=p.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)};e.Event=function(a,b){if(!this.preventDefault)return new e.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?h:f):this.type=a;b&&e.extend(this,b);this.timeStamp=e.now();this[e.expando]=!0};e.Event.prototype=
{preventDefault:function(){this.isDefaultPrevented=h;var a=this.originalEvent;if(a)a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=h;var a=this.originalEvent;if(a)a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=h;this.stopPropagation()},isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f};var X=function(a){var b=a.relatedTarget,c=!1,d=
a.type;a.type=a.data;if(b!==this&&(b&&(c=e.contains(this,b)),!c))e.event.handle.apply(this,arguments),a.type=d},T=function(a){a.type=a.data;e.event.handle.apply(this,arguments)};e.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){e.event.special[a]={setup:function(c){e.event.add(this,b,c&&c.selector?T:X,a)},teardown:function(a){e.event.remove(this,b,a&&a.selector?T:X)}}});if(!e.support.submitBubbles)e.event.special.submit={setup:function(){if(e.nodeName(this,"form"))return!1;else e.event.add(this,
"click.specialSubmit",function(a){var b=a.target,c=e.nodeName(b,"input")?b.type:"";(c==="submit"||c==="image")&&e(b).closest("form").length&&n("submit",this,arguments)}),e.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,c=e.nodeName(b,"input")?b.type:"";(c==="text"||c==="password")&&e(b).closest("form").length&&a.keyCode===13&&n("submit",this,arguments)})},teardown:function(){e.event.remove(this,".specialSubmit")}};if(!e.support.changeBubbles){var ra,Ha=function(a){var b=e.nodeName(a,
"input")?a.type:"",c=a.value;if(b==="radio"||b==="checkbox")c=a.checked;else if(b==="select-multiple")c=a.selectedIndex>-1?e.map(a.options,function(a){return a.selected}).join("-"):"";else if(e.nodeName(a,"select"))c=a.selectedIndex;return c},va=function(a,c){var d=a.target,f,g;if(K.test(d.nodeName)&&!d.readOnly&&(f=e._data(d,"_change_data"),g=Ha(d),(a.type!=="focusout"||d.type!=="radio")&&e._data(d,"_change_data",g),!(f===b||g===f)))if(f!=null||g)a.type="change",a.liveFired=b,e.event.trigger(a,c,
d)};e.event.special.change={filters:{focusout:va,beforedeactivate:va,click:function(a){var b=a.target,c=e.nodeName(b,"input")?b.type:"";(c==="radio"||c==="checkbox"||e.nodeName(b,"select"))&&va.call(this,a)},keydown:function(a){var b=a.target,c=e.nodeName(b,"input")?b.type:"";(a.keyCode===13&&!e.nodeName(b,"textarea")||a.keyCode===32&&(c==="checkbox"||c==="radio")||c==="select-multiple")&&va.call(this,a)},beforeactivate:function(a){a=a.target;e._data(a,"_change_data",Ha(a))}},setup:function(){if(this.type===
"file")return!1;for(var a in ra)e.event.add(this,a+".specialChange",ra[a]);return K.test(this.nodeName)},teardown:function(){e.event.remove(this,".specialChange");return K.test(this.nodeName)}};ra=e.event.special.change.filters;ra.focus=ra.beforeactivate}e.support.focusinBubbles||e.each({focus:"focusin",blur:"focusout"},function(a,b){function c(a){var d=e.event.fix(a);d.type=b;d.originalEvent={};e.event.trigger(d,null,d.target);d.isDefaultPrevented()&&a.preventDefault()}var d=0;e.event.special[b]=
{setup:function(){d++===0&&p.addEventListener(a,c,!0)},teardown:function(){--d===0&&p.removeEventListener(a,c,!0)}}});e.each(["bind","one"],function(a,c){e.fn[c]=function(a,d,k){var f;if(typeof a==="object"){for(var g in a)this[c](g,d,a[g],k);return this}if(arguments.length===2||d===!1)k=d,d=b;c==="one"?(f=function(a){e(this).unbind(a,f);return k.apply(this,arguments)},f.guid=k.guid||e.guid++):f=k;if(a==="unload"&&c!=="one")this.one(a,d,k);else{g=0;for(var h=this.length;g<h;g++)e.event.add(this[g],
a,f,d)}return this}});e.fn.extend({unbind:function(a,b){if(typeof a==="object"&&!a.preventDefault)for(var c in a)this.unbind(c,a[c]);else{c=0;for(var d=this.length;c<d;c++)e.event.remove(this[c],a,b)}return this},delegate:function(a,b,c,e){return this.live(b,c,e,a)},undelegate:function(a,b,c){return arguments.length===0?this.unbind("live"):this.die(b,null,c,a)},trigger:function(a,b){return this.each(function(){e.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return e.event.trigger(a,
b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||e.guid++,d=0,f=function(c){var f=(e.data(this,"lastToggle"+a.guid)||0)%d;e.data(this,"lastToggle"+a.guid,f+1);c.preventDefault();return b[f].apply(this,arguments)||!1};for(f.guid=c;d<b.length;)b[d++].guid=c;return this.click(f)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var Ba={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};e.each(["live","die"],function(a,c){e.fn[c]=function(a,d,k,g){var h=
0,m,o,n=g||this.selector,l=g?this:e(this.context);if(typeof a==="object"&&!a.preventDefault){for(m in a)l[c](m,d,a[m],n);return this}if(c==="die"&&!a&&g&&g.charAt(0)===".")return l.unbind(g),this;if(d===!1||e.isFunction(d))k=d||f,d=b;for(a=(a||"").split(" ");(g=a[h++])!=null;)if(m=V.exec(g),o="",m&&(o=m[0],g=g.replace(V,"")),g==="hover")a.push("mouseenter"+o,"mouseleave"+o);else if(m=g,Ba[g]?(a.push(Ba[g]+o),g+=o):g=(Ba[g]||g)+o,c==="live"){o=0;for(var r=l.length;o<r;o++)e.event.add(l[o],"live."+
u(g,n),{data:d,selector:n,handler:k,origType:g,origHandler:k,preType:m})}else l.unbind("live."+u(g,n),k);return this}});e.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,b){e.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.bind(b,a,c):this.trigger(b)};e.attrFn&&(e.attrFn[b]=!0)});(function(){function a(b,c,
e,d,k,f){for(var k=0,g=d.length;k<g;k++){var j=d[k];if(j){for(var w=!1,j=j[b];j;){if(j.sizcache===e){w=d[j.sizset];break}if(j.nodeType===1&&!f)j.sizcache=e,j.sizset=k;if(j.nodeName.toLowerCase()===c){w=j;break}j=j[b]}d[k]=w}}}function c(a,b,e,d,k,f){for(var k=0,g=d.length;k<g;k++){var j=d[k];if(j){for(var w=!1,j=j[a];j;){if(j.sizcache===e){w=d[j.sizset];break}if(j.nodeType===1){if(!f)j.sizcache=e,j.sizset=k;if(typeof b!=="string"){if(j===b){w=!0;break}}else if(l.filter(b,[j]).length>0){w=j;break}}j=
j[a]}d[k]=w}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,f=0,g=Object.prototype.toString,h=!1,m=!0,o=/\\/g,n=/\W/;[0,0].sort(function(){m=!1;return 0});var l=function(a,b,c,e){var c=c||[],k=b=b||p;if(b.nodeType!==1&&b.nodeType!==9)return[];if(!a||typeof a!=="string")return c;var f,j,w,h,m,s=!0,o=l.isXML(b),y=[],n=a;do if(d.exec(""),f=d.exec(n))if(n=f[3],y.push(f[1]),f[2]){h=f[3];break}while(f);if(y.length>
1&&u.exec(a))if(y.length===2&&r.relative[y[0]])j=C(y[0]+y[1],b);else for(j=r.relative[y[0]]?[b]:l(y.shift(),b);y.length;)a=y.shift(),r.relative[a]&&(a+=y.shift()),j=C(a,j);else if(!e&&y.length>1&&b.nodeType===9&&!o&&r.match.ID.test(y[0])&&!r.match.ID.test(y[y.length-1])&&(f=l.find(y.shift(),b,o),b=f.expr?l.filter(f.expr,f.set)[0]:f.set[0]),b){f=e?{expr:y.pop(),set:t(e)}:l.find(y.pop(),y.length===1&&(y[0]==="~"||y[0]==="+")&&b.parentNode?b.parentNode:b,o);j=f.expr?l.filter(f.expr,f.set):f.set;for(y.length>
0?w=t(j):s=!1;y.length;)f=m=y.pop(),r.relative[m]?f=y.pop():m="",f==null&&(f=b),r.relative[m](w,f,o)}else w=[];w||(w=j);w||l.error(m||a);if(g.call(w)==="[object Array]")if(s)if(b&&b.nodeType===1)for(a=0;w[a]!=null;a++)w[a]&&(w[a]===!0||w[a].nodeType===1&&l.contains(b,w[a]))&&c.push(j[a]);else for(a=0;w[a]!=null;a++)w[a]&&w[a].nodeType===1&&c.push(j[a]);else c.push.apply(c,w);else t(w,c);h&&(l(h,k,c,e),l.uniqueSort(c));return c};l.uniqueSort=function(a){if(G&&(h=m,a.sort(G),h))for(var b=1;b<a.length;b++)a[b]===
a[b-1]&&a.splice(b--,1);return a};l.matches=function(a,b){return l(a,null,null,b)};l.matchesSelector=function(a,b){return l(b,null,null,[a]).length>0};l.find=function(a,b,c){var e;if(!a)return[];for(var d=0,k=r.order.length;d<k;d++){var f,j=r.order[d];if(f=r.leftMatch[j].exec(a)){var g=f[1];f.splice(1,1);if(g.substr(g.length-1)!=="\\"&&(f[1]=(f[1]||"").replace(o,""),e=r.find[j](f,b,c),e!=null)){a=a.replace(r.match[j],"");break}}}e||(e=typeof b.getElementsByTagName!=="undefined"?b.getElementsByTagName("*"):
[]);return{set:e,expr:a}};l.filter=function(a,c,e,d){for(var k,f,j=a,g=[],w=c,v=c&&c[0]&&l.isXML(c[0]);a&&c.length;){for(var h in r.filter)if((k=r.leftMatch[h].exec(a))!=null&&k[2]){var E,m,s=r.filter[h];m=k[1];f=!1;k.splice(1,1);if(m.substr(m.length-1)!=="\\"){w===g&&(g=[]);if(r.preFilter[h])if(k=r.preFilter[h](k,w,e,g,d,v)){if(k===!0)continue}else f=E=!0;if(k)for(var y=0;(m=w[y])!=null;y++)if(m){E=s(m,k,y,w);var o=d^!!E;e&&E!=null?o?f=!0:w[y]=!1:o&&(g.push(m),f=!0)}if(E!==b){e||(w=g);a=a.replace(r.match[h],
"");if(!f)return[];break}}}if(a===j)if(f==null)l.error(a);else break;j=a}return w};l.error=function(a){throw"Syntax error, unrecognized expression: "+a;};var r=l.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,
POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b==="string",e=c&&!n.test(b),c=c&&!e;e&&(b=b.toLowerCase());for(var e=0,d=a.length,k;e<d;e++)if(k=a[e]){for(;(k=k.previousSibling)&&k.nodeType!==
1;);a[e]=c||k&&k.nodeName.toLowerCase()===b?k||!1:k===b}c&&l.filter(b,a,!0)},">":function(a,b){var c,e=typeof b==="string",d=0,k=a.length;if(e&&!n.test(b))for(b=b.toLowerCase();d<k;d++){if(c=a[d])c=c.parentNode,a[d]=c.nodeName.toLowerCase()===b?c:!1}else{for(;d<k;d++)(c=a[d])&&(a[d]=e?c.parentNode:c.parentNode===b);e&&l.filter(b,a,!0)}},"":function(b,e,d){var g,v=f++,h=c;typeof e==="string"&&!n.test(e)&&(g=e=e.toLowerCase(),h=a);h("parentNode",e,v,b,g,d)},"~":function(b,e,d){var g,v=f++,h=c;typeof e===
"string"&&!n.test(e)&&(g=e=e.toLowerCase(),h=a);h("previousSibling",e,v,b,g,d)}},find:{ID:function(a,b,c){if(typeof b.getElementById!=="undefined"&&!c)return(a=b.getElementById(a[1]))&&a.parentNode?[a]:[]},NAME:function(a,b){if(typeof b.getElementsByName!=="undefined"){for(var c=[],e=b.getElementsByName(a[1]),d=0,k=e.length;d<k;d++)e[d].getAttribute("name")===a[1]&&c.push(e[d]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!=="undefined")return b.getElementsByTagName(a[1])}},
preFilter:{CLASS:function(a,b,c,e,d,k){a=" "+a[1].replace(o,"")+" ";if(k)return a;for(var k=0,f;(f=b[k])!=null;k++)f&&(d^(f.className&&(" "+f.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||e.push(f):c&&(b[k]=!1));return!1},ID:function(a){return a[1].replace(o,"")},TAG:function(a){return a[1].replace(o,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||l.error(a[0]);a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||
!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}else a[2]&&l.error(a[0]);a[0]=f++;return a},ATTR:function(a,b,c,e,d,k){b=a[1]=a[1].replace(o,"");!k&&r.attrMap[b]&&(a[1]=r.attrMap[b]);a[4]=(a[4]||a[5]||"").replace(o,"");a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(a,b,c,e,k){if(a[1]==="not")if((d.exec(a[3])||"").length>1||/^\w/.test(a[3]))a[3]=l(a[3],null,null,b);else return a=l.filter(a[3],b,c,1^k),c||e.push.apply(e,a),!1;else if(r.match.POS.test(a[0])||r.match.CHILD.test(a[0]))return!0;
return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!l(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()===
"input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()===
"input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,e){return b===e.length-1},even:function(a,b){return b%2===0},odd:function(a,
b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,e){var d=b[1],k=r.filters[d];if(k)return k(a,c,b,e);else if(d==="contains")return(a.textContent||a.innerText||l.getText([a])||"").indexOf(b[3])>=0;else if(d==="not"){b=b[3];c=0;for(e=b.length;c<e;c++)if(b[c]===a)return!1;return!0}else l.error(d)},CHILD:function(a,b){var c=b[1],e=a;switch(c){case "only":case "first":for(;e=
e.previousSibling;)if(e.nodeType===1)return!1;if(c==="first")return!0;e=a;case "last":for(;e=e.nextSibling;)if(e.nodeType===1)return!1;return!0;case "nth":var c=b[2],d=b[3];if(c===1&&d===0)return!0;var k=b[0],f=a.parentNode;if(f&&(f.sizcache!==k||!a.nodeIndex)){for(var j=0,e=f.firstChild;e;e=e.nextSibling)if(e.nodeType===1)e.nodeIndex=++j;f.sizcache=k}e=a.nodeIndex-d;return c===0?e===0:e%c===0&&e/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b===
"*"&&a.nodeType===1||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],c=r.attrHandle[c]?r.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=c+"",d=b[2],k=b[4];return c==null?d==="!=":d==="="?e===k:d==="*="?e.indexOf(k)>=0:d==="~="?(" "+e+" ").indexOf(k)>=0:!k?e&&c!==!1:d==="!="?e!==k:d==="^="?e.indexOf(k)===0:d==="$="?e.substr(e.length-k.length)===k:d==="|="?e===k||e.substr(0,k.length+1)===k+"-":
!1},POS:function(a,b,c,e){var d=r.setFilters[b[2]];if(d)return d(a,c,b,e)}}},u=r.match.POS,L=function(a,b){return"\\"+(b-0+1)},B;for(B in r.match)r.match[B]=RegExp(r.match[B].source+/(?![^\[]*\])(?![^\(]*\))/.source),r.leftMatch[B]=RegExp(/(^(?:.|\r|\n)*?)/.source+r.match[B].source.replace(/\\(\d+)/g,L));var t=function(a,b){a=Array.prototype.slice.call(a,0);return b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(p.documentElement.childNodes,0)}catch(x){t=function(a,b){var c=0,e=b||[];if(g.call(a)===
"[object Array]")Array.prototype.push.apply(e,a);else if(typeof a.length==="number")for(var d=a.length;c<d;c++)e.push(a[c]);else for(;a[c];c++)e.push(a[c]);return e}}var G,z;p.documentElement.compareDocumentPosition?G=function(a,b){return a===b?(h=!0,0):!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:1}:(G=function(a,b){if(a===b)return h=!0,0;else if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,e,d=[],
k=[];c=a.parentNode;e=b.parentNode;var f=c;if(c===e)return z(a,b);else if(c){if(!e)return 1}else return-1;for(;f;)d.unshift(f),f=f.parentNode;for(f=e;f;)k.unshift(f),f=f.parentNode;c=d.length;e=k.length;for(f=0;f<c&&f<e;f++)if(d[f]!==k[f])return z(d[f],k[f]);return f===c?z(a,k[f],-1):z(d[f],b,1)},z=function(a,b,c){if(a===b)return c;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1});l.getText=function(a){for(var b="",c,e=0;a[e];e++)c=a[e],c.nodeType===3||c.nodeType===4?b+=c.nodeValue:
c.nodeType!==8&&(b+=l.getText(c.childNodes));return b};(function(){var a=p.createElement("div"),c="script"+(new Date).getTime(),e=p.documentElement;a.innerHTML="<a name='"+c+"'/>";e.insertBefore(a,e.firstChild);if(p.getElementById(c))r.find.ID=function(a,c,e){if(typeof c.getElementById!=="undefined"&&!e)return(c=c.getElementById(a[1]))?c.id===a[1]||typeof c.getAttributeNode!=="undefined"&&c.getAttributeNode("id").nodeValue===a[1]?[c]:b:[]},r.filter.ID=function(a,b){var c=typeof a.getAttributeNode!==
"undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b};e.removeChild(a);e=a=null})();(function(){var a=p.createElement("div");a.appendChild(p.createComment(""));if(a.getElementsByTagName("*").length>0)r.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){for(var e=[],d=0;c[d];d++)c[d].nodeType===1&&e.push(c[d]);c=e}return c};a.innerHTML="<a href='#'></a>";if(a.firstChild&&typeof a.firstChild.getAttribute!=="undefined"&&a.firstChild.getAttribute("href")!==
"#")r.attrHandle.href=function(a){return a.getAttribute("href",2)};a=null})();p.querySelectorAll&&function(){var a=l,b=p.createElement("div");b.innerHTML="<p class='TEST'></p>";if(!(b.querySelectorAll&&b.querySelectorAll(".TEST").length===0)){l=function(b,c,e,d){c=c||p;if(!d&&!l.isXML(c)){var k=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(k&&(c.nodeType===1||c.nodeType===9))if(k[1])return t(c.getElementsByTagName(b),e);else if(k[2]&&r.find.CLASS&&c.getElementsByClassName)return t(c.getElementsByClassName(k[2]),
e);if(c.nodeType===9){if(b==="body"&&c.body)return t([c.body],e);else if(k&&k[3]){var f=c.getElementById(k[3]);if(f&&f.parentNode){if(f.id===k[3])return t([f],e)}else return t([],e)}try{return t(c.querySelectorAll(b),e)}catch(j){}}else if(c.nodeType===1&&c.nodeName.toLowerCase()!=="object"){var k=c,g=(f=c.getAttribute("id"))||"__sizzle__",w=c.parentNode,v=/^\s*[+~]/.test(b);f?g=g.replace(/'/g,"\\$&"):c.setAttribute("id",g);if(v&&w)c=c.parentNode;try{if(!v||w)return t(c.querySelectorAll("[id='"+g+
"'] "+b),e)}catch(h){}finally{f||k.removeAttribute("id")}}}return a(b,c,e,d)};for(var c in a)l[c]=a[c];b=null}}();(function(){var a=p.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(p.createElement("div"),"div"),e=!1;try{b.call(p.documentElement,"[test!='']:sizzle")}catch(d){e=!0}l.matchesSelector=function(a,d){d=d.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!l.isXML(a))try{if(e||!r.match.PSEUDO.test(d)&&!/!=/.test(d)){var k=
b.call(a,d);if(k||!c||a.document&&a.document.nodeType!==11)return k}}catch(f){}return l(d,null,null,[a]).length>0}}})();(function(){var a=p.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(a.getElementsByClassName&&a.getElementsByClassName("e").length!==0&&(a.lastChild.className="e",a.getElementsByClassName("e").length!==1))r.order.splice(1,0,"CLASS"),r.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!=="undefined"&&!c)return b.getElementsByClassName(a[1])},
a=null})();l.contains=p.documentElement.contains?function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:p.documentElement.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(){return!1};l.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?a.nodeName!=="HTML":!1};var C=function(a,b){for(var c,e=[],d="",k=b.nodeType?[b]:b;c=r.match.PSEUDO.exec(a);)d+=c[0],a=a.replace(r.match.PSEUDO,"");a=r.relative[a]?a+"*":a;c=0;for(var f=k.length;c<f;c++)l(a,
k[c],e);return l.filter(d,e)};e.find=l;e.expr=l.selectors;e.expr[":"]=e.expr.filters;e.unique=l.uniqueSort;e.text=l.getText;e.isXMLDoc=l.isXML;e.contains=l.contains})();var ib=/Until$/,jb=/^(?:parents|prevUntil|prevAll)/,kb=/,/,Ya=/^.[^:#\[\.,]*$/,lb=Array.prototype.slice,Ia=e.expr.match.POS,mb={children:!0,contents:!0,next:!0,prev:!0};e.fn.extend({find:function(a){var b=this,c,d;if(typeof a!=="string")return e(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(e.contains(b[c],this))return!0});var f=
this.pushStack("","find",a),g,h,m;for(c=0,d=this.length;c<d;c++)if(g=f.length,e.find(a,this[c],f),c>0)for(h=g;h<f.length;h++)for(m=0;m<g;m++)if(f[m]===f[h]){f.splice(h--,1);break}return f},has:function(a){var b=e(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(e.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(t(this,a,!1),"not",a)},filter:function(a){return this.pushStack(t(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a==="string"?e.filter(a,this).length>
0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,f,g=this[0];if(e.isArray(a)){var h,m={},o=1;if(g&&a.length){for(d=0,f=a.length;d<f;d++)h=a[d],m[h]||(m[h]=Ia.test(h)?e(h,b||this.context):h);for(;g&&g.ownerDocument&&g!==b;){for(h in m)d=m[h],(d.jquery?d.index(g)>-1:e(g).is(d))&&c.push({selector:h,elem:g,level:o});g=g.parentNode;o++}}return c}h=Ia.test(a)||typeof a!=="string"?e(a,b||this.context):0;for(d=0,f=this.length;d<f;d++)for(g=this[d];g;)if(h?h.index(g)>-1:e.find.matchesSelector(g,
a)){c.push(g);break}else if(g=g.parentNode,!g||!g.ownerDocument||g===b||g.nodeType===11)break;c=c.length>1?e.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){return!a?this[0]&&this[0].parentNode?this.prevAll().length:-1:typeof a==="string"?e.inArray(this[0],e(a)):e.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a==="string"?e(a,b):e.makeArray(a&&a.nodeType?[a]:a),d=e.merge(this.get(),c);return this.pushStack(!c[0]||!c[0].parentNode||c[0].parentNode.nodeType===11||
!d[0]||!d[0].parentNode||d[0].parentNode.nodeType===11?d:e.unique(d))},andSelf:function(){return this.add(this.prevObject)}});e.each({parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null},parents:function(a){return e.dir(a,"parentNode")},parentsUntil:function(a,b,c){return e.dir(a,"parentNode",c)},next:function(a){return e.nth(a,2,"nextSibling")},prev:function(a){return e.nth(a,2,"previousSibling")},nextAll:function(a){return e.dir(a,"nextSibling")},prevAll:function(a){return e.dir(a,
"previousSibling")},nextUntil:function(a,b,c){return e.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return e.dir(a,"previousSibling",c)},siblings:function(a){return e.sibling(a.parentNode.firstChild,a)},children:function(a){return e.sibling(a.firstChild)},contents:function(a){return e.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:e.makeArray(a.childNodes)}},function(a,b){e.fn[a]=function(c,d){var f=e.map(this,b,c),g=lb.call(arguments);ib.test(a)||(d=c);d&&typeof d==="string"&&
(f=e.filter(d,f));f=this.length>1&&!mb[a]?e.unique(f):f;if((this.length>1||kb.test(d))&&jb.test(a))f=f.reverse();return this.pushStack(f,a,g.join(","))}});e.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?e.find.matchesSelector(b[0],a)?[b[0]]:[]:e.find.matches(a,b)},dir:function(a,c,d){for(var f=[],a=a[c];a&&a.nodeType!==9&&(d===b||a.nodeType!==1||!e(a).is(d));)a.nodeType===1&&f.push(a),a=a[c];return f},nth:function(a,b,c){for(var b=b||1,e=0;a;a=a[c])if(a.nodeType===1&&++e===
b)break;return a},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var nb=/ jQuery\d+="(?:\d+|null)"/g,Ca=/^\s+/,Ja=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Ka=/<([\w:]+)/,ob=/<tbody/i,pb=/<|&#?\w+;/,La=/<(?:script|object|embed|option|style)/i,Ma=/checked\s*(?:[^=]|=\s*.checked.)/i,qb=/\/(java|ecma)script/i,Za=/^\s*<!(?:\[CDATA\[|\-\-)/,I={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>",
"</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};I.optgroup=I.option;I.tbody=I.tfoot=I.colgroup=I.caption=I.thead;I.th=I.td;if(!e.support.htmlSerialize)I._default=[1,"div<div>","</div>"];e.fn.extend({text:function(a){return e.isFunction(a)?this.each(function(b){var c=e(this);c.text(a.call(this,b,c.text()))}):
typeof a!=="object"&&a!==b?this.empty().append((this[0]&&this[0].ownerDocument||p).createTextNode(a)):e.text(this)},wrapAll:function(a){if(e.isFunction(a))return this.each(function(b){e(this).wrapAll(a.call(this,b))});if(this[0]){var b=e(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&a.firstChild.nodeType===1;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return e.isFunction(a)?this.each(function(b){e(this).wrapInner(a.call(this,
b))}):this.each(function(){var b=e(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){e(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){e.nodeName(this,"body")||e(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},
before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});else if(arguments.length){var a=e(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});else if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,e(arguments[0]).toArray());
return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||e.filter(a,[d]).length)!b&&d.nodeType===1&&(e.cleanData(d.getElementsByTagName("*")),e.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++)for(b.nodeType===1&&e.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);return this},clone:function(a,b){a=a==null?!1:a;b=b==null?a:b;return this.map(function(){return e.clone(this,a,b)})},
html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(nb,""):null;else if(typeof a==="string"&&!La.test(a)&&(e.support.leadingWhitespace||!Ca.test(a))&&!I[(Ka.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ja,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)if(this[c].nodeType===1)e.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a}catch(f){this.empty().append(a)}}else e.isFunction(a)?this.each(function(b){var c=e(this);c.html(a.call(this,b,c.html()))}):
this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(e.isFunction(a))return this.each(function(b){var c=e(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!=="string"&&(a=e(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;e(this).remove();b?e(b).before(a):e(c).append(a)})}else return this.length?this.pushStack(e(e.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,
c,d){var f,g,h,m=a[0],o=[];if(!e.support.checkClone&&arguments.length===3&&typeof m==="string"&&Ma.test(m))return this.each(function(){e(this).domManip(a,c,d,!0)});if(e.isFunction(m))return this.each(function(f){var g=e(this);a[0]=m.call(this,f,c?g.html():b);g.domManip(a,c,d)});if(this[0]){f=m&&m.parentNode;f=e.support.parentNode&&f&&f.nodeType===11&&f.childNodes.length===this.length?{fragment:f}:e.buildFragment(a,this,o);h=f.fragment;if(g=h.childNodes.length===1?h=h.firstChild:h.firstChild){c=c&&
e.nodeName(g,"tr");g=0;for(var l=this.length,r=l-1;g<l;g++)d.call(c?e.nodeName(this[g],"table")?this[g].getElementsByTagName("tbody")[0]||this[g].appendChild(this[g].ownerDocument.createElement("tbody")):this[g]:this[g],f.cacheable||l>1&&g<r?e.clone(h,!0,!0):h)}o.length&&e.each(o,N)}return this}});e.buildFragment=function(a,b,c){var d,f,g,h;b&&b[0]&&(h=b[0].ownerDocument||b[0]);h.createDocumentFragment||(h=p);if(a.length===1&&typeof a[0]==="string"&&a[0].length<512&&h===p&&a[0].charAt(0)==="<"&&!La.test(a[0])&&
(e.support.checkClone||!Ma.test(a[0])))f=!0,(g=e.fragments[a[0]])&&g!==1&&(d=g);d||(d=h.createDocumentFragment(),e.clean(a,h,d,c));f&&(e.fragments[a[0]]=g?d:1);return{fragment:d,cacheable:f}};e.fragments={};e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){e.fn[a]=function(c){var d=[],c=e(c),f=this.length===1&&this[0].parentNode;if(f&&f.nodeType===11&&f.childNodes.length===1&&c.length===1)return c[b](this[0]),this;else{for(var f=
0,g=c.length;f<g;f++){var h=(f>0?this.clone(!0):this).get();e(c[f])[b](h);d=d.concat(h)}return this.pushStack(d,a,c.selector)}}});e.extend({clone:function(a,b,c){var d=a.cloneNode(!0),f,g,h;if((!e.support.noCloneEvent||!e.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!e.isXMLDoc(a)){B(a,d);f=C(a);g=C(d);for(h=0;f[h];++h)g[h]&&B(f[h],g[h])}if(b&&(z(a,d),c)){f=C(a);g=C(d);for(h=0;f[h];++h)z(f[h],g[h])}return d},clean:function(a,b,c,d){b=b||p;typeof b.createElement==="undefined"&&(b=b.ownerDocument||
b[0]&&b[0].ownerDocument||p);for(var f=[],g,h=0,m;(m=a[h])!=null;h++)if(typeof m==="number"&&(m+=""),m){if(typeof m==="string")if(pb.test(m)){m=m.replace(Ja,"<$1></$2>");g=(Ka.exec(m)||["",""])[1].toLowerCase();var o=I[g]||I._default,l=o[0],r=b.createElement("div");for(r.innerHTML=o[1]+m+o[2];l--;)r=r.lastChild;if(!e.support.tbody){l=ob.test(m);o=g==="table"&&!l?r.firstChild&&r.firstChild.childNodes:o[1]==="<table>"&&!l?r.childNodes:[];for(g=o.length-1;g>=0;--g)e.nodeName(o[g],"tbody")&&!o[g].childNodes.length&&
o[g].parentNode.removeChild(o[g])}!e.support.leadingWhitespace&&Ca.test(m)&&r.insertBefore(b.createTextNode(Ca.exec(m)[0]),r.firstChild);m=r.childNodes}else m=b.createTextNode(m);var n;if(!e.support.appendChecked)if(m[0]&&typeof(n=m.length)==="number")for(g=0;g<n;g++)Q(m[g]);else Q(m);m.nodeType?f.push(m):f=e.merge(f,m)}if(c){a=function(a){return!a.type||qb.test(a.type)};for(h=0;f[h];h++)d&&e.nodeName(f[h],"script")&&(!f[h].type||f[h].type.toLowerCase()==="text/javascript")?d.push(f[h].parentNode?
f[h].parentNode.removeChild(f[h]):f[h]):(f[h].nodeType===1&&(b=e.grep(f[h].getElementsByTagName("script"),a),f.splice.apply(f,[h+1,0].concat(b))),c.appendChild(f[h]))}return f},cleanData:function(a){for(var b,c,d=e.cache,f=e.expando,g=e.event.special,h=e.support.deleteExpando,m=0,o;(o=a[m])!=null;m++)if(!o.nodeName||!e.noData[o.nodeName.toLowerCase()])if(c=o[e.expando]){if((b=d[c]&&d[c][f])&&b.events){for(var l in b.events)g[l]?e.event.remove(o,l):e.removeEvent(o,l,b.handle);if(b.handle)b.handle.elem=
null}h?delete o[e.expando]:o.removeAttribute&&o.removeAttribute(e.expando);delete d[c]}}});var Da=/alpha\([^)]*\)/i,rb=/opacity=([^)]*)/,sb=/([A-Z]|^ms)/g,Na=/^-?\d+(?:px)?$/i,tb=/^-?\d/,ub=/^([\-+])=([\-+.\de]+)/,vb={position:"absolute",visibility:"hidden",display:"block"},$a=["Left","Right"],ab=["Top","Bottom"],ia,Oa,Pa;e.fn.css=function(a,c){return arguments.length===2&&c===b?this:e.access(this,a,c,!0,function(a,c,d){return d!==b?e.style(a,c,d):e.css(a,c)})};e.extend({cssHooks:{opacity:{get:function(a,
b){if(b){var c=ia(a,"opacity","opacity");return c===""?"1":c}else return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":e.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,f){if(a&&!(a.nodeType===3||a.nodeType===8||!a.style)){var g,h=e.camelCase(c),m=a.style,o=e.cssHooks[h],c=e.cssProps[h]||h;if(d!==b){f=typeof d;if(f==="string"&&(g=ub.exec(d)))d=+(g[1]+1)*+g[2]+parseFloat(e.css(a,c)),f="number";
if(!(d==null||f==="number"&&isNaN(d)))if(f==="number"&&!e.cssNumber[h]&&(d+="px"),!o||!("set"in o)||(d=o.set(a,d))!==b)try{m[c]=d}catch(l){}}else return o&&"get"in o&&(g=o.get(a,!1,f))!==b?g:m[c]}},css:function(a,c,d){var f,g,c=e.camelCase(c);g=e.cssHooks[c];c=e.cssProps[c]||c;c==="cssFloat"&&(c="float");if(g&&"get"in g&&(f=g.get(a,!0,d))!==b)return f;else if(ia)return ia(a,c)},swap:function(a,b,c){var d={},e;for(e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}});e.curCSS=
e.css;e.each(["height","width"],function(a,b){e.cssHooks[b]={get:function(a,c,d){var f;if(c){if(a.offsetWidth!==0)return $(a,b,d);else e.swap(a,vb,function(){f=$(a,b,d)});return f}},set:function(a,b){if(Na.test(b)){if(b=parseFloat(b),b>=0)return b+"px"}else return b}}});if(!e.support.opacity)e.cssHooks.opacity={get:function(a,b){return rb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,f=e.isNaN(b)?
"":"alpha(opacity="+b*100+")",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&e.trim(g.replace(Da,""))===""&&(c.removeAttribute("filter"),d&&!d.filter))return;c.filter=Da.test(g)?g.replace(Da,f):g+" "+f}};e(function(){if(!e.support.reliableMarginRight)e.cssHooks.marginRight={get:function(a,b){var c;e.swap(a,{display:"inline-block"},function(){c=b?ia(a,"margin-right","marginRight"):a.style.marginRight});return c}}});p.defaultView&&p.defaultView.getComputedStyle&&(Oa=function(a,c){var d,f,c=c.replace(sb,
"-$1").toLowerCase();if(!(f=a.ownerDocument.defaultView))return b;if(f=f.getComputedStyle(a,null))d=f.getPropertyValue(c),d===""&&!e.contains(a.ownerDocument.documentElement,a)&&(d=e.style(a,c));return d});p.documentElement.currentStyle&&(Pa=function(a,b){var c,d=a.currentStyle&&a.currentStyle[b],e=a.runtimeStyle&&a.runtimeStyle[b],f=a.style;if(!Na.test(d)&&tb.test(d)){c=f.left;if(e)a.runtimeStyle.left=a.currentStyle.left;f.left=b==="fontSize"?"1em":d||0;d=f.pixelLeft+"px";f.left=c;if(e)a.runtimeStyle.left=
e}return d===""?"auto":d});ia=Oa||Pa;if(e.expr&&e.expr.filters)e.expr.filters.hidden=function(a){var b=a.offsetHeight;return a.offsetWidth===0&&b===0||!e.support.reliableHiddenOffsets&&(a.style.display||e.css(a,"display"))==="none"},e.expr.filters.visible=function(a){return!e.expr.filters.hidden(a)};var wb=/%20/g,bb=/\[\]$/,Qa=/\r?\n/g,xb=/#.*$/,yb=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,zb=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,
Ab=/^(?:GET|HEAD)$/,Bb=/^\/\//,Ra=/\?/,Cb=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Db=/^(?:select|textarea)/i,Fa=/\s+/,Eb=/([?&])_=[^&]*/,Sa=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,Ta=e.fn.load,ya={},Ua={},fa,ga,Va=["*/"]+["*"];try{fa=ca.href}catch(Kb){fa=p.createElement("a"),fa.href="",fa=fa.href}ga=Sa.exec(fa.toLowerCase())||[];e.fn.extend({load:function(a,c,d){if(typeof a!=="string"&&Ta)return Ta.apply(this,arguments);else if(!this.length)return this;var f=a.indexOf(" ");
if(f>=0)var g=a.slice(f,a.length),a=a.slice(0,f);f="GET";c&&(e.isFunction(c)?(d=c,c=b):typeof c==="object"&&(c=e.param(c,e.ajaxSettings.traditional),f="POST"));var h=this;e.ajax({url:a,type:f,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText;a.isResolved()&&(a.done(function(a){c=a}),h.html(g?e("<div>").append(c.replace(Cb,"")).find(g):c));d&&h.each(d,[c,b,a])}});return this},serialize:function(){return e.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?
e.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Db.test(this.nodeName)||zb.test(this.type))}).map(function(a,b){var c=e(this).val();return c==null?null:e.isArray(c)?e.map(c,function(a){return{name:b.name,value:a.replace(Qa,"\r\n")}}):{name:b.name,value:c.replace(Qa,"\r\n")}}).get()}});e.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){e.fn[b]=function(a){return this.bind(b,a)}});e.each(["get","post"],
function(a,c){e[c]=function(a,d,f,g){e.isFunction(d)&&(g=g||f,f=d,d=b);return e.ajax({type:c,url:a,data:d,success:f,dataType:g})}});e.extend({getScript:function(a,c){return e.get(a,b,c,"script")},getJSON:function(a,b,c){return e.get(a,b,c,"json")},ajaxSetup:function(a,b){b?aa(a,e.ajaxSettings):(b=a,a=e.ajaxSettings);aa(a,b);return a},ajaxSettings:{url:fa,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(ga[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",
processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Va},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":e.parseJSON,"text xml":e.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:A(ya),ajaxTransport:A(Ua),ajax:function(a,c){function d(a,c,k,w){if(z!==2){z=2;B&&clearTimeout(B);L=b;u=w||"";q.readyState=
a>0?4:0;var v,n,p,w=c;if(k){var t=f,G=q,C=t.contents,K=t.dataTypes,V=t.responseFields,A,D,P,oa;for(D in V)D in k&&(G[V[D]]=k[D]);for(;K[0]==="*";)K.shift(),A===b&&(A=t.mimeType||G.getResponseHeader("content-type"));if(A)for(D in C)if(C[D]&&C[D].test(A)){K.unshift(D);break}if(K[0]in k)P=K[0];else{for(D in k){if(!K[0]||t.converters[D+" "+K[0]]){P=D;break}oa||(oa=D)}P=P||oa}P?(P!==K[0]&&K.unshift(P),k=k[P]):k=void 0}else k=b;if(a>=200&&a<300||a===304){if(f.ifModified){if(A=q.getResponseHeader("Last-Modified"))e.lastModified[r]=
A;if(A=q.getResponseHeader("Etag"))e.etag[r]=A}if(a===304)w="notmodified",v=!0;else try{A=f;A.dataFilter&&(k=A.dataFilter(k,A.dataType));var N=A.dataTypes;D={};var na,Q,$=N.length,J,F=N[0],I,M,H,T,X;for(na=1;na<$;na++){if(na===1)for(Q in A.converters)typeof Q==="string"&&(D[Q.toLowerCase()]=A.converters[Q]);I=F;F=N[na];if(F==="*")F=I;else if(I!=="*"&&I!==F){M=I+" "+F;H=D[M]||D["* "+F];if(!H)for(T in X=b,D)if(J=T.split(" "),J[0]===I||J[0]==="*")if(X=D[J[1]+" "+F]){T=D[T];T===!0?H=X:X===!0&&(H=T);break}!H&&
!X&&e.error("No conversion from "+M.replace(" "," to "));H!==!0&&(k=H?H(k):X(T(k)))}}n=k;w="success";v=!0}catch(Xa){w="parsererror",p=Xa}}else if(p=w,!w||a)w="error",a<0&&(a=0);q.status=a;q.statusText=""+(c||w);v?m.resolveWith(g,[n,w,q]):m.rejectWith(g,[q,w,p]);q.statusCode(l);l=b;x&&h.trigger("ajax"+(v?"Success":"Error"),[q,f,v?n:p]);o.resolveWith(g,[q,w]);x&&(h.trigger("ajaxComplete",[q,f]),--e.active||e.event.trigger("ajaxStop"))}}typeof a==="object"&&(c=a,a=b);var c=c||{},f=e.ajaxSetup({},c),
g=f.context||f,h=g!==f&&(g.nodeType||g instanceof e)?e(g):e.event,m=e.Deferred(),o=e._Deferred(),l=f.statusCode||{},r,n={},p={},u,t,L,B,G,z=0,x,C,q={readyState:0,setRequestHeader:function(a,b){if(!z){var c=a.toLowerCase(),a=p[c]=p[c]||a;n[a]=b}return this},getAllResponseHeaders:function(){return z===2?u:null},getResponseHeader:function(a){var c;if(z===2){if(!t)for(t={};c=yb.exec(u);)t[c[1].toLowerCase()]=c[2];c=t[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){if(!z)f.mimeType=
a;return this},abort:function(a){a=a||"abort";L&&L.abort(a);d(0,a);return this}};m.promise(q);q.success=q.done;q.error=q.fail;q.complete=o.done;q.statusCode=function(a){if(a){var b;if(z<2)for(b in a)l[b]=[l[b],a[b]];else b=a[q.status],q.then(b,b)}return this};f.url=((a||f.url)+"").replace(xb,"").replace(Bb,ga[1]+"//");f.dataTypes=e.trim(f.dataType||"*").toLowerCase().split(Fa);if(f.crossDomain==null)G=Sa.exec(f.url.toLowerCase()),f.crossDomain=!(!G||!(G[1]!=ga[1]||G[2]!=ga[2]||(G[3]||(G[1]==="http:"?
80:443))!=(ga[3]||(ga[1]==="http:"?80:443))));if(f.data&&f.processData&&typeof f.data!=="string")f.data=e.param(f.data,f.traditional);J(ya,f,c,q);if(z===2)return!1;x=f.global;f.type=f.type.toUpperCase();f.hasContent=!Ab.test(f.type);x&&e.active++===0&&e.event.trigger("ajaxStart");if(!f.hasContent&&(f.data&&(f.url+=(Ra.test(f.url)?"&":"?")+f.data,delete f.data),r=f.url,f.cache===!1)){G=e.now();var K=f.url.replace(Eb,"$1_="+G);f.url=K+(K===f.url?(Ra.test(f.url)?"&":"?")+"_="+G:"")}(f.data&&f.hasContent&&
f.contentType!==!1||c.contentType)&&q.setRequestHeader("Content-Type",f.contentType);f.ifModified&&(r=r||f.url,e.lastModified[r]&&q.setRequestHeader("If-Modified-Since",e.lastModified[r]),e.etag[r]&&q.setRequestHeader("If-None-Match",e.etag[r]));q.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+(f.dataTypes[0]!=="*"?", "+Va+"; q=0.01":""):f.accepts["*"]);for(C in f.headers)q.setRequestHeader(C,f.headers[C]);if(f.beforeSend&&(f.beforeSend.call(g,q,f)===
!1||z===2))return q.abort(),!1;for(C in{success:1,error:1,complete:1})q[C](f[C]);if(L=J(Ua,f,c,q)){q.readyState=1;x&&h.trigger("ajaxSend",[q,f]);f.async&&f.timeout>0&&(B=setTimeout(function(){q.abort("timeout")},f.timeout));try{z=1,L.send(n,d)}catch(V){z<2?d(-1,V):e.error(V)}}else d(-1,"No Transport");return q},param:function(a,c){var d=[],f=function(a,b){b=e.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b)c=e.ajaxSettings.traditional;if(e.isArray(a)||a.jquery&&
!e.isPlainObject(a))e.each(a,function(){f(this.name,this.value)});else for(var g in a)ja(g,a[g],c,f);return d.join("&").replace(wb,"+")}});e.extend({active:0,lastModified:{},etag:{}});var Fb=e.now(),wa=/(\=)\?(&|$)|\?\?/i;e.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return e.expando+"_"+Fb++}});e.ajaxPrefilter("json jsonp",function(b,c,d){c=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data==="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(wa.test(b.url)||c&&wa.test(b.data))){var f,
g=b.jsonpCallback=e.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h=a[g],m=b.url,o=b.data,l="$1"+g+"$2";b.jsonp!==!1&&(m=m.replace(wa,l),b.url===m&&(c&&(o=o.replace(wa,l)),b.data===o&&(m+=(/\?/.test(m)?"&":"?")+b.jsonp+"="+g)));b.url=m;b.data=o;a[g]=function(a){f=[a]};d.always(function(){a[g]=h;if(f&&e.isFunction(h))a[g](f[0])});b.converters["script json"]=function(){f||e.error(g+" was not called");return f[0]};b.dataTypes[0]="json";return"script"}});e.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){e.globalEval(a);return a}}});e.ajaxPrefilter("script",function(a){if(a.cache===b)a.cache=!1;if(a.crossDomain)a.type="GET",a.global=!1});e.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=p.head||p.getElementsByTagName("head")[0]||p.documentElement;return{send:function(e,f){c=p.createElement("script");c.async="async";if(a.scriptCharset)c.charset=a.scriptCharset;c.src=a.url;c.onload=c.onreadystatechange=function(a,
e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||f(200,"success")};d.insertBefore(c,d.firstChild)},abort:function(){if(c)c.onload(0,1)}}}});var Ea=a.ActiveXObject?function(){for(var a in ma)ma[a](0,1)}:!1,Gb=0,ma;e.ajaxSettings.xhr=a.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&F()))a:{try{b=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(c){}b=void 0}return b}:F;(function(a){e.extend(e.support,
{ajax:!!a,cors:!!a&&"withCredentials"in a})})(e.ajaxSettings.xhr());e.support.ajax&&e.ajaxTransport(function(c){if(!c.crossDomain||e.support.cors){var d;return{send:function(f,g){var h=c.xhr(),m,o;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(o in c.xhrFields)h[o]=c.xhrFields[o];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType);!c.crossDomain&&!f["X-Requested-With"]&&(f["X-Requested-With"]="XMLHttpRequest");try{for(o in f)h.setRequestHeader(o,
f[o])}catch(l){}h.send(c.hasContent&&c.data||null);d=function(a,f){var o,l,r,v,n;try{if(d&&(f||h.readyState===4)){d=b;if(m)h.onreadystatechange=e.noop,Ea&&delete ma[m];if(f)h.readyState!==4&&h.abort();else{o=h.status;r=h.getAllResponseHeaders();v={};if((n=h.responseXML)&&n.documentElement)v.xml=n;v.text=h.responseText;try{l=h.statusText}catch(p){l=""}!o&&c.isLocal&&!c.crossDomain?o=v.text?200:404:o===1223&&(o=204)}}}catch(y){f||g(-1,y)}v&&g(o,l,v,r)};!c.async||h.readyState===4?d():(m=++Gb,Ea&&(ma||
(ma={},e(a).unload(Ea)),ma[m]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var za={},S,ka,Hb=/^(?:toggle|show|hide)$/,Ib=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,xa,Ga=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],sa;e.fn.extend({show:function(a,b,c){if(a||a===0)return this.animate(W("show",3),a,b,c);else{for(var c=0,d=this.length;c<d;c++)if(a=this[c],a.style){b=a.style.display;if(!e._data(a,
"olddisplay")&&b==="none")b=a.style.display="";b===""&&e.css(a,"display")==="none"&&e._data(a,"olddisplay",ba(a.nodeName))}for(c=0;c<d;c++)if(a=this[c],a.style&&(b=a.style.display,b===""||b==="none"))a.style.display=e._data(a,"olddisplay")||"";return this}},hide:function(a,b,c){if(a||a===0)return this.animate(W("hide",3),a,b,c);else{a=0;for(b=this.length;a<b;a++)this[a].style&&(c=e.css(this[a],"display"),c!=="none"&&!e._data(this[a],"olddisplay")&&e._data(this[a],"olddisplay",c));for(a=0;a<b;a++)if(this[a].style)this[a].style.display=
"none";return this}},_toggle:e.fn.toggle,toggle:function(a,b,c){var d=typeof a==="boolean";e.isFunction(a)&&e.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:e(this).is(":hidden");e(this)[b?"show":"hide"]()}):this.animate(W("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var f=e.speed(b,c,d);if(e.isEmptyObject(a))return this.each(f.complete,
[!1]);a=e.extend({},a);return this[f.queue===!1?"each":"queue"](function(){var k;f.queue===!1&&e._mark(this);var b=e.extend({},f),c=this.nodeType===1,d=c&&e(this).is(":hidden"),g,h,m,j,o;b.animatedProperties={};for(m in a){g=e.camelCase(m);m!==g&&(a[g]=a[m],delete a[m]);h=a[g];e.isArray(h)?(b.animatedProperties[g]=h[1],k=a[g]=h[0],h=k):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);if(c&&(g==="height"||g===
"width"))if(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],e.css(this,"display")==="inline"&&e.css(this,"float")==="none")e.support.inlineBlockNeedsLayout?(h=ba(this.nodeName),h==="inline"?this.style.display="inline-block":(this.style.display="inline",this.style.zoom=1)):this.style.display="inline-block"}if(b.overflow!=null)this.style.overflow="hidden";for(m in a)if(c=new e.fx(this,b,m),h=a[m],Hb.test(h))c[h==="toggle"?d?"show":"hide":h]();else g=Ib.exec(h),j=c.cur(),g?
(h=parseFloat(g[2]),o=g[3]||(e.cssNumber[m]?"":"px"),o!=="px"&&(e.style(this,m,(h||1)+o),j*=(h||1)/c.cur(),e.style(this,m,j+o)),g[1]&&(h=(g[1]==="-="?-1:1)*h+j),c.custom(j,h,o)):c.custom(j,h,"");return!0})},stop:function(a,b){a&&this.queue([]);this.each(function(){var a=e.timers,c=a.length;for(b||e._unmark(!0,this);c--;)if(a[c].elem===this){if(b)a[c](!0);a.splice(c,1)}});b||this.dequeue();return this}});e.each({slideDown:W("show",1),slideUp:W("hide",1),slideToggle:W("toggle",1),fadeIn:{opacity:"show"},
fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){e.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});e.extend({speed:function(a,b,c){var d=a&&typeof a==="object"?e.extend({},a):{complete:c||!c&&b||e.isFunction(a)&&a,duration:a,easing:c&&b||b&&!e.isFunction(b)&&b};d.duration=e.fx.off?0:typeof d.duration==="number"?d.duration:d.duration in e.fx.speeds?e.fx.speeds[d.duration]:e.fx.speeds._default;d.old=d.complete;d.complete=function(a){e.isFunction(d.old)&&d.old.call(this);d.queue!==
!1?e.dequeue(this):a!==!1&&e._unmark(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+0.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b;this.elem=a;this.prop=c;b.orig=b.orig||{}}});e.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(e.fx.step[this.prop]||e.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];
var a,b=e.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,b,c){function d(a){return f.step(a)}var f=this,g=e.fx;this.startTime=sa||q();this.start=a;this.end=b;this.unit=c||this.unit||(e.cssNumber[this.prop]?"":"px");this.now=this.start;this.pos=this.state=0;d.elem=this.elem;d()&&e.timers.push(d)&&!xa&&(xa=setInterval(g.tick,g.interval))},show:function(){this.options.orig[this.prop]=e.style(this.elem,this.prop);this.options.show=!0;this.custom(this.prop===
"width"||this.prop==="height"?1:0,this.cur());e(this.elem).show()},hide:function(){this.options.orig[this.prop]=e.style(this.elem,this.prop);this.options.hide=!0;this.custom(this.cur(),0)},step:function(a){var b=sa||q(),c=!0,d=this.elem,f=this.options,g;if(a||b>=f.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();f.animatedProperties[this.prop]=!0;for(g in f.animatedProperties)f.animatedProperties[g]!==!0&&(c=!1);if(c){f.overflow!=null&&!e.support.shrinkWrapBlocks&&e.each(["",
"X","Y"],function(a,b){d.style["overflow"+b]=f.overflow[a]});f.hide&&e(d).hide();if(f.hide||f.show)for(var h in f.animatedProperties)e.style(d,h,f.orig[h]);f.complete.call(d)}return!1}else f.duration==Infinity?this.now=b:(a=b-this.startTime,this.state=a/f.duration,this.pos=e.easing[f.animatedProperties[this.prop]](this.state,a,0,1,f.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}};e.extend(e.fx,{tick:function(){for(var a=e.timers,b=0;b<a.length;++b)a[b]()||a.splice(b--,
1);a.length||e.fx.stop()},interval:13,stop:function(){clearInterval(xa);xa=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){e.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit:a.elem[a.prop]=a.now}}});if(e.expr&&e.expr.filters)e.expr.filters.animated=function(a){return e.grep(e.timers,function(b){return a===b.elem}).length};var Jb=/^t(?:able|d|h)$/i,
Wa=/^(?:body|html)$/i;e.fn.offset="getBoundingClientRect"in p.documentElement?function(a){var b=this[0],c;if(a)return this.each(function(b){e.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return e.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var f=b.ownerDocument,g=f.documentElement;if(!c||!e.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};b=f.body;f=M(f);return{top:c.top+(f.pageYOffset||e.support.boxModel&&g.scrollTop||
b.scrollTop)-(g.clientTop||b.clientTop||0),left:c.left+(f.pageXOffset||e.support.boxModel&&g.scrollLeft||b.scrollLeft)-(g.clientLeft||b.clientLeft||0)}}:function(a){var b=this[0];if(a)return this.each(function(b){e.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return e.offset.bodyOffset(b);e.offset.initialize();var c,d=b.offsetParent,f=b.ownerDocument,g=f.documentElement,h=f.body;c=(f=f.defaultView)?f.getComputedStyle(b,null):b.currentStyle;for(var m=
b.offsetTop,o=b.offsetLeft;(b=b.parentNode)&&b!==h&&b!==g;){if(e.offset.supportsFixedPosition&&c.position==="fixed")break;c=f?f.getComputedStyle(b,null):b.currentStyle;m-=b.scrollTop;o-=b.scrollLeft;if(b===d){m+=b.offsetTop;o+=b.offsetLeft;if(e.offset.doesNotAddBorder&&(!e.offset.doesAddBorderForTableAndCells||!Jb.test(b.nodeName)))m+=parseFloat(c.borderTopWidth)||0,o+=parseFloat(c.borderLeftWidth)||0;d=b.offsetParent}e.offset.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(m+=parseFloat(c.borderTopWidth)||
0,o+=parseFloat(c.borderLeftWidth)||0)}if(c.position==="relative"||c.position==="static")m+=h.offsetTop,o+=h.offsetLeft;e.offset.supportsFixedPosition&&c.position==="fixed"&&(m+=Math.max(g.scrollTop,h.scrollTop),o+=Math.max(g.scrollLeft,h.scrollLeft));return{top:m,left:o}};e.offset={initialize:function(){var a=p.body,b=p.createElement("div"),c,d,f,g=parseFloat(e.css(a,"marginTop"))||0;e.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});
b.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";a.insertBefore(b,a.firstChild);c=b.firstChild;d=c.firstChild;f=c.nextSibling.firstChild.firstChild;this.doesNotAddBorder=d.offsetTop!==5;this.doesAddBorderForTableAndCells=f.offsetTop===5;d.style.position=
"fixed";d.style.top="20px";this.supportsFixedPosition=d.offsetTop===20||d.offsetTop===15;d.style.position=d.style.top="";c.style.overflow="hidden";c.style.position="relative";this.subtractsBorderForOverflowNotVisible=d.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==g;a.removeChild(b);e.offset.initialize=e.noop},bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;e.offset.initialize();e.offset.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(e.css(a,"marginTop"))||0,c+=parseFloat(e.css(a,
"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=e.css(a,"position");if(d==="static")a.style.position="relative";var f=e(a),g=f.offset(),h=e.css(a,"top"),m=e.css(a,"left"),o={},l={};(d==="absolute"||d==="fixed")&&e.inArray("auto",[h,m])>-1?(l=f.position(),d=l.top,m=l.left):(d=parseFloat(h)||0,m=parseFloat(m)||0);e.isFunction(b)&&(b=b.call(a,c,g));if(b.top!=null)o.top=b.top-g.top+d;if(b.left!=null)o.left=b.left-g.left+m;"using"in b?b.using.call(a,o):f.css(o)}};e.fn.extend({position:function(){if(!this[0])return null;
var a=this[0],b=this.offsetParent(),c=this.offset(),d=Wa.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(e.css(a,"marginTop"))||0;c.left-=parseFloat(e.css(a,"marginLeft"))||0;d.top+=parseFloat(e.css(b[0],"borderTopWidth"))||0;d.left+=parseFloat(e.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||p.body;a&&!Wa.test(a.nodeName)&&e.css(a,"position")==="static";)a=a.offsetParent;return a})}});
e.each(["Left","Top"],function(a,c){var d="scroll"+c;e.fn[d]=function(c){var f,g;if(c===b){f=this[0];return!f?null:(g=M(f))?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:e.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:f[d]}return this.each(function(){(g=M(this))?g.scrollTo(!a?c:e(g).scrollLeft(),a?c:e(g).scrollTop()):this[d]=c})}});e.each(["Height","Width"],function(a,c){var d=c.toLowerCase();e.fn["inner"+c]=function(){var a=this[0];return a&&a.style?parseFloat(e.css(a,
d,"padding")):null};e.fn["outer"+c]=function(a){var b=this[0];return b&&b.style?parseFloat(e.css(b,d,a?"margin":"border")):null};e.fn[d]=function(a){var f=this[0];if(!f)return a==null?null:this;if(e.isFunction(a))return this.each(function(b){var c=e(this);c[d](a.call(this,b,c[d]()))});if(e.isWindow(f)){var g=f.document.documentElement["client"+c],h=f.document.body;return f.document.compatMode==="CSS1Compat"&&g||h&&h["client"+c]||g}else return f.nodeType===9?Math.max(f.documentElement["client"+c],
f.body["scroll"+c],f.documentElement["scroll"+c],f.body["offset"+c],f.documentElement["offset"+c]):a===b?(f=e.css(f,d),g=parseFloat(f),e.isNaN(g)?f:g):this.css(d,typeof a==="string"?a:a+"px")}});a.jQuery=a.$=e})(window);
var swfobject=function(){function a(){if(!U){try{var a=q.getElementsByTagName("body")[0].appendChild(q.createElement("span"));a.parentNode.removeChild(a)}catch(b){return}U=!0;for(var a=ba.length,c=0;c<a;c++)ba[c]()}}function b(a){U?a():ba[ba.length]=a}function c(a){if(typeof F.addEventListener!=A)F.addEventListener("load",a,!1);else if(typeof q.addEventListener!=A)q.addEventListener("load",a,!1);else if(typeof F.attachEvent!=A)C(F,"onload",a);else if(typeof F.onload=="function"){var b=F.onload;F.onload=
function(){b();a()}}else F.onload=a}function d(){var a=q.getElementsByTagName("body")[0],b=q.createElement(J);b.setAttribute("type",aa);var c=a.appendChild(b);if(c){var d=0;(function(){if(typeof c.GetVariable!=A){var e=c.GetVariable("$version");if(e)e=e.split(" ")[1].split(","),x.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)]}else if(d<10){d++;setTimeout(arguments.callee,10);return}a.removeChild(b);c=null;g()})()}else g()}function g(){var a=M.length;if(a>0)for(var b=0;b<a;b++){var c=M[b].id,
d=M[b].callbackFn,e={success:!1,id:c};if(x.pv[0]>0){var g=B(c);if(g)if(D(M[b].swfVersion)&&!(x.wk&&x.wk<312)){if(N(c,!0),d)e.success=!0,e.ref=f(c),d(e)}else if(M[b].expressInstall&&h()){e={};e.data=M[b].expressInstall;e.width=g.getAttribute("width")||"0";e.height=g.getAttribute("height")||"0";if(g.getAttribute("class"))e.styleclass=g.getAttribute("class");if(g.getAttribute("align"))e.align=g.getAttribute("align");for(var p={},g=g.getElementsByTagName("param"),t=g.length,u=0;u<t;u++)g[u].getAttribute("name").toLowerCase()!=
"movie"&&(p[g[u].getAttribute("name")]=g[u].getAttribute("value"));n(e,p,c,d)}else l(g),d&&d(e)}else if(N(c,!0),d){if((c=f(c))&&typeof c.SetVariable!=A)e.success=!0,e.ref=c;d(e)}}}function f(a){var b=null;if((a=B(a))&&a.nodeName=="OBJECT")typeof a.SetVariable!=A?b=a:(a=a.getElementsByTagName(J)[0])&&(b=a);return b}function h(){return!ha&&D("6.0.65")&&(x.win||x.mac)&&!(x.wk&&x.wk<312)}function n(a,b,c,d){ha=!0;da=d||null;qa={success:!1,id:c};var f=B(c);if(f){f.nodeName=="OBJECT"?(ca=u(f),e=null):(ca=
f,e=c);a.id=ja;if(typeof a.width==A||!/%$/.test(a.width)&&parseInt(a.width,10)<310)a.width="310";if(typeof a.height==A||!/%$/.test(a.height)&&parseInt(a.height,10)<137)a.height="137";q.title=q.title.slice(0,47)+" - Flash Player Installation";d=x.ie&&x.win?"ActiveX":"PlugIn";d="MMredirectURL="+encodeURI(window.location).toString().replace(/&/g,"%26")+"&MMplayerType="+d+"&MMdoctitle="+q.title;typeof b.flashvars!=A?b.flashvars+="&"+d:b.flashvars=d;if(x.ie&&x.win&&f.readyState!=4)d=q.createElement("div"),
c+="SWFObjectNew",d.setAttribute("id",c),f.parentNode.insertBefore(d,f),f.style.display="none",function(){f.readyState==4?f.parentNode.removeChild(f):setTimeout(arguments.callee,10)}();t(a,b,c)}}function l(a){if(x.ie&&x.win&&a.readyState!=4){var b=q.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(u(a),b);a.style.display="none";(function(){a.readyState==4?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(u(a),a)}function u(a){var b=
q.createElement("div");if(x.win&&x.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName(J)[0])if(a=a.childNodes)for(var c=a.length,d=0;d<c;d++)!(a[d].nodeType==1&&a[d].nodeName=="PARAM")&&a[d].nodeType!=8&&b.appendChild(a[d].cloneNode(!0));return b}function t(a,b,c){var d,e=B(c);if(x.wk&&x.wk<312)return d;if(e){if(typeof a.id==A)a.id=c;if(x.ie&&x.win){var f="",g;for(g in a)if(a[g]!=Object.prototype[g])g.toLowerCase()=="data"?b.movie=a[g]:g.toLowerCase()=="styleclass"?f+=' class="'+a[g]+'"':
g.toLowerCase()!="classid"&&(f+=" "+g+'="'+a[g]+'"');g="";for(var h in b)b[h]!=Object.prototype[h]&&(g+='<param name="'+h+'" value="'+b[h]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+g+"</object>";p[p.length]=a.id;d=B(a.id)}else{h=q.createElement(J);h.setAttribute("type",aa);for(var l in a)a[l]!=Object.prototype[l]&&(l.toLowerCase()=="styleclass"?h.setAttribute("class",a[l]):l.toLowerCase()!="classid"&&h.setAttribute(l,a[l]));for(f in b)b[f]!=Object.prototype[f]&&
f.toLowerCase()!="movie"&&(a=h,g=f,l=b[f],c=q.createElement("param"),c.setAttribute("name",g),c.setAttribute("value",l),a.appendChild(c));e.parentNode.replaceChild(h,e);d=h}}return d}function z(a){var b=B(a);if(b&&b.nodeName=="OBJECT")x.ie&&x.win?(b.style.display="none",function(){if(b.readyState==4){var c=B(a);if(c){for(var d in c)typeof c[d]=="function"&&(c[d]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b)}function B(a){var b=null;try{b=q.getElementById(a)}catch(c){}return b}
function C(a,b,c){a.attachEvent(b,c);Y[Y.length]=[a,b,c]}function D(a){var b=x.pv,a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function Q(a,b,c,d){if(!x.ie||!x.mac){var e=q.getElementsByTagName("head")[0];if(e){c=c&&typeof c=="string"?c:"screen";d&&(ea=H=null);if(!H||ea!=c)d=q.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("media",c),H=e.appendChild(d),
x.ie&&x.win&&typeof q.styleSheets!=A&&q.styleSheets.length>0&&(H=q.styleSheets[q.styleSheets.length-1]),ea=c;x.ie&&x.win?H&&typeof H.addRule==J&&H.addRule(a,b):H&&typeof q.createTextNode!=A&&H.appendChild(q.createTextNode(a+" {"+b+"}"))}}}function N(a,b){if(ua){var c=b?"visible":"hidden";U&&B(a)?B(a).style.visibility=c:Q("#"+a,"visibility:"+c)}}function $(a){return/[\\\"<>\.;]/.exec(a)!=null&&typeof encodeURIComponent!=A?encodeURIComponent(a):a}var A="undefined",J="object",aa="application/x-shockwave-flash",
ja="SWFObjectExprInst",F=window,q=document,R=navigator,W=!1,ba=[function(){W?d():g()}],M=[],p=[],Y=[],ca,e,da,qa,U=!1,ha=!1,H,ea,ua=!0,x=function(){var a=typeof q.getElementById!=A&&typeof q.getElementsByTagName!=A&&typeof q.createElement!=A,b=R.userAgent.toLowerCase(),c=R.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,e=!+"\u000b1",f=[0,0,0],g=null;if(typeof R.plugins!=A&&typeof R.plugins["Shockwave Flash"]==
J){if((g=R.plugins["Shockwave Flash"].description)&&!(typeof R.mimeTypes!=A&&R.mimeTypes[aa]&&!R.mimeTypes[aa].enabledPlugin))W=!0,e=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),f[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),f[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),f[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}else if(typeof F.ActiveXObject!=A)try{var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(h&&(g=h.GetVariable("$version")))e=!0,g=g.split(" ")[1].split(","),
f=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]}catch(l){}return{w3:a,pv:f,wk:b,ie:e,win:d,mac:c}}();(function(){x.w3&&((typeof q.readyState!=A&&q.readyState=="complete"||typeof q.readyState==A&&(q.getElementsByTagName("body")[0]||q.body))&&a(),U||(typeof q.addEventListener!=A&&q.addEventListener("DOMContentLoaded",a,!1),x.ie&&x.win&&(q.attachEvent("onreadystatechange",function(){q.readyState=="complete"&&(q.detachEvent("onreadystatechange",arguments.callee),a())}),F==top&&function(){if(!U){try{q.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,
0);return}a()}}()),x.wk&&function(){U||(/loaded|complete/.test(q.readyState)?a():setTimeout(arguments.callee,0))}(),c(a)))})();(function(){x.ie&&x.win&&window.attachEvent("onunload",function(){for(var a=Y.length,b=0;b<a;b++)Y[b][0].detachEvent(Y[b][1],Y[b][2]);a=p.length;for(b=0;b<a;b++)z(p[b]);for(var c in x)x[c]=null;x=null;for(var d in swfobject)swfobject[d]=null;swfobject=null})})();return{registerObject:function(a,b,c,d){if(x.w3&&a&&b){var e={};e.id=a;e.swfVersion=b;e.expressInstall=c;e.callbackFn=
d;M[M.length]=e;N(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(x.w3)return f(a)},embedSWF:function(a,c,d,e,f,g,l,p,u,q){var z={success:!1,id:c};x.w3&&!(x.wk&&x.wk<312)&&a&&c&&d&&e&&f?(N(c,!1),b(function(){d+="";e+="";var b={};if(u&&typeof u===J)for(var B in u)b[B]=u[B];b.data=a;b.width=d;b.height=e;B={};if(p&&typeof p===J)for(var x in p)B[x]=p[x];if(l&&typeof l===J)for(var C in l)typeof B.flashvars!=A?B.flashvars+="&"+C+"="+l[C]:B.flashvars=C+"="+l[C];if(D(f))x=t(b,B,c),b.id==
c&&N(c,!0),z.success=!0,z.ref=x;else if(g&&h()){b.data=g;n(b,B,c,q);return}else N(c,!0);q&&q(z)})):q&&q(z)},switchOffAutoHideShow:function(){ua=!1},ua:x,getFlashPlayerVersion:function(){return{major:x.pv[0],minor:x.pv[1],release:x.pv[2]}},hasFlashPlayerVersion:D,createSWF:function(a,b,c){if(x.w3)return t(a,b,c)},showExpressInstall:function(a,b,c,d){x.w3&&h()&&n(a,b,c,d)},removeSWF:function(a){x.w3&&z(a)},createCSS:function(a,b,c,d){x.w3&&Q(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=
q.location.search||q.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(a==null)return $(b);for(var b=b.split("&"),c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return $(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(ha){var a=B(ja);if(a&&ca){a.parentNode.replaceChild(ca,a);if(e&&(N(e,!0),x.ie&&x.win))ca.style.display="block";da&&da(qa)}ha=!1}}}}();
(function(a,b,c){function d(){h=b[n](function(){g.each(function(){var b=a(this),c=b.width(),d=b.height(),f=a.data(this,u);if(c!==f.w||d!==f.h)b.trigger(l,[f.w=c,f.h=d])});d()},f[t])}var g=a([]),f=a.resize=a.extend(a.resize,{}),h,n="setTimeout",l="resize",u=l+"-special-event",t="delay";f[t]=250;f.throttleWindow=!0;a.event.special[l]={setup:function(){if(!f.throttleWindow&&this[n])return!1;var b=a(this);g=g.add(b);a.data(this,u,{w:b.width(),h:b.height()});g.length===1&&d()},teardown:function(){if(!f.throttleWindow&&
this[n])return!1;var b=a(this);g=g.not(b);b.removeData(u);g.length||clearTimeout(h)},add:function(b){function d(b,f,h){var l=a(this),n=a.data(this,u);n.w=f!==c?f:l.width();n.h=h!==c?h:l.height();g.apply(this,arguments)}if(!f.throttleWindow&&this[n])return!1;var g;if(a.isFunction(b))return g=b,d;else g=b.handler,b.handler=d}}})(jQuery,this);
jQuery.fn.xml=function(a){var b="";this.length&&(typeof a!="undefined"&&a?this:jQuery(this[0]).contents()).each(function(){b+=window.ActiveXObject?this.xml:(new XMLSerializer).serializeToString(this)});return b};
(function(){function a(a){var b,c;if(!this.length)return this;b=this[0];b instanceof Document?(c=b,b=c.documentElement):c=b.ownerDocument;if(a==null){if(!c.cancelFullScreen&&!c.webkitCancelFullScreen&&!c.mozCancelFullScreen)return null;a=!!c.fullScreen||!!c.webkitIsFullScreen||!!c.mozFullScreen;return!a?a:c.fullScreenElement||c.webkitCurrentFullScreenElement||c.mozFullScreenElement||a}a?(a=b.requestFullScreen||b.webkitRequestFullScreen||b.mozRequestFullScreen)&&a.call(b):(a=c.cancelFullScreen||c.webkitCancelFullScreen||
c.mozCancelFullScreen)&&a.call(c);return this}function b(){jQuery(document).trigger(new jQuery.Event("fullscreenchange"))}function c(){jQuery(document).trigger(new jQuery.Event("fullscreenerror"))}jQuery.fn.fullScreen=a;jQuery.fn.toggleFullScreen=function(){return a.call(this,!a.call(this))};(function(){var a,g;a=document;a.webkitCancelFullScreen?(a="webkitfullscreenchange",g="webkitfullscreenerror"):a.mozCancelFullScreen?(a="mozfullscreenchange",g="mozfullscreenerror"):(a="fullscreenchange",g="fullscreenerror");
document.addEventListener?(document.addEventListener(a,b,!0),document.addEventListener(g,c,!0)):(document.attachEvent("change",b),document.attachEvent("error",c))})()})();
window.ModernizrCustom=function(a,b,c){var d={},g=b.documentElement,a=b.createElement("modernizr"),a=a.style,f={},h=[],n=h.slice,l,u={}.hasOwnProperty,t;typeof u!=="undefined"&&typeof u.call!=="undefined"?t=function(a,b){return u.call(a,b)}:t=function(a,b){return b in a&&typeof a.constructor.prototype[b]==="undefined"};Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if(typeof b!="function")throw new TypeError;var c=n.call(arguments,1),d=function(){if(this instanceof d){var f=
function(){};f.prototype=b.prototype;var f=new f,g=b.apply(f,c.concat(n.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(n.call(arguments)))};return d});f.canvas=function(){var a=b.createElement("canvas");return!!a.getContext&&!!a.getContext("2d")};f.video=function(){var a=b.createElement("video"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),c.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,
""),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}catch(d){}return c};f.audio=function(){var a=b.createElement("audio"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),c.mp3=a.canPlayType("audio/mpeg;").replace(/^no$/,""),c.wav=a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),c.m4a=(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(d){}return c};for(var z in f)t(f,
z)&&(l=z.toLowerCase(),d[l]=f[z](),h.push((d[l]?"":"no-")+l));d.addTest=function(a,b){if(typeof a=="object")for(var f in a)t(a,f)&&d.addTest(f,a[f]);else{a=a.toLowerCase();if(d[a]!==c)return d;b=typeof b=="function"?b():b;typeof enableClasses!="undefined"&&enableClasses&&(g.className+=" "+(b?"":"no-")+a);d[a]=b}return d};a.cssText="";return a=null,d._version="2.6.2",d}(this,this.document);
jQuery&&function(){jQuery.extend(jQuery.fn,{contextMenu:function(a,b){if(a.menu==void 0)return!1;if(a.inSpeed==void 0)a.inSpeed=150;if(a.outSpeed==void 0)a.outSpeed=75;if(a.inSpeed==0)a.inSpeed=-1;if(a.outSpeed==0)a.outSpeed=-1;jQuery(this).each(function(){var c=jQuery(this),d=jQuery(c).offset();jQuery("#"+a.menu).addClass("contextMenu");jQuery(this).mousedown(function(g){g.stopPropagation();jQuery(this).mouseup(function(f){f.stopPropagation();var h=jQuery(this);jQuery(this).unbind("mouseup");if(g.button==
2){jQuery(".contextMenu").hide();var n=jQuery("#"+a.menu);if(jQuery(c).hasClass("disabled"))return!1;var l,u;f.pageX?l=f.pageX:l=f.clientX+void 0;f.pageY?u=f.pageY:u=f.clientY+void 0;jQuery(document).unbind("click");jQuery(n).css({top:u,left:l}).fadeIn(a.inSpeed);jQuery(n).find("A").mouseover(function(){jQuery(n).find("LI.hover").removeClass("hover");jQuery(this).parent().addClass("hover")}).mouseout(function(){jQuery(n).find("LI.hover").removeClass("hover")});jQuery(document).keypress(function(a){switch(a.keyCode){case 38:jQuery(n).find("LI.hover").size()==
0?jQuery(n).find("LI:last").addClass("hover"):(jQuery(n).find("LI.hover").removeClass("hover").prevAll("LI:not(.disabled)").eq(0).addClass("hover"),jQuery(n).find("LI.hover").size()==0&&jQuery(n).find("LI:last").addClass("hover"));break;case 40:jQuery(n).find("LI.hover").size()==0?jQuery(n).find("LI:first").addClass("hover"):(jQuery(n).find("LI.hover").removeClass("hover").nextAll("LI:not(.disabled)").eq(0).addClass("hover"),jQuery(n).find("LI.hover").size()==0&&jQuery(n).find("LI:first").addClass("hover"));
break;case 13:jQuery(n).find("LI.hover A").trigger("click");break;case 27:jQuery(document).trigger("click")}});jQuery("#"+a.menu).find("A").unbind("click");jQuery("#"+a.menu).find("LI:not(.disabled) A").click(function(){jQuery(document).unbind("click").unbind("keypress");jQuery(".contextMenu").hide();b&&b(jQuery(this).attr("href").substr(1),jQuery(h),{x:l-d.left,y:u-d.top,docX:l,docY:u});return!1});setTimeout(function(){jQuery(document).click(function(){jQuery(document).unbind("click").unbind("keypress");
jQuery(n).fadeOut(a.outSpeed);return!1})},0)}})});jQuery.browser.mozilla?jQuery("#"+a.menu).each(function(){jQuery(this).css({MozUserSelect:"none"})}):jQuery.browser.msie?jQuery("#"+a.menu).each(function(){jQuery(this).bind("selectstart.disableTextSelect",function(){return!1})}):jQuery("#"+a.menu).each(function(){jQuery(this).bind("mousedown.disableTextSelect",function(){return!1})});jQuery(c).add(jQuery("UL.contextMenu")).bind("contextmenu",function(){return!1})});return jQuery(this)},disableContextMenuItems:function(a){if(a==
void 0)return jQuery(this).find("LI").addClass("disabled"),jQuery(this);jQuery(this).each(function(){if(a!=void 0)for(var b=a.split(","),c=0;c<b.length;c++)jQuery(this).find('A[href="'+b[c]+'"]').parent().addClass("disabled")});return jQuery(this)},enableContextMenuItems:function(a){if(a==void 0)return jQuery(this).find("LI.disabled").removeClass("disabled"),jQuery(this);jQuery(this).each(function(){if(a!=void 0)for(var b=a.split(","),c=0;c<b.length;c++)jQuery(this).find('A[href="'+b[c]+'"]').parent().removeClass("disabled")});
return jQuery(this)},disableContextMenu:function(){jQuery(this).each(function(){jQuery(this).addClass("disabled")});return jQuery(this)},enableContextMenu:function(){jQuery(this).each(function(){jQuery(this).removeClass("disabled")});return jQuery(this)},destroyContextMenu:function(){jQuery(this).each(function(){jQuery(this).unbind("mousedown").unbind("mouseup")});return jQuery(this)}})}(jQuery);
if(!Array.indexOf)Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return b;return-1};Number.prototype.scale=0;Date.prototype.offset="+00:00";var Base=function(){};
Base.extend=function(a,b){var c=Base.prototype.extend;Base._prototyping=!0;var d=new this;c.call(d,a);d.base=function(){};delete Base._prototyping;var g=d.constructor,f=d.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==f)this._constructing=!0,g.apply(this,arguments),delete this._constructing;else if(arguments[0]!=null)return(arguments[0].extend||c).call(arguments[0],d)};f.ancestor=this;f.extend=this.extend;f.mixin=this.mixin;f.prototype=d;f.toString=this.toString;
f.valueOf=function(a){return a=="object"?f:g.valueOf()};c.call(f,b);return f};
Base.prototype={extend:function(a,b){if(arguments.length>1){var c=this[a];if(c&&typeof b=="function"&&(!c.valueOf||c.valueOf()!=b.valueOf())&&/\bbase\b/.test(b)){var d=b.valueOf(),b=function(){var a=this.base||Base.prototype.base;this.base=c;var b=d.apply(this,arguments);this.base=a;return b};b.valueOf=function(a){return a=="object"?b:d};b.toString=Base.toString}this[a]=b}else if(a){var g=Base.prototype.extend;!Base._prototyping&&typeof this!="function"&&(g=this.extend||g);for(var f={toSource:null},
h=["constructor","toString","valueOf"],n=Base._prototyping?0:1;l=h[n++];)a[l]!=f[l]&&g.call(this,l,a[l]);for(var l in a)f[l]||g.call(this,l,a[l])}return this}};function namespace(a){for(var a=a.split("."),b=window,c=0;c<a.length;c++)typeof b[a[c]]=="undefined"&&(b[a[c]]={}),b=b[a[c]]}
Base=Base.extend({className:"Base",isDestroyed:!1,constructor:function(a){this.configure(a);this.initialize();this.__initializeMixins()},configure:function(a){Base.apply(this,a||{})},initialize:function(){},destroy:function(){if(!this.isDestroyed)this.isDestroyed=!0,this.__deinitializeMixins()},__initializeMixins:function(a){a=a||this;if(this.constructor.__mixins__)for(var b=0,c=this.constructor.__mixins__.length;b<c;b++)this.constructor.__mixins__[b].deinitialize.call(a);this.constructor.ancestor&&
this.constructor.ancestor.prototype.__initializeMixins&&this.constructor.ancestor.prototype.__initializeMixins(a)},__deinitializeMixins:function(a){a=a||this;if(this.constructor.__mixins__)for(var b=0,c=this.constructor.__mixins__.length;b<c;b++)this.constructor.__mixins__[b].deinitialize.call(a);if(this.__mixins__){b=0;for(c=this.__mixins__.length;b<c;b++)this.__mixins__[b].deinitialize.call(a)}this.constructor.ancestor&&this.constructor.ancestor.prototype.__deinitializeMixins&&this.constructor.ancestor.prototype.__deinitializeMixins(a)},
instanceOf:function(a){return this.constructor===a?!0:this.constructor.ancestor&&this.constructor.ancestor.prototype.instanceOf?this.constructor.ancestor.prototype.instanceOf(a):!1},mixin:function(a){var b=["initialize","deinitialize","extend"],c;for(c in a)b.indexOf(c)==-1&&(this[c]=a[c]);if(typeof this.__mixins__=="undefined")this.__mixins__=[];this.__mixins__.push(a);a.initialize.call(this)},hasMixin:function(a){return this.constructor.__mixins__&&this.constructor.__mixins__.indexOf(a)>-1?!0:this.__mixins__&&
this.__mixins__.indexOf(a)>-1?!0:this.constructor.ancestor&&this.constructor.ancestor.prototype.hasMixin?this.constructor.ancestor.prototype.hasMixin(a):!1}},{ancestor:Object,mixin:function(a){var b=["mixinName","initialize","deinitialize","extend"],c=this.prototype,d;for(d in a)b.indexOf(d)==-1&&(c[d]=a[d]);if(typeof this.__mixins__=="undefined")this.__mixins__=[];this.__mixins__.push(a)},apply:function(a,b){if(a&&b&&typeof b=="object")for(var c in b)a[c]=b[c];return a}});namespace("refactored");
refactored.Object=Base.extend({className:"refactored.Object",isDebugEnabled:!1,objectId:0,eventDispatcher:null,constructor:function(a){this.objectId=refactored.Object.globalObjectId++;this.eventDispatcher=new refactored.event.EventDispatcher({context:this});this.base(a);this.afterMethodCallback("constructor",arguments)},destroy:function(){this.isDestroyed||(this.base(),this.doDestroy())},doDestroy:function(){},beforeMethodCallback:function(a,b){var c="before"+refactored.utils.String.upperCaseFirst(a);
typeof this[c]!="undefined"&&this[c].apply(this,b)},afterMethodCallback:function(a,b){var c="after"+refactored.utils.String.upperCaseFirst(a);typeof this[c]!="undefined"&&this[c].apply(this,b)},dispatchEvent:function(a,b,c){this.eventDispatcher.dispatchEvent(a,b,c)},addEventListener:function(a,b,c){this.eventDispatcher.addEventListener(a,b,c)},removeEventListener:function(a,b){this.eventDispatcher.removeEventListener(a,b)},log:function(){if(refactored.Object.isGlobalDebugEnabled&&this.isDebugEnabled){var a=
$j.makeArray(arguments);a.unshift(this.toString()+" || ");var b=new Date,c=refactored.utils.String.padLeft(b.getHours().toString(),"0",2)+":";c+=refactored.utils.String.padLeft(b.getMinutes().toString(),"0",2)+":";c+=refactored.utils.String.padLeft(b.getSeconds().toString(),"0",2)+":";c+=refactored.utils.String.padLeft(b.getMilliseconds().toString(),"0",3);a.unshift(c+" - ");try{window.console?/iPhone|iPod|iPad/i.test(navigator.platform)?window.console.log(a.join(" ")):window.console.log.apply(window.console,
a):window.opera&&window.opera.postError(a.join(" "))}catch(d){}}},toString:function(){return this.className+" ("+this.objectId+")"}},{globalObjectId:0,isGlobalDebugEnabled:!0});namespace("refactored");refactored.Mixin={initialize:function(){},deinitialize:function(){},extend:function(a){return Base.apply(Base.apply({},this),a)}};namespace("refactored");
refactored.Error=refactored.Object.extend({className:"refactored.Error",code:"",message:"",source:null,data:null,toString:function(){return"ERROR : "+this.source.toString()+" - "+this.code+", "+this.message}});if(!window.requestAnimationFrame)window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}}();namespace("refactored.event");
refactored.event.Event=Base.extend({type:"",target:null,currentTarget:null,bubbling:!1,data:null,constructor:function(a){Base.apply(this,a||{})},stopPropagation:function(){this.canceled=!0}},{CHANGE:"change"});namespace("refactored.event");
refactored.event.EventDispatcher=Base.extend({className:"refactored.event.EventDispatcher",context:null,parentEventDispatcher:null,addEventTypeCallback:null,removeEventTypeCallback:null,eventListeners:null,constructor:function(a){this.base(a)},initialize:function(){this.base();this.eventListeners={}},doDestroy:function(){this.base();this.eventListeners=[];this.parentEventDispatcher=null},addEventType:function(a){this.addEventTypeCallback&&this.addEventTypeCallback(a)},removeEventType:function(a){this.removeEventTypeCallback&&
this.removeEventTypeCallback(a)},getParentEventDispatcher:function(){return this.parentEventDispatcher},setParentEventDispatcher:function(a){this.parentEventDispatcher=a},dispatchEvent:function(a,b,c){var d=!refactored.utils.Object.isString(a),g=d?a.type:a;if((d?a.bubbling:c)||typeof this.eventListeners[g]!="undefined"){var f=this.context||this;d||(a=new refactored.event.Event({type:a,bubbling:c||!1,data:b||null}));if(!a.target)a.target=f;a.currentTarget=f;if(typeof this.eventListeners[g]!="undefined"){b=
this.eventListeners[g].slice(0,this.eventListeners[g].length);c=[a];refactored.utils.Object.isArray(a.data)?c=c.concat(a.data):c.push(a.data);d=0;for(g=b.length;d<g;d++){var h=!1;if((h=b[d].context?b[d].callback.apply(b[d].context,c)===!1:b[d].callback.apply(f,c)===!1)||a.canceled){a.canceled=!0;return}}}!a.canceled&&a.bubbling&&this.getParentEventDispatcher()&&this.getParentEventDispatcher().dispatchEvent(a)}},addEventListener:function(a,b,c){typeof this.eventListeners[a]=="undefined"&&(this.eventListeners[a]=
[]);this.eventListeners[a].push({callback:b,context:c});this.eventListeners[a].length==1&&this.addEventType(a)},removeEventListener:function(a,b){if(b&&typeof this.eventListeners[a]!="undefined"){for(var c=0,d=this.eventListeners[a].length;c<d;c++){if(this.eventListeners[a][c].callback===b)break;if(typeof b.guid!="undefined"&&this.eventListeners[a][c].callback.guid===b.guid)break}c!=-1&&(this.eventListeners[a].splice(c,1),this.eventListeners[a].length==0&&(delete this.eventListeners[a],this.removeEventType(a)))}}});
namespace("refactored.parser");
refactored.parser.DateParser=refactored.Object.extend({formats:null,constructor:function(a){this.base(Base.apply({className:"refactored.parser.DateParser"},a));this.formats=[{expression:"^(\\d{4})-(\\d{2})-(\\d{2})$",groups:["year","month","day"]},{expression:"^(\\d{4})-(\\d{2})-(\\d{2})([\\+-]\\d{2}:\\d{2})$",groups:["year","month","day","offset"]},{expression:"^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})$",groups:"year,month,day,hour,minute,second".split(",")},{expression:"^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})([\\+-]\\d{2}:\\d{2})$",
groups:"year,month,day,hour,minute,second,offset".split(",")},{expression:"^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})([\\+-]\\d{4})$",groups:"year,month,day,hour,minute,second,offset".split(",")},{expression:"^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d{3})([\\+-]\\d{2}:\\d{2})$",groups:"year,month,day,hour,minute,second,millisecond,offset".split(",")},{expression:"^(\\d{4})-(\\d{2})-(\\d{2})([\\+-]\\d{2}\\d{2})$",groups:["year","month","day","offset"]},{expression:"^(\\d{4})-(\\d{2})-(\\d{2})\\s(\\d{2}):(\\d{2}):(\\d{2})$",
groups:"year,month,day,hour,minute,second".split(",")},{expression:"^(\\d{2})\\.(\\d{2})\\.(\\d{4})$",groups:["day","month","year"]},{expression:"^(\\d{2})\\.(\\d{2})\\.(\\d{4})\\s(\\d{2}):(\\d{2})$",groups:["day","month","year","hour","minute"]},{expression:"^(\\d{2})/(\\d{2})/(\\d{4})$",groups:["month","day","year"]}]},convertValue:function(a,b,c){var d=isNaN(parseInt(b,10))?0:parseInt(b,10);switch(a.toLowerCase()){case "year":c.setFullYear(d);break;case "month":c.setMonth(d-1);break;case "day":c.setDate(d);
break;case "hour":c.setHours(d);break;case "minute":c.setMinutes(d);break;case "second":c.setSeconds(d);break;case "offset":a=b?b.replace(/:/,""):"+00:00",c.offset=a.substr(0,3)+":"+a.substr(3,2)}},testFormat:function(a,b){var c=RegExp(a.expression,"ig").exec(b);if(c==null)return null;c.shift();var d=new Date(0),g=this;$j.each(a.groups,function(a,b){g.convertValue(b,c[a],d)});return d},parse:function(a){if(refactored.utils.Object.isEmpty(a))return null;if(refactored.utils.Object.isDate(a))return a;
if(!isNaN(a))return new Date(parseInt(a,10));for(var b=this.formats.length,c=0;c<b;c++){var d=this.testFormat(this.formats[c],a);if(d!=null)return d.originalData=a,d}return null}});namespace("refactored.utils");
refactored.utils.Convert={dateParser:null,toDate:function(a){if(refactored.utils.Convert.dateParser==null)refactored.utils.Convert.dateParser=new refactored.parser.DateParser;return refactored.utils.Convert.dateParser.parse(a)},toString:function(a){return refactored.utils.Object.isString(a)?a:a.toString()},toNumber:function(a){return refactored.utils.Object.isNumber(a)?a:parseFloat(a)},toBoolean:function(a){return a===!0||a==="true"||a==="1"?!0:!1}};namespace("refactored.utils");
refactored.utils.TimeCodeUtil=refactored.Object.extend({},{ELAPSED:"elapsed",ELAPSED_DURATION:"elapsedDuration",ELAPSED_REMAINING:"elapsedRemaining",REMAINING:"remaining",addZero:function(a,b){for(var b=b||2,c=a.toString();c.length<b;)c="0"+c;return c},timecodeToMilliseconds:function(a){var b=0;if(/\d{2}:\d{2}:\d{2}.\d{3}/g.test(a))return a=a.split(/[:.]/),b+=Number(a[0])*36E5,b+=Number(a[1])*6E4,b+=Number(a[2])*1E3,b+=Number(a[3]),b;else{var c=/^(\d{2})\.(\d{2})\.(\d{4})\s(\d{2}):(\d{2})$/g;if(c.test(a))return a=
a.split(" ")[1],a=a.split(":"),b+=Number(a[0])*36E5,b+=Number(a[1])*6E4,b;else if(c=/\d{2}:\d{2}/g,c.test(a))return a=a.split(":"),b+=Number(a[0])*6E4,b+=Number(a[1])*1E3,b}return Number.NaN},secondsToTimecode:function(a,b){return refactored.utils.TimeCodeUtil.millisecondsToTimecode(a*1E3,!0,b,!1)},millisecondsToTimecode:function(a,b,c,d,g){var d=d==void 0?!0:d,c=c||":",g=g||".",f="",h;b==void 0||b?(b=parseInt(a/36E5),a-=b*36E5,h=parseInt(a/6E4),a-=h*6E4,f=f.concat(refactored.utils.TimeCodeUtil.addZero(h+
60*b)),f=f.concat(c)):(b=parseInt(a/36E5),f=f.concat(refactored.utils.TimeCodeUtil.addZero(b)),f=f.concat(c),a-=b*36E5,h=parseInt(a/6E4),f=f.concat(refactored.utils.TimeCodeUtil.addZero(h)),f=f.concat(c),a-=h*6E4);c=parseInt(a/1E3);f=f.concat(refactored.utils.TimeCodeUtil.addZero(c));d&&(a-=c*1E3,f=f.concat(g),f=f.concat(refactored.utils.TimeCodeUtil.addZero(parseInt(a))));return f},prettyFormatTimeCode:function(a,b,c){var b=Math.floor(b==Number.NaN?0:Math.max(0,b)),a=Math.floor(a==Number.NaN?0:Math.max(0,
a)),d="",d=refactored.utils.TimeCodeUtil.secondsToTimecode;switch(c){case refactored.utils.TimeCodeUtil.ELAPSED_DURATION:d=d(a)+"/"+d(b);break;case refactored.utils.TimeCodeUtil.ELAPSED_REMAINING:d=d(a)+"/-"+d(b-a);break;case refactored.utils.TimeCodeUtil.REMAINING:d="-"+d(b-a);break;default:d=d(a)}return d},parseTime:function(a){var b=0,c=a.split(":");if(c.length>1)b=c[0]*3600,b+=c[1]*60,b+=Number(c[2]);else{b=0;switch(a.charAt(a.length-1)){case "h":b=3600;break;case "m":b=60;break;case "s":b=1}b=
b>0?Number(a.substr(0,a.length-1))*b:Number(a)}return b}});namespace("refactored.utils");
refactored.utils.Object={isEmpty:function(a){return typeof a=="undefined"||a===null||a===""||$j.isEmptyObject(a)?!0:!1},isDate:function(a){return a==null||typeof a=="undefined"?!1:typeof a==="date"?!0:typeof a==="object"?a.constructor.toString().match(/date/i)!==null:!1},isNumber:function(a){return a==null||typeof a=="undefined"||isNaN(a)?!1:typeof a==="number"?!0:typeof a==="object"?a.constructor.toString().match(/number/i)!==null:!1},isArray:function(a){return a==null||typeof a=="undefined"?!1:
a.constructor==null||typeof a.constructor=="undefined"?!1:a.constructor.toString().match(/Array/i)!==null},isString:function(a){return a==null||typeof a=="undefined"?!1:typeof a==="string"},clone:function(a){if(!a)return null;var b=null;if(typeof a!="object"||a instanceof Function||a instanceof RegExp||a instanceof Date)b=a;else if(typeof a=="object"&&typeof a.scale!="undefined"&&typeof a.scale=="number"){var c=a.scale,b=new Number(parseFloat(a));b.scale=c}else for(c in b=a instanceof Array?[]:{},
a){var d=a[c];b[c]=typeof d=="object"?refactored.utils.Object.clone(d):d}return b}};namespace("refactored.utils");
refactored.utils.String={padLeft:function(a,b,c){for(;a.length<c;)a=b+a;return a},padRight:function(a,b,c){for(;a.length<c;)a+=b;return a},trimRight:function(a,b){for(typeof b=="undefined"&&(b="\n ");a.length>0&&b.indexOf(a.charAt(a.length-1))>=0;)a=a.substr(0,a.length-1);return a},trimLeft:function(a,b){for(typeof b=="undefined"&&(b="\n ");a.length>0&&b.indexOf(a.charAt(0))>=0;)a=a.substr(1,a.length-1);return a},upperCaseFirst:function(a){return typeof a=="undefined"||a.length==0?a:a=a.charAt(0).toUpperCase()+
a.substr(1,a.length-1)},startsWith:function(a,b){return!a||!b?!1:a.toString().substr(0,b.length)==b},endsWith:function(a,b){return!a||!b?!1:a.toString().substr(a.length-b.length,b.length)==b},reverse:function(a){a=a.toString().split("");a.reverse();return a=a.join("")},replaceVariables:function(a,b,c){for(var b=b||{},c=c||!1,d=a,g=/\{(\w+)\}/g;(part=g.exec(a))!=null;)d=d.replace(part[0],b[part[1]]||(c?part[0]:""));return d},breakString:function(a,b,c){if(typeof text=="undefined")return"undefined";
if(typeof a=="number")return a;var b=b||20,c=c||10,d=$j.browser.msie?"$1&#x200b;":"$1<wbr/>";a.length>=b&&(a=a.substr(0,b-2));a=a.replace(/([\,\-;\u2013]{1})/,d);a=a.replace(RegExp("(\\w{"+c+"})","g"),d);text.length>=b&&(a+="&hellip;");return a},shortenString:function(a,b){if(typeof a=="undefined")return"";if(typeof a=="number")return a;var b=b||20,c=a;c.length>b&&(c=c.substr(0,b-2),c+="&hellip;");return c},htmlEntityDecode:function(a){return $j("<div/>").html(a).text()}};namespace("refactored.utils");
refactored.utils.Array={contains:function(a){for(var b=1;b<arguments.length;b++)if(a.indexOf(arguments[b])<0)return!1;return!0},remove:function(a){for(var b=1;b<arguments.length;b++){var c=a.indexOf(arguments[b]);c>=0&&a.splice(c,1)}},addOnce:function(a){for(var b=1;b<arguments.length;b++)a.indexOf(arguments[b])<0&&a.push(arguments[b])},insert:function(a,b){var c="insert";b>=a.length?c="append":b==0&&(c="prepend");for(var d=2;d<arguments.length;d++)c=="prepend"&&a.unshift(),c=="append"?a.push():a.splice(b,
0,arguments[d])},shuffle:function(a){for(var b,c,d=a.length;d;b=parseInt(Math.random()*d),c=a[--d],a[d]=a[b],a[b]=c);return a},clone:function(a){return a.slice(0,a.length)},isEqual:function(a,b){if(a.length!=b.length)return!1;for(var c=0,d=a.length;c<d;c++)if(b.indexOf(a[c])==-1)return!1;return!0}};namespace("refactored.utils");
refactored.utils.TextMetrics=refactored.Object.extend({},{measureTextByReference:function(a,b){var c=b.clone();c.text(a);c.appendTo("body");c.css("position","absolute");c.css("left",-1E3);c.css("top",-1E3);var d={height:c.height(),width:c.width()};c.remove();return d},measureTextByStyle:function(a,b,c){var d=$j("<div></div>").appendTo("body");b&&d.addClass(b);d.css("position","absolute");d.css("left",-1E3);d.css("top",-1E3);d.html(a);c&&d.width()>c&&(d.css("width",c),d.html(a));a={height:d.height(),
width:d.width()};d.remove();return a}});namespace("refactored.utils");
refactored.utils.Timer=refactored.Object.extend({repeatCount:0,currentCount:0,tickInterval:100,paused:!1,interval:null,constructor:function(a){this.base(Base.apply({className:"refactored.utils.Timer"},a))},cleanInterval:function(){window.clearInterval(this.interval);this.interval=null},startInterval:function(){this.interval=window.setInterval($j.proxy(this.handleTimerTick,this),this.tickInterval)},handleTimerTick:function(){this.currentCount++;this.dispatchEvent(refactored.utils.Timer.TICK,this);
this.repeatCount!=0&&this.currentCount>=this.repeatCount&&(this.dispatchEvent(refactored.utils.Timer.COMPLETE,this),this.cleanInterval())},start:function(){if(this.paused!=!0)this.currentCount=0;this.paused=!1;this.startInterval()},stop:function(){this.cleanInterval();this.paused=!1},pause:function(){this.paused=!0;this.cleanInterval()},reset:function(){this.currentCount=0},isPaused:function(){return this.paused},getCurrentCount:function(){return this.currentCount},isRunning:function(){return this.interval==
null?!1:this.interval!=null&&this.paused==!0?!1:!0},destroy:function(){this.cleanInterval()}},{COMPLETE:"Timer.complete",TICK:"Timer.tick"});namespace("refactored.utils");
refactored.utils.DistributedOperation=refactored.Object.extend({operation:null,data:null,initialOperations:0,perTickOperations:1,perRunGapTicks:0,isRunning:!1,isPaused:!1,currentQueue:null,currentTotalOperations:0,currentProcessedOperations:0,currentTicks:0,currentRun:0,constructor:function(a){this.base(Base.apply({className:"refactored.utils.DistributedOperation"},a));this.handleTickCallback=$j.proxy(this.handleTick,this)},runOperations:function(a){for(var b=0;b<a;){var c=this.currentQueue.shift();
c?(this.operation(c),b++,this.currentProcessedOperations++):b=a}},handleTick:function(){if(this.isRunning&&!this.isPaused)this.currentRun==0&&this.currentTicks==0&&this.initialOperations>0?(this.currentTicks++,this.currentRun++,this.runOperations(this.initialOperations)):this.currentTicks>=this.perRunGapTicks?(this.currentTicks=0,this.currentRun++,this.runOperations(this.perTickOperations)):this.currentTicks++,this.currentQueue.length==0?this.dispatchEvent(refactored.utils.DistributedOperation.COMPLETE):
refactored.ui.UITimer.addCallback(this.handleTickCallback,!0)},start:function(a){if(!this.isRunning){if(a)this.data=a;this.currentQueue=refactored.utils.Array.clone(this.data);this.currentTotalOperations=this.currentQueue.length;this.currentRun=this.currentTicks=this.currentProcessedOperations=0;this.isRunning=!0;this.isPaused=!1;refactored.ui.UITimer.addCallback(this.handleTickCallback,!0);this.dispatchEvent(refactored.utils.DistributedOperation.START)}},pause:function(){if(this.isRunning&&!this.isPaused)this.isPaused=
!0,refactored.ui.UITimer.removeCallback(this.handleTickCallback),this.dispatchEvent(refactored.utils.DistributedOperation.PAUSE)},unpause:function(){if(this.isRunning&&this.isPaused)this.isPaused=!1,refactored.ui.UITimer.addCallback(this.handleTickCallback,!0),this.dispatchEvent(refactored.utils.DistributedOperation.UNPAUSE)},abort:function(){this.isRunning=!1;this.currentQueue=[];refactored.ui.UITimer.removeCallback(this.handleTickCallback);this.dispatchEvent(refactored.utils.DistributedOperation.ABORT)}},
{START:"DistributedOperationStart.refactored",ABORT:"DistributedOperationAbort.refactored",PAUSE:"DistributedOperationPause.refactored",UNPAUSE:"DistributedOperationUnpause.refactored",COMPLETE:"DistributedOperationComplete.refactored"});namespace("refactored.utils");
refactored.utils.Color={hexToRGB:function(a){a=a.replace("#","").replace("0x","");return result={r:parseInt(a.substring(0,2),16),g:parseInt(a.substring(2,4),16),b:parseInt(a.substring(4,6),16)}},hexToRGBA:function(a,b){var c=a.replace("#","").replace("0x","");return result={r:parseInt(c.substring(0,2),16),g:parseInt(c.substring(2,4),16),b:parseInt(c.substring(4,6),16),a:typeof b=="undefined"?1:b}}};namespace("refactored.utils");
refactored.utils.Os={isAndroid:function(){return/Android/i.test(navigator.userAgent)},getAndroidVersion:function(){var a=null;if(this.isAndroid()){var b=a=0,c=0,d=RegExp(/(Android)(\s+)([0-9]).([0-9]).{0,1}([0-9]{0,1});/).exec(navigator.userAgent);d&&d.length>5?(a=String(d[3]),b=String(d[4]),c=String(d[5])||0):d&&d.length>4?(a=String(d[3]),b=String(d[4])):d&&d.length>3&&(a=String(d[3]));a=[a,b,c]}return a},matchesMinAndroidVersion:function(a,b,c){if(isNaN(a)||isNaN(b)||isNaN(c)||this.isAndroid()==
!1)return!1;var d=this.getAndroidVersion(),a=[a,b,c];for(i=0;i<d.length;i++)if(d[i]!=a[i])return d[i]>a[i];return!0}};namespace("refactored.debug");
refactored.debug.Profiler=refactored.Object.extend({className:"refactored.debug.Profiler",items:null,initialize:function(){this.base();this.items={}},start:function(a){typeof this.items[a]=="undefined"&&(this.items[a]={name:a,count:0,time:0,started:[],timeAverage:0,timeMinimum:Number.MAX_VALUE,timeMaximum:Number.MIN_VALUE});this.items[a].started.push((new Date).getTime())},stop:function(a){if(typeof this.items[a]!="undefined"){typeof this.items[a].started.length==0&&console.error("Not started : ",
a);var b=this.items[a].started.pop(),b=(new Date).getTime()-b;this.items[a].count++;this.items[a].time+=b;if(this.items[a].time>0)this.items[a].timeAverage=this.items[a].time/this.items[a].count,this.items[a].timeMinimum=Math.min(this.items[a].timeMinimum,b),this.items[a].timeMaximum=Math.max(this.items[a].timeMaximum,b)}},display:function(){console.table(this.items)}},{instance:null,getInstance:function(){if(!refactored.debug.Profiler.instance)refactored.debug.Profiler.instance=new refactored.debug.Profiler;
return refactored.debug.Profiler.instance}});namespace("refactored.debug");refactored.debug.ProfilerMixin=refactored.Mixin.extend({profileStart:function(a){refactored.debug.Profiler.getInstance().start(a)},profileEnd:function(a){refactored.debug.Profiler.getInstance().stop(a)}});namespace("refactored.geometry");refactored.geometry.HorizontalAlignment=Base.extend({},{LEFT:"left",CENTER:"center",RIGHT:"right"});namespace("refactored.geometry");
refactored.geometry.VerticalAlignment=Base.extend({},{TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"});namespace("refactored.geometry");refactored.geometry.Rectangle=Base.extend({left:0,top:0,width:0,height:0,constructor:function(a){this.base(Base.apply({className:"refactored.geometry.Rectangle"},a))}});namespace("refactored.geometry");refactored.geometry.Point=Base.extend({left:0,top:0,constructor:function(a){this.base(Base.apply({className:"refactored.geometry.Point"},a))}});namespace("refactored.ui");
refactored.ui.UITimer=refactored.Object.extend({},{measureStarted:0,measureTicks:0,limitStarted:0,limitElapsed:25,limitSkips:0,limitFPS:!1,currentFPS:0,_isPaused:!1,_isRunning:!1,callbacks:[],singleCallbacks:[],tick:function(){if(refactored.ui.UITimer._isRunning&&!refactored.ui.UITimer._isPaused){var a=(new Date).getTime(),b=0;if(refactored.ui.UITimer.limitFPS==!0){b=a-refactored.ui.UITimer.limitStarted;if(b<refactored.ui.UITimer.limitElapsed){refactored.ui.UITimer.limitSkips++;requestAnimationFrame(refactored.ui.UITimer.tick);
return}refactored.ui.UITimer.limitStarted=a}b=a-refactored.ui.UITimer.measureStarted;b>=1E3?(refactored.ui.UITimer.currentFPS=Math.round(refactored.ui.UITimer.measureTicks/(b/1E3)),refactored.ui.UITimer.measureStarted=a,refactored.ui.UITimer.measureTicks=1):refactored.ui.UITimer.measureTicks++;for(var a=refactored.ui.UITimer.callbacks.slice(0,refactored.ui.UITimer.callbacks.length),b=a.length,c=0,c=0;c<b;c++)a[c]();a=refactored.ui.UITimer.singleCallbacks.slice(0,refactored.ui.UITimer.singleCallbacks.length);
refactored.ui.UITimer.singleCallbacks=[];b=a.length;for(c=0;c<b;c++)a[c]();requestAnimationFrame(refactored.ui.UITimer.tick)}},start:function(){if(!refactored.ui.UITimer._isRunning||refactored.ui.UITimer._isPaused)refactored.ui.UITimer._isRunning=!0,refactored.ui.UITimer._isPaused=!1,refactored.ui.UITimer.limitStarted=(new Date).getTime(),refactored.ui.UITimer.tick()},stop:function(){if(refactored.ui.UITimer._isRunning)refactored.ui.UITimer._isRunning=!1,refactored.ui.UITimer._isPaused=!1},pause:function(){if(refactored.ui.UITimer._isRunning)refactored.ui.UITimer._isPaused=
!0},isPaused:function(){return refactored.ui.UITimer._isPaused},isRunning:function(){return refactored.ui.UITimer._isRunning},getCurrentFPS:function(){return refactored.ui.UITimer.currentFPS},addCallback:function(a,b){b===!0?refactored.utils.Array.addOnce(refactored.ui.UITimer.singleCallbacks,a):refactored.utils.Array.addOnce(refactored.ui.UITimer.callbacks,a)},removeCallback:function(a){refactored.utils.Array.remove(refactored.ui.UITimer.callbacks,a);refactored.utils.Array.remove(refactored.ui.UITimer.singleCallbacks,
a)}});refactored.ui.UITimer.start();namespace("refactored.ui");
refactored.ui.UIObject=refactored.Object.extend({className:"refactored.ui.UIObject",id:"",name:"",baseTag:"div",baseClass:"uiObject",customClass:"",layoutOptions:null,parent:null,parentElement:null,viewElement:null,childrenElement:null,children:null,isVisible:!0,enabled:!0,isAddedToDOM:!1,autoWidth:!0,autoHeight:!0,width:null,height:null,top:null,left:null,bottom:null,right:null,resizedProxyCallback:null,addResizedCallback:!1,tooltip:null,strategies:null,isHovered:!1,configure:function(a){this.base(a);
if(typeof a.autoWidth=="undefined"&&(this.width!==null||this.left!==null&&this.right!==null))this.autoWidth=!1;if(typeof a.autoHeight=="undefined"&&(this.height!==null||this.top!==null&&this.bottom!==null))this.autoHeight=!1;this.id=this.id!==""?this.id:"uiobject_"+this.objectId},initialize:function(){this.base();if(this.strategies==null)this.strategies=[];this.children=[]},doDestroy:function(){this.parent&&this.parent.removeChild(this);for(this.parent=null;this.children.length>0;)this.children.pop().destroy();
this.children=null;this.viewElement!=null&&$j(this.viewElement).remove();this.parentElement=this.childrenElement=this.viewElement=null},instanciateObjects:function(a,b){if(!b)return a;var c=this,d=[];$j.each(a,function(a,f){if(!(refactored.utils.Object.isEmpty(f)||f.isDestroyed===!0))if(d.push(f),f&&f.parent===null){var h=b;if(typeof f.__addChildToView!=="undefined")h=f.__addChildToView,delete f.__addChildToView;f.parent=c;f.viewElement===null?f.renderTo(h):f.addToDOM(h,c.children.indexOf(f));c.dispatchEvent(refactored.ui.UIObject.ADDED_CHILD,
f)}});return d},updateChildren:function(){if(this.childrenElement)this.children=this.instanciateObjects(this.children,this.childrenElement)},createViewElement:function(){this.viewElement=$j("<"+this.baseTag+"/>",{id:this.id,name:this.name,"class":this.baseClass+" "+this.customClass});this.viewElement.data("UIObject",this)},createChildrenViewElement:function(){this.childrenElement=$j("<div/>",{"class":"childrenContainer"});this.viewElement.append(this.childrenElement)},createElements:function(){refactored.ui.manager.TooltipManager.registerTooltip(this)},
createChildren:function(){},createEventListeners:function(){this.viewElement.bind("mouseenter",$j.proxy(this.handleMouseenter,this));this.viewElement.bind("mouseleave",$j.proxy(this.handleMouseleave,this));this.viewElement.bind("click",$j.proxy(this.handleClick,this))},addToDOM:function(a,b){this.parentElement=a;typeof b=="undefined"?$j(a).append(this.viewElement):b==0?$j(a).prepend(this.viewElement):$j(a).children().length==0?$j(a).append(this.viewElement):this.viewElement.insertAfter($j(a).children()[b-
1]);var c={};if(this.width!==null)c.width=this.width+"px";if(this.height!==null)c.height=this.height+"px";if(this.top!==null)c.top=this.top+"px";if(this.left!==null)c.left=this.left+"px";if(this.bottom!==null)c.bottom=this.bottom+"px";if(this.right!==null)c.right=this.right+"px";this.viewElement.css(c);this.isAddedToDOM=!0;this.dispatchEvent(refactored.ui.UIObject.ADDED_TO_DOM);this.afterMethodCallback("addToDOM")},addResizeProxy:function(){if(this.resizedProxyCallback===null)if(this.resizedProxyCallback===
null&&this.viewElement!==null){var a=this;this.resizedProxyCallback=function(){a.width=a.viewElement.width();a.height=a.viewElement.height();a.dispatchEvent(refactored.ui.UIObject.RESIZED,a)};this.viewElement.resize(this.resizedProxyCallback);this.needsResizeProxy=!1}else this.needsResizeProxy=!0},updateEnabled:function(){},applyStrategies:function(){$j.each(this.strategies,function(a,b){b.execute()})},handleMouseenter:function(){this.dispatchEvent(refactored.ui.UIObject.MOUSE_ENTER)},handleMouseleave:function(){this.dispatchEvent(refactored.ui.UIObject.MOUSE_LEAVE)},
handleClick:function(){this.dispatchEvent(refactored.ui.UIObject.CLICK)},setEnabled:function(a){this.enabled=a;this.updateEnabled()},getEnabled:function(){return this.enabled},addEventListener:function(a,b,c){a==refactored.ui.UIObject.RESIZED&&this.addResizeProxy();this.base(a,b,c)},renderTo:function(a){this.viewElement!=null?this.log("Could not renderTo because viewElement is empty"):(this.profileStart("renderTo"),this.profileStart("renderTo.createViewElement"),this.createViewElement(),this.profileEnd("renderTo.createViewElement"),
this.profileStart("renderTo.createChildrenViewElement"),this.createChildrenViewElement(),this.profileEnd("renderTo.createChildrenViewElement"),this.profileStart("renderTo.createElements"),this.createElements(),this.profileEnd("renderTo.createElements"),this.profileStart("renderTo.createChildren"),this.createChildren(),this.profileEnd("renderTo.createChildren"),this.profileStart("renderTo.createEventListeners"),this.createEventListeners(),this.profileEnd("renderTo.createEventListeners"),this.profileStart("renderTo.addToDOM"),
this.addToDOM(a),this.profileEnd("renderTo.addToDOM"),this.profileStart("renderTo.applyStrategies"),this.applyStrategies(),this.profileEnd("renderTo.applyStrategies"),this.profileStart("renderTo.addResizeProxy"),this.needsResizeProxy&&this.addResizeProxy(),this.profileEnd("renderTo.addResizeProxy"),this.profileEnd("renderTo"),this.dispatchEvent(refactored.ui.UIObject.UI_OBJECT_CREATED))},detach:function(){this.viewElement==null?this.log("Could not detach because viewElement is empty"):(this.viewElement.detach(),
this.isAddedToDOM=!1,this.parentElement=null)},addChild:function(a,b){typeof b!=="undefined"&&(a.__addChildToView=b);this.children.push(a);this.updateChildren()},addChildAt:function(a,b,c){typeof c!=="undefined"&&(a.__addChildToView=c);refactored.utils.Array.insert(this.children,b,a);this.updateChildren()},removeChild:function(a){refactored.utils.Array.remove(this.children,a);a.detach();a.parent=null;this.dispatchEvent(refactored.ui.UIObject.REMOVED_CHILD,a)},removeAllChildren:function(){for(;this.children.length>
0;){var a=this.children.pop();a.detach();a.parent=null;this.dispatchEvent(refactored.ui.UIObject.REMOVED_CHILD,a)}},getChildByIndex:function(a){return this.children[a]||null},getChildByName:function(a,b){var c=null;$j.each(this.children,function(d,g){if(c==null){g.name==a&&(c=g);if(c!=null)return c;b==!0&&g.children.length>0&&(c=g.getChildByName(a,b));if(c!=null)return c}});return c},show:function(a){if(!this.isVisible)if(a==null||a==Number.NaN||a==0)this.viewElement.css({opacity:1,display:"block"}),
this.isVisible=!0,this.dispatchEvent(refactored.ui.UIObject.SHOW);else{var b=this;this.viewElement.fadeIn(a,function(){b.isVisible=!0;b.dispatchEvent(refactored.ui.UIObject.SHOW)})}},hide:function(a){if(this.isVisible)if(a==null||a==Number.NaN||a==0)this.viewElement.css({opacity:0,display:"none"}),this.isVisible=!1,this.dispatchEvent(refactored.ui.UIObject.HIDE);else{var b=this;this.viewElement.fadeOut(a,function(){b.isVisible=!1;b.dispatchEvent(refactored.ui.UIObject.HIDE)})}},getLeft:function(){return!this.isAddedToDOM?
void 0:this.viewElement.position().left},setLeft:function(a){this.left=a;this.isAddedToDOM&&this.viewElement.css("left",a+"px")},getTop:function(){return!this.isAddedToDOM?void 0:this.viewElement.position().top},setTop:function(a){this.top=a;this.isAddedToDOM&&this.viewElement.css("top",a+"px")},getBottom:function(){return!this.isAddedToDOM?void 0:parseInt(this.viewElement.css("bottom"))},setBottom:function(a){this.bottom=a;this.isAddedToDOM&&this.viewElement.css("bottom",a+"px")},getRight:function(){return!this.isAddedToDOM?
void 0:parseInt(this.viewElement.css("right"))},setRight:function(a){this.right=a;this.isAddedToDOM&&this.viewElement.css("right",a+"px")},getAutoWidth:function(){return this.autoWidth},setAutoWidth:function(a){this.autoWidth=a},getAutoHeight:function(){return this.autoHeight},setAutoHeight:function(a){this.autoHeight=a},getWidth:function(){if(this.isAddedToDOM){this.className=="zdfplayer.player.video.ui.control.NativeAlert"&&this.log("trying to get width of ",this,this.viewElement);if(this.width==
null||this.width!=this.viewElement.width()&&!this.viewElement.is(":hidden"))this.width=this.viewElement.width();return this.width}},setWidth:function(a){if(this.isAddedToDOM&&this.width!=a)this.width=a,this.viewElement.width(a),this.dispatchEvent(refactored.ui.UIObject.RESIZED,this)},getHeight:function(){if(this.isAddedToDOM){if(this.height==null||this.height!=this.viewElement.height())this.height=this.viewElement.height();return this.height}},setHeight:function(a){if(this.isAddedToDOM&&this.height!=
a)this.height=a,this.viewElement.height(a),this.dispatchEvent(refactored.ui.UIObject.RESIZED,this)},getRectangle:function(){if(this.isAddedToDOM){var a=this.viewElement.position();return new refactored.geometry.Rectangle({left:a.left,top:a.top,width:this.getWidth(),height:this.getHeight()})}},getChildrenRectangle:function(){if(this.isAddedToDOM)return new refactored.geometry.Rectangle({left:0,top:0,width:this.getWidth(),height:this.getHeight()})},localToGlobal:function(a){if(this.isAddedToDOM){var b=
this.viewElement.offset();return new refactored.geometry.Point({left:b.left-a.left,top:b.top-a.top})}},hover:function(){if(!this.isHovered){var a=this.localToGlobal(new refactored.geometry.Point),b=this.stage.localToGlobal(new refactored.geometry.Point);this.beforeHoveringBackup={parent:this.parent,layoutOptions:this.layoutOptions,left:this.getLeft(),top:this.getTop(),index:this.parent.children.indexOf(this)};this.parent.removeChild(this);this.layoutOptions=null;this.stage.addChild(this);this.setLeft(a.left-
b.left);this.setTop(a.top-b.top);this.isHovered=!0}},unhover:function(){if(this.isHovered)this.stage.removeChild(this),this.layoutOptions=this.beforeHoveringBackup.layoutOptions,this.setLeft(this.beforeHoveringBackup.left),this.setTop(this.beforeHoveringBackup.top),this.beforeHoveringBackup.parent.addChildAt(this,this.beforeHoveringBackup.index),this.isHovered=!1},toString:function(){return this.className+" (#"+this.id+", "+this.name+")"}},{ADDED_TO_DOM:"UIObjectAddedToDOM.refactored",SHOW:"UIObjectShow.refactored",
HIDE:"UIObjectHide.refactored",ADDED_CHILD:"UIObjectAddedChild.refactored",REMOVED_CHILD:"UIObjectRemovedChild.refactored",RESIZED:"UIObjectResized.refactored",MOUSE_ENTER:"UIObjectMouseenter.refactored",MOUSE_LEAVE:"UIObjectMouseleave.refactored",MOUSE_MOVE:"UIObjectMousemove.refactored",CLICK:"UIObjectMouseclick.refactored",UI_OBJECT_CREATED:"UIObjectCreated.refactored"});namespace("refactored.ui.container");
refactored.ui.container.UIContainer=refactored.ui.UIObject.extend({layout:null,backgroundSkin:null,backgroundColor:null,background:null,constructor:function(a){this.base(Base.apply({className:"refactored.ui.container.UIContainer"},a));this.baseClass+=" uiContainer";this.layout&&this.layout.setContainer(this)},createEventListeners:function(){this.base();this.addEventListener(refactored.ui.UIObject.RESIZED,this.handleResize)},createElements:function(){this.base();this.backgroundColor!=null&&this.viewElement.css("background-color",
this.backgroundColor)},createChildrenViewElement:function(){if(this.backgroundSkin!=null)this.background=new refactored.ui.control.UINineScaleCanvas({configuration:this.backgroundSkin,width:this.backgroundSkin?this.backgroundSkin.width:null,height:this.backgroundSkin?this.backgroundSkin.height:null}),this.background.renderTo(this.viewElement);this.base()},handleResize:function(){if(this.background!=null){var a=this.getWidth(),b=this.getHeight();this.background.setWidth(a);this.background.setHeight(b);
this.paint()}},setWidth:function(a){this.base(a);this.background!=null&&this.background.getWidth()!==a&&this.handleResize()},setHeight:function(a){this.base(a);this.background!=null&&this.background.getHeight()!==a&&this.handleResize()},paint:function(){this.background!=null&&refactored.ui.graphic.NineScalePainter.paint(this.background.getContext(),this.backgroundSkin,0,0,this.getWidth(),this.getHeight(),!0);return!0},doLayout:function(){this.layout&&this.layout.update()}});namespace("refactored.ui.container.layout");
refactored.ui.container.layout.UILayout=refactored.Object.extend({container:null,isUpdating:!1,isUpdateRequested:!1,isLocked:!1,doUpdate:function(){},handleChangedChild:function(a,b){if(a.type==refactored.ui.UIObject.ADDED_CHILD&&b){var c=this;b.addEventListener(refactored.ui.UIObject.HIDE,function(){c.requestUpdate()});b.addEventListener(refactored.ui.UIObject.SHOW,function(){c.requestUpdate()})}!this.isLocked&&!this.isUpdateRequested&&this.container&&this.container.isAddedToDOM&&this.requestUpdate()},
update:function(){if(!this.isLocked&&(!this.isUpdating||this.container)&&this.container.isAddedToDOM)this.isUpdating=!0,this.doUpdate(),this.isUpdating=!1},requestUpdate:function(){if(!this.isLocked&&!this.isUpdateRequested&&this.container&&this.container.isAddedToDOM){this.isUpdateRequested=!0;var a=this;setTimeout(function(){a.update();a.isUpdateRequested=!1},16)}},setContainer:function(a){this.container&&(this.container.removeEventListener(refactored.ui.UIObject.ADDED_TO_DOM,this.changedChildHandler),
this.container.removeEventListener(refactored.ui.UIObject.ADDED_CHILD,this.changedChildHandler),this.container.removeEventListener(refactored.ui.UIObject.REMOVED_CHILD,this.changedChildHandler),this.container.removeEventListener(refactored.ui.UIObject.RESIZED,this.changedChildHandler));if(this.container=a)this.container.addEventListener(refactored.ui.UIObject.ADDED_TO_DOM,this.changedChildHandler),this.container.addEventListener(refactored.ui.UIObject.ADDED_CHILD,this.changedChildHandler),this.container.addEventListener(refactored.ui.UIObject.REMOVED_CHILD,
this.changedChildHandler),this.container.addEventListener(refactored.ui.UIObject.RESIZED,this.changedChildHandler)},toString:function(){var a=this.base();this.container&&(a+=" ["+this.container.toString()+"] ");return a}});namespace("refactored.ui.container.layout");
refactored.ui.container.layout.UILayoutAlignment=refactored.Object.extend({},{alignVertical:function(a,b,c){var d=refactored.geometry.Rectangle({width:b.width,height:b.height});if(c==refactored.geometry.VerticalAlignment.TOP)d.top=0;else if(c==refactored.geometry.VerticalAlignment.MIDDLE)d.top=(a.height-b.height)/2;else if(c==refactored.geometry.VerticalAlignment.BOTTOM)d.top=a.height;return d},alignHorizontal:function(a,b,c){var d=refactored.geometry.Rectangle({width:b.width,height:b.height});if(c==
refactored.geometry.HorizontalAlignment.LEFT)d.left=0;else if(c==refactored.geometry.HorizontalAlignment.CENTER)d.left=(a.width-b.width)/2;else if(c==refactored.geometry.HorizontalAlignment.RIGHT)d.left=a.width;return d}});namespace("refactored.ui.container.layout");refactored.ui.container.layout.UILayoutOptions=refactored.Object.extend({includeInLayout:!0,constructor:function(a){this.base(a)}});namespace("refactored.ui.container.layout");
refactored.ui.container.layout.UIBoxLayout=refactored.ui.container.layout.UILayout.extend({direction:"horizontal",gap:0,verticalAlignment:"top",horizontalAlignment:"left",autoSizeContainer:!0,contentSize:null,constructor:function(a){this.base(Base.apply({className:"refactored.ui.container.layout.UIBoxLayout"},a));this.changedChildHandler=$j.proxy(this.handleChangedChild,this)},updateContentSize:function(){this.contentSize=new refactored.geometry.Rectangle({width:0,height:0});var a=0,b=null,c=0,d=
this.container.children.length;this.profileStart("boxlayout.updateContentSize.getSizes");for(c=0;c<d;c++){b=this.container.children[c];if(!b.isAddedToDOM)return;if(b.isVisible)this.direction==refactored.ui.container.layout.UIBoxLayout.VERTICAL?!b.layoutOptions||b.layoutOptions&&b.layoutOptions.percentHeight===null?(this.contentSize.width=Math.max(this.contentSize.width,b.getWidth()),this.contentSize.height+=b.getHeight()):a+=b.layoutOptions.percentHeight:!b.layoutOptions||b.layoutOptions&&b.layoutOptions.percentWidth===
null?(this.contentSize.width+=b.getWidth(),this.contentSize.height=Math.max(this.contentSize.height,b.getHeight())):a+=b.layoutOptions.percentWidth}d>0&&this.gap!=0&&(this.direction==refactored.ui.container.layout.UIBoxLayout.VERTICAL?this.contentSize.height+=this.gap*(d-1):this.contentSize.width+=this.gap*(d-1));this.profileEnd("boxlayout.updateContentSize.getSizes");this.profileStart("boxlayout.updateContentSize.calculateSizes");for(var g=this.container.getChildrenRectangle(),f=0,f=this.direction==
refactored.ui.container.layout.UIBoxLayout.VERTICAL?Math.max(0,g.height-this.contentSize.height):Math.max(0,g.width-this.contentSize.width),c=0,d=this.container.children.length;c<d;c++){b=this.container.children[c];if(!b.isAddedToDOM)return;if(b.isVisible){var h=0;this.direction==refactored.ui.container.layout.UIBoxLayout.VERTICAL?(b.layoutOptions&&b.layoutOptions&&b.layoutOptions.percentHeight!==null&&(b.layoutOptions.top!==null&&b.layoutOptions.top!==void 0&&(h+=b.layoutOptions.top),b.layoutOptions.bottom!==
null&&b.layoutOptions.bottom!==void 0&&(h+=b.layoutOptions.bottom),b.setHeight(b.layoutOptions.percentHeight/a*f-h),this.contentSize.height+=b.getHeight()),b.layoutOptions&&b.layoutOptions&&b.layoutOptions.percentWidth!==null&&(b.layoutOptions.left!==null&&b.layoutOptions.left!==void 0&&(h+=b.layoutOptions.left),b.layoutOptions.right!==null&&b.layoutOptions.right!==void 0&&(h+=b.layoutOptions.right),b.setWidth(b.layoutOptions.percentWidth/100*g.width-h))):(b.layoutOptions&&b.layoutOptions&&b.layoutOptions.percentHeight!==
null&&(b.layoutOptions.top!==null&&b.layoutOptions.top!==void 0&&(h+=b.layoutOptions.top),b.layoutOptions.bottom!==null&&b.layoutOptions.bottom!==void 0&&(h+=b.layoutOptions.bottom),b.setHeight(b.layoutOptions.percentHeight/100*g.height-h)),b.layoutOptions&&b.layoutOptions&&b.layoutOptions.percentWidth!==null&&(b.layoutOptions.left!==null&&b.layoutOptions.left!==void 0&&(h+=b.layoutOptions.left),b.layoutOptions.right!==null&&b.layoutOptions.right!==void 0&&(h+=b.layoutOptions.right),b.setWidth(b.layoutOptions.percentWidth/
a*f-h),this.contentSize.width+=b.getWidth()))}}this.profileEnd("boxlayout.updateContentSize.calculateSizes")},updateAlignment:function(){var a,b,c=this.container.getChildrenRectangle(),d=0,g=0,f=!1,h=new refactored.ui.container.layout.UIBoxLayoutOptions({verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment});this.direction==refactored.ui.container.layout.UIBoxLayout.VERTICAL?(f=this.verticalAlignment==refactored.geometry.VerticalAlignment.BOTTOM,g=refactored.ui.container.layout.UILayoutAlignment.alignVertical(c,
this.contentSize,this.verticalAlignment).top):(f=this.horizontalAlignment==refactored.geometry.HorizontalAlignment.RIGHT,d=refactored.ui.container.layout.UILayoutAlignment.alignHorizontal(c,this.contentSize,this.horizontalAlignment).left);for(var n=0;n<this.container.children.length;n++){var l;l=f?this.container.getChildByIndex(this.container.children.length-(n+1)):this.container.getChildByIndex(n);if(!l.isAddedToDOM)break;if(l.isVisible){var u=l.getRectangle(),t=l.layoutOptions||h;if(t.verticalAlignment===
null)t.verticalAlignment=this.verticalAlignment;if(t.horizontalAlignment===null)t.horizontalAlignment=this.horizontalAlignment;this.direction==refactored.ui.container.layout.UIBoxLayout.VERTICAL?(a=t.left!==void 0?t.left:refactored.ui.container.layout.UILayoutAlignment.alignHorizontal(c,u,t.horizontalAlignment).left,t.horizontalAlignment==refactored.geometry.HorizontalAlignment.RIGHT&&(a-=u.width),f?(g-=u.height,b=g):(b=g,g+=this.gap+u.height)):(b=t.top!==void 0?t.top:refactored.ui.container.layout.UILayoutAlignment.alignVertical(c,
u,t.verticalAlignment).top,t.verticalAlignment==refactored.geometry.VerticalAlignment.BOTTOM&&(b-=u.height),f?(d-=u.width,a=d):(a=d,d+=this.gap+u.width));l.setLeft(a);l.setTop(b)}}},updateContainer:function(){this.autoSizeContainer&&(this.container.getAutoWidth()&&this.container.setWidth(this.contentSize.width),this.container.getAutoHeight()&&this.container.setHeight(this.contentSize.height))},doUpdate:function(){this.profileStart("boxlayout.update");this.profileStart("boxlayout.updateContentSize");
this.updateContentSize();this.profileEnd("boxlayout.updateContentSize");this.profileStart("boxlayout.updateContainer");this.updateContainer();this.profileEnd("boxlayout.updateContainer");this.profileStart("boxlayout.updateAlignment");this.updateAlignment();this.profileEnd("boxlayout.updateAlignment");this.profileEnd("boxlayout.update")}},{HORIZONTAL:"horizontal",VERTICAL:"vertical"});namespace("refactored.ui.container.layout");
refactored.ui.container.layout.UIBoxLayoutOptions=refactored.ui.container.layout.UILayoutOptions.extend({verticalAlignment:null,horizontalAlignment:null,percentWidth:null,percentHeight:null,constructor:function(a){this.base(Base.apply({className:"refactored.ui.container.layout.UIBoxLayoutOptions"},a))}});namespace("refactored.ui.container.layout");
refactored.ui.container.layout.UIAbsoluteLayout=refactored.ui.container.layout.UILayout.extend({verticalAlignment:null,horizontalAlignment:null,constructor:function(a){this.base(Base.apply({className:"refactored.ui.container.layout.UIAbsoluteLayout"},a));this.changedChildHandler=$j.proxy(this.handleChangedChild,this)},updateContentSize:function(){var a=this.container.getChildrenRectangle(),b,c;$j.each(this.container.children,function(d,g){g.isAddedToDOM&&g.layoutOptions&&(g.layoutOptions&&g.layoutOptions.percentHeight!==
null&&(c=g.layoutOptions.percentHeight/100*a.height,g.layoutOptions.top!==null&&g.layoutOptions.top!==void 0&&(c-=g.layoutOptions.top),g.layoutOptions.bottom!==null&&g.layoutOptions.bottom!==void 0&&(c-=g.layoutOptions.bottom),g.setHeight(c)),g.layoutOptions.percentWidth!==null&&(b=g.layoutOptions.percentWidth/100*a.width,g.layoutOptions.left!==null&&g.layoutOptions.left!==void 0&&(b-=g.layoutOptions.left),g.layoutOptions.right!==null&&g.layoutOptions.right!==void 0&&(b-=g.layoutOptions.right),g.setWidth(b)))})},
updateAlignment:function(){for(var a=this.container.getChildrenRectangle(),b=new refactored.ui.container.layout.UIBoxLayoutOptions({verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment}),c=0;c<this.container.children.length;c++){var d=this.container.getChildByIndex(c);if(!d.isAddedToDOM)break;var g=d.layoutOptions||b,f=null,h=null;g.verticalAlignment==refactored.geometry.VerticalAlignment.TOP&&(h=0);g.verticalAlignment==refactored.geometry.VerticalAlignment.MIDDLE&&
(h=Math.round((a.height-d.getHeight())/2));g.verticalAlignment==refactored.geometry.VerticalAlignment.BOTTOM&&(h=Math.round(a.height-d.getHeight()));g.horizontalAlignment==refactored.geometry.HorizontalAlignment.LEFT&&(f=0);g.horizontalAlignment==refactored.geometry.HorizontalAlignment.CENTER&&(f=Math.round((a.width-d.getWidth())/2));g.horizontalAlignment==refactored.geometry.HorizontalAlignment.RIGHT&&(f=Math.round(a.width-d.getWidth()));f!==null&&d.setLeft(f);h!==null&&d.setTop(h)}},doUpdate:function(){this.profileStart("absolutelayout.update");
this.profileStart("absolutelayout.updateContentSize");this.isLocked=!0;this.updateContentSize();this.isLocked=!1;this.profileEnd("absolutelayout.updateContentSize");this.profileStart("absolutelayout.updateAlignment");this.updateAlignment();this.profileEnd("absolutelayout.updateAlignment");this.profileEnd("absolutelayout.update")}});namespace("refactored.ui.container.layout");
refactored.ui.container.layout.UIAbsoluteLayoutOptions=refactored.ui.container.layout.UILayoutOptions.extend({verticalAlignment:null,horizontalAlignment:null,percentWidth:null,percentHeight:null,constructor:function(a){this.base(Base.apply({className:"refactored.ui.container.layout.UIAbsoluteLayoutOptions"},a))}});namespace("refactored.ui.control");
refactored.ui.control.UILabel=refactored.ui.UIObject.extend({text:"",html:!1,font:null,constructor:function(a){this.base(Base.apply({className:"refactored.ui.control.UILabel"},a))},createElements:function(){this.base();this.childrenElement.append(this.text)},addToDOM:function(a){this.base(a);this.font!=void 0&&(this.setFontSize(this.font.size),this.setFontColor(this.font.color),this.setFont(this.font.font))},setFont:function(a){this.font.family=a;this.isAddedToDOM&&this.viewElement.css("font-family",
a)},getFont:function(){return this.font.family},setFontSize:function(a){this.font.size=a;this.isAddedToDOM&&this.viewElement.css("font-size",a+"px")},getFontSize:function(){return this.font.size},setFontColor:function(a){this.font.color=a;this.isAddedToDOM&&this.viewElement.css("color",a)},getFontColor:function(){return this.font.color},setText:function(a){this.text=a;this.html==!0?this.childrenElement.html(a):this.childrenElement.text(a)},getText:function(){return this.text},magnify:function(a){var b=
this.font.defaultSize;b*=a;this.setFontSize(b)}});namespace("refactored.ui.control");
refactored.ui.control.UIButton=refactored.ui.UIObject.extend({text:"",font:null,label:null,labelMode:"centerOverlay",normalSkin:null,hoverSkin:null,disabledSkin:null,enabled:!0,background:null,hovered:!1,constructor:function(a){this.base(Base.apply({className:"refactored.ui.control.UIButton"},a));this.baseClass+=" uiButton";this.baseTag="a";if(this.autoWidth&&this.normalSkin)this.width=this.normalSkin.width;if(this.autoHeight&&this.normalSkin)this.height=this.normalSkin.height},createElements:function(){this.base();
this.background=new refactored.ui.control.UINineScaleCanvas({configuration:this.normalSkin,width:this.normalSkin?this.normalSkin.width:null,height:this.normalSkin?this.normalSkin.height:null});this.background.renderTo(this.viewElement);this.accessabilityName&&this.viewElement.append($j("<span>"+this.accessabilityName+"</span>"));this.label=new refactored.ui.control.UILabel({text:this.text,font:this.font});this.label.renderTo(this.viewElement);this.label.hide()},addToDOM:function(a){this.base(a);this.label.show()},
createEventListeners:function(){this.base();var a=this;this.viewElement.click(function(){a.enabled&&a.doClick()});this.viewElement.mouseover(function(){if(a.enabled)a.hovered=!0,a.paint()});this.viewElement.mouseout(function(){if(a.enabled)a.hovered=!1,a.paint()})},doClick:function(){this.dispatchEvent(refactored.ui.control.UIButton.EXECUTE)},paint:function(){this.label.show();this.hovered?this.background.setConfiguration(this.enabled?this.hoverSkin:this.disabledSkin):this.background.setConfiguration(this.enabled?
this.normalSkin:this.disabledSkin);return!0},updateEnabled:function(){this.viewElement.removeClass("enabled disabled").addClass(this.enabled?"enabled":"disabled");this.paint()},updateSize:function(){if(this.text.length!=0){var a=refactored.utils.TextMetrics.measureTextByReference(this.text,this.label.viewElement);switch(this.labelMode){case refactored.ui.control.UIButton.RIGHT_ASIDE:case "rightAside":this.autoWidth&&(this.setWidth(a.width+this.normalSkin.width+6),this.label.setLeft(this.normalSkin.width+
5));break;case refactored.ui.control.UIButton.LEFT_ASIDE:break;default:this.autoWidth&&this.setWidth(a.width+2*refactored.ui.control.UIButton.DEFAULT_HORIZONTAL_PADDING),this.autoHeight&&this.setHeight(a.height+2*refactored.ui.control.UIButton.DEFAULT_VERTICAL_PADDING+2),this.label.setLeft(refactored.ui.control.UIButton.DEFAULT_HORIZONTAL_PADDING),this.label.setTop(refactored.ui.control.UIButton.DEFAULT_VERTICAL_PADDING)}this.paint()}},afterAddToDOM:function(){this.updateEnabled();this.updateSize()},
doDestroy:function(){this.base();this.label=background=this.disabledSkin=this.hoverSkin=this.normalSkin=null},setWidth:function(a){this.base(a);this.labelMode=="centerOverlay"&&this.background.setWidth(a)},setHeight:function(a){this.base(a);this.background.setHeight(a)},setText:function(a){this.text=a;this.label.setText(a);this.updateSize()},getText:function(){return this.text},magnify:function(a){this.label.magnify(a);this.updateSize()}},{EXECUTE:"execute.Button",DEFAULT_VERTICAL_PADDING:4,DEFAULT_HORIZONTAL_PADDING:8},
{RIGHT_ASIDE:"rightAside ",LEF_ASIDE:"leftAside ",CENTER_OVERLAY:"centerOverlay "});namespace("refactored.ui.control");
refactored.ui.control.UIToggleButton=refactored.ui.control.UIButton.extend({selectedNormalSkin:null,selectedHoverSkin:null,selectedDisabledSkin:null,selected:!1,constructor:function(a){this.base(Base.apply({className:"refactored.ui.control.UIToggleButton"},a));this.baseClass+=" uiToggleButton"},paint:function(){this.selected?this.hovered?this.background.setConfiguration(this.enabled?this.selectedHoverSkin:this.selectedDisabledSkin):this.background.setConfiguration(this.enabled?this.selectedNormalSkin:
this.selectedDisabledSkin):this.hovered?this.background.setConfiguration(this.enabled?this.hoverSkin:this.disabledSkin):this.background.setConfiguration(this.enabled?this.normalSkin:this.disabledSkin);return!0},updateSelected:function(){this.viewElement.removeClass("selected deselected").addClass(this.selected?"selected":"deselected");this.paint()},afterAddToDOM:function(){this.base();this.updateSelected()},doClick:function(){this.setSelected(!this.selected);this.base()},setSelected:function(a){this.selected=
a;this.updateSelected()},getSelected:function(){return this.selected}});namespace("refactored.ui.control");
refactored.ui.control.UIVideo=refactored.ui.UIObject.extend({streamUrl:null,autoPlay:!1,loop:!1,preload:!1,showControls:!1,volume:1,muted:!1,scaleMode:"letterbox",videoElement:null,video:null,_isStopped:!1,storedTime:0,constructor:function(a){this.base(Base.apply({className:"refactored.ui.control.UIVideo"},a));this.baseClass+=" uiVideo"},createElements:function(){this.base();var a="<video";!this.autoWidth&&this.width!==null&&(a+=' width="'+this.width+'"');!this.autoHeight&&this.height!==null&&(a+=
' height="'+this.height+'"');a+="/>";this.videoElement=$j(a);this.video=this.videoElement.get(0);this.video.volume=this.volume;this.video.muted=this.muted;this.updateSettings();if(this.streamUrl!=null&&typeof this.streamUrl!="undefined"&&this.streamUrl!="")this.video.src=this.streamUrl;this.childrenElement.append(this.videoElement)},createEventListeners:function(){this.videoElement.bind("loadeddata",$j.proxy(this.handleMediaDataLoaded,this));this.videoElement.bind("loadedmetadata",$j.proxy(this.handleLoadedMetaData,
this));this.videoElement.bind("loadstart",$j.proxy(this.handleLoadStarted,this));this.videoElement.bind("play",$j.proxy(this.handlePlay,this));this.videoElement.bind("pause",$j.proxy(this.handlePause,this));this.videoElement.bind("progress",$j.proxy(this.handleProgress,this));this.videoElement.bind("volumechange",$j.proxy(this.handleVolumeChanged,this));this.videoElement.bind("timeupdate",$j.proxy(this.handleTimeUpdated,this));this.videoElement.bind("durationchange",$j.proxy(this.handleDurationChanged,
this));this.videoElement.bind("ended",$j.proxy(this.handleVideoEnded,this));this.videoElement.bind("error",$j.proxy(this.handleVideoError,this));this.videoElement.bind("seeking",$j.proxy(this.handleSeeking,this));this.videoElement.bind("seeked",$j.proxy(this.handleSeeked,this));this.videoElement.bind("canplaythrough",$j.proxy(this.handleCanPlayThrough,this));this.videoElement.bind("canplay",$j.proxy(this.handleCanPlay,this));this.videoElement.bind("waiting",$j.proxy(this.handleWaiting,this));this.videoElement.bind("mouseover",
$j.proxy(this.handleMouseover,this));this.videoElement.bind("mouseout",$j.proxy(this.handleMouseout,this));this.videoElement.bind("click",$j.proxy(this.handleClick,this))},updateSettings:function(){this.showControls==!0?this.videoElement.attr("controls","true"):this.videoElement.removeAttr("controls");this.autoPlay==!0?this.videoElement.attr("autoplay","true"):this.videoElement.removeAttr("autoplay");this.loop==!0?this.videoElement.attr("loop","true"):this.videoElement.removeAttr("loop");this.preload==
!0?(this.videoElement.attr("preload","auto"),this.videoElement.attr("autobuffer","true")):(this.videoElement.attr("preload","metadata"),this.videoElement.attr("autobuffer","false"))},applyScaleModeZoom:function(){var a=this.video.videoHeight/this.video.videoWidth,b=this.getWidth(),c=this.getHeight(),d=b,g=b*a;g<c&&(g=c,d=c/a);a=Math.round((b-d)/2);c=Math.round((c-g)/2);this.videoElement.attr("width",d);this.videoElement.attr("height",g);this.videoElement.css({left:a+"px",top:c+"px"})},applyScaleModeNone:function(){var a=
this.video.videoWidth,b=this.video.videoHeight;this.videoElement.attr("width",a);this.videoElement.attr("height",b);var c=this.getWidth(),d=this.getHeight(),a=Math.round((c-a)/2),b=Math.round((d-b)/2);this.videoElement.css({left:a+"px",top:b+"px"})},applyScaleModeStandard:function(){this.videoElement.css({left:"0px",top:"0px"});this.videoElement.attr("width",this.getWidth());this.videoElement.attr("height",this.getHeight())},handleSeeking:function(){this.dispatchEvent(refactored.ui.control.UIVideo.SEEKING)},
handleSeeked:function(){this.dispatchEvent(refactored.ui.control.UIVideo.SEEKED)},handleCanPlayThrough:function(){},handleCanPlay:function(){this.dispatchEvent(refactored.ui.control.UIVideo.CAN_PLAY)},handleWaiting:function(){this.dispatchEvent(refactored.ui.control.UIVideo.WAITING)},handleVideoEnded:function(){this.dispatchEvent(refactored.ui.control.UIVideo.COMPLETE)},handleVideoError:function(a){this.dispatchEvent(refactored.ui.control.UIVideo.ERROR,{error:a.target.error})},handleMediaDataLoaded:function(){this.dispatchEvent(refactored.ui.control.UIVideo.LOAD_FINISHED)},
handleLoadStarted:function(){this.dispatchEvent(refactored.ui.control.UIVideo.LOAD_STARTED)},handleLoadedMetaData:function(){this.autoWidth&&(this.setWidth(this.video.videoWidth),this.videoElement.attr("width",this.video.videoWidth));this.autoHeight&&(this.setHeight(this.video.videoHeight),this.videoElement.attr("height",this.video.videoHeight));this.setScaleMode(this.scaleMode)},handlePlay:function(){this._isStopped=!1;this.dispatchEvent(refactored.ui.control.UIVideo.PLAY)},handlePause:function(){this._isStopped?
this.dispatchEvent(refactored.ui.control.UIVideo.STOP):this.dispatchEvent(refactored.ui.control.UIVideo.PAUSE)},handleProgress:function(){this.dispatchEvent(refactored.ui.control.UIVideo.PROGRESS,this.getReadyState())},handleVolumeChanged:function(){if(this.muted!=this.video.muted)this.muted=this.video.muted,this.dispatchEvent(refactored.ui.control.UIVideo.MUTED);if(this.volume!=this.video.volume)this.volume=this.video.volume,this.dispatchEvent(refactored.ui.control.UIVideo.VOLUME_CHANGE)},handleDurationChanged:function(){this.dispatchEvent(refactored.ui.control.UIVideo.DURATION_CHANGE)},
handleTimeUpdated:function(){this.dispatchEvent(refactored.ui.control.UIVideo.CURRENT_TIME_CHANGE)},handleMouseover:function(){this.dispatchEvent(refactored.ui.control.UIVideo.MOUSE_OVER)},handleMouseout:function(){this.dispatchEvent(refactored.ui.control.UIVideo.MOUSE_OUT)},handleClick:function(){this.dispatchEvent(refactored.ui.control.UIVideo.CLICK)},getVideo:function(){return this.video},setStreamUrl:function(a){this.streamUrl=a;if(this.video&&this.isAddedToDOM)this.video.src=this.streamUrl},
getStreamUrl:function(){return this.streamUrl},getShowControls:function(){return this.showControls},setShowControls:function(a){this.showControls=a;this.video&&this.isAddedToDOM&&this.updateSettings()},getAutoPlay:function(){return this.autoPlay},setAutoPlay:function(a){this.autoPlay=a;this.video&&this.isAddedToDOM&&this.updateSettings()},getLoop:function(){return this.loop},setLoop:function(a){this.loop=a;this.video&&this.isAddedToDOM&&this.updateSettings()},getPreload:function(){return this.preload},
setPreload:function(a){this.preload=a;this.video&&this.isAddedToDOM&&this.updateSettings()},play:function(){if(this.video&&this.isAddedToDOM){var a=this.video.src!=this.streamUrl;if(a||!this.isPlaying()){if(a)this.video.src=this.streamUrl,this.video.load();this.video.play()}}},pause:function(){this.video&&this.isAddedToDOM&&this.isPlaying()&&this.video.pause()},stop:function(){if(this.video&&this.isAddedToDOM&&!this.isStopped())this._isStopped=!0,this.isPaused()?this.handlePause():this.video.pause(),
this.seek(0),this.video.pause()},seek:function(a){this.video&&this.isAddedToDOM&&this.setCurrentTime(a)},isPlaying:function(){return!this.video||!this.isAddedToDOM?!1:!this.video.paused},isPaused:function(){return!this.video||!this.isAddedToDOM?!1:this.video.paused},isStopped:function(){return!this.video||!this.isAddedToDOM?!1:this._isStopped},setMuted:function(a){this.muted=a;if(this.video&&this.isAddedToDOM)this.video.muted=a},getMuted:function(){return!this.video||!this.isAddedToDOM?!1:this.video.muted},
setVolume:function(a){if(this.video&&this.isAddedToDOM)this.video.volume=a},getVolume:function(){return!this.video||!this.isAddedToDOM?0:this.video.volume||0},getDuration:function(){return!this.video||!this.isAddedToDOM?0:this.video.duration||0},getCurrentTime:function(){return!this.video||!this.isAddedToDOM?0:this.video.currentTime||0},setCurrentTime:function(a){if(this.video&&this.isAddedToDOM)try{if(a<=this.video.duration)this.storedTime=this.video.currentTime,this.video.currentTime=a}catch(b){this.log(b.toString())}},
getReadyState:function(){return!this.video||!this.isAddedToDOM?void 0:this.video.readyState||void 0},setScaleMode:function(a){var b=!1;switch(a){case refactored.ui.control.UIVideo.ZOOM:this.applyScaleModeZoom();this.scaleMode=a;b=!0;break;case refactored.ui.control.UIVideo.NONE:this.applyScaleModeNone();this.scaleMode=a;b=!0;break;case refactored.ui.control.UIVideo.LETTERBOX:case refactored.ui.control.UIVideo.STRETCH:this.applyScaleModeStandard(),this.scaleMode=a,b=!0}b&&this.dispatchEvent(refactored.ui.control.UIVideo.SCALE_MODE_CHANGED,
a)},getScaleMode:function(){return this.scaleMode}},{PLAY:"Play.uivideo",PAUSE:"Pause.uivideo",STOP:"Stop.uivideo",MUTED:"Muted.uivideo",VOLUME_CHANGE:"VolumeChange.uivideo",DURATION_CHANGE:"DurationChange.uivideo",CURRENT_TIME_CHANGE:"CurrentTimeChange.uivideo",CAN_PLAY:"CanPlay.uivideo",SEEKED:"Seeked.uivideo",SEEKING:"Seeking.uivideot",COMPLETE:"Complete.uivideo",ERROR:"Error.uivideo",WAITING:"Waiting.uivideo",PROGRESS:"Progress.uivideo",SCALE_MODE_CHANGED:"ScaleModeChanged.uivideo",LOAD_STARTED:"LoadStarted.uivideo",
LOAD_FINISHED:"LoadFinished.uivideo",LETTERBOX:"letterbox",ZOOM:"zoom",NONE:"none",STRETCH:"stretch",MOUSE_OVER:"Mouseover.uiVideo",MOUSE_OUT:"Mouseout.uiVideo",CLICK:"Click.uiVideo"});namespace("refactored.ui.control");
refactored.ui.control.UISlider=refactored.ui.UIObject.extend({controller:null,trackSkin:null,progressTrackSkin:null,thumbUpSkin:null,thumbDownSkin:null,thumbDisabledSkin:null,backgroundColor:null,backgroundAlpha:1,direction:"horizontal",canvas:null,thumbLeft:0,thumbWidth:0,thumbHalfWidth:0,thumbHalfHeight:0,trackWidth:0,trackLeft:0,trackTop:0,position:0,isScrubbing:!1,isHovered:!1,constructor:function(a){this.base(Base.apply({className:"refactored.ui.control.UISlider"},a))},createEventListeners:function(){this.base();
this.addEventListener(refactored.ui.UIObject.RESIZED,$j.proxy(this.handleResize,this));this.viewElement.mousedown($j.proxy(this.handleMouseDown,this));this.viewElement.hover($j.proxy(this.handleMouseOver,this),$j.proxy(this.handleMouseOut,this))},createChildren:function(){this.base();this.canvas=new refactored.ui.control.UICanvas({width:this.getWidth(),height:this.getHeight()});this.addChild(this.canvas)},updatePosition:function(a,b){if(this.direction=="horizontal"){var c=this.getWidth()-this.thumbWidth;
this.position=Math.max(0,Math.min(c,a-this.viewElement.offset().left-this.thumbHalfWidth))/c}else{var c=this.getHeight()-this.thumbWidth,d=Math.max(0,Math.min(c,b-this.viewElement.offset().top-this.thumbWidth));this.position=Math.abs(d-c)/c}this.paint()},paint:function(){if(this.canvas){var a,b=this.trackWidth*this.position;this.direction=="horizontal"?a=(this.getWidth()-this.thumbWidth)*this.position:(b=this.getHeight()-this.thumbWidth,a=b-b*this.position,b=b-a+this.thumbHalfWidth);this.canvas.clear();
this.trackSkin.direction=this.direction;this.progressTrackSkin.direction=this.direction;this.scrubberUpSkin.direction=this.direction;this.scrubberDownSkin.direction=this.direction;this.scrubberDisabledSkin.direction=this.direction;var c=0,c=this.direction=="horizontal"?Math.floor((this.canvas.getHeight()-this.scrubberUpSkin.height)/2):Math.floor((this.canvas.getWidth()-this.scrubberUpSkin.height)/2);this.direction=="horizontal"?refactored.ui.graphic.NineScalePainter.paint(this.canvas.getContext(),
this.trackSkin,this.trackLeft,this.trackTop-c,this.trackWidth,this.trackHeight):refactored.ui.graphic.NineScalePainter.paint(this.canvas.getContext(),this.trackSkin,this.trackLeft,-this.trackTop-c,this.trackWidth,this.trackHeight);this.direction=="horizontal"?refactored.ui.graphic.NineScalePainter.paint(this.canvas.getContext(),this.progressTrackSkin,this.trackLeft,this.trackTop-c,b,this.trackHeight):refactored.ui.graphic.NineScalePainter.paint(this.canvas.getContext(),this.progressTrackSkin,a+1,
-this.trackTop-c,b,this.trackHeight);this.getEnabled()?this.isHovered?refactored.ui.graphic.NineScalePainter.paint(this.canvas.getContext(),this.scrubberDownSkin,a,this.thumbTop-c,this.scrubberUpSkin.width,this.scrubberUpSkin.height):refactored.ui.graphic.NineScalePainter.paint(this.canvas.getContext(),this.scrubberUpSkin,a,this.thumbTop-c,this.scrubberUpSkin.width,this.scrubberUpSkin.height):refactored.ui.graphic.NineScalePainter.paint(this.canvas.getContext(),this.scrubberDisabledSkin,a,this.thumbTop-
c,this.scrubberUpSkin.width,this.scrubberUpSkin.height);return!0}},updateEnabled:function(){this.base();this.paint()},handleResize:function(){var a=this.getWidth(),b=this.getHeight();this.canvas.setWidth(a);this.canvas.setHeight(b);this.thumbWidth=this.scrubberUpSkin.width;this.thumbHeight=this.scrubberUpSkin.height;this.thumbHalfWidth=this.thumbWidth/2;this.thumbHalfHeight=this.thumbHeight/2;this.trackWidth=this.direction=="horizontal"?a-this.thumbWidth:b-this.thumbWidth;this.trackHeight=this.trackSkin.height;
this.trackLeft=Math.round(this.thumbHalfWidth);this.scrubberUpSkin.height>this.trackSkin.height?(this.trackTop=Math.round((this.scrubberUpSkin.height-this.trackSkin.height)/2),this.thumbTop=0):(this.trackTop=0,this.thumbTop=Math.round((this.trackSkin.height-this.scrubberUpSkin.height)/2));this.paint()},handleMouseDown:function(){if(this.getEnabled())this.isScrubbing=!0,$j("body").bind("mousemove",$j.proxy(this.handleMouseMove,this)),$j("body").bind("mouseup",$j.proxy(this.handleMouseUp,this))},handleMouseMove:function(a){this.getEnabled()&&
this.updatePosition(a.clientX,a.clientY)},handleMouseUp:function(a){if(this.getEnabled())$j("body").unbind("mousemove",this.handleMouseMove),$j("body").unbind("mouseup",this.handleMouseUp),this.updatePosition(a.clientX,a.clientY),this.isScrubbing=!1},handleMouseOver:function(){if(this.getEnabled())this.isHovered=!0,this.paint()},handleMouseOut:function(){if(this.getEnabled())this.isHovered=!1,this.paint()}});namespace("refactored.ui.control");
refactored.ui.control.UICanvas=refactored.ui.UIObject.extend({context:null,isUpdateRequested:!1,constructor:function(a){this.base(Base.apply({className:"refactored.ui.control.UICanvas"},a));this.baseClass+=" uiCanvas"},createChildrenViewElement:function(){this.childrenElement=$j("<canvas/>");this.viewElement.append(this.childrenElement)},createEventListeners:function(){this.addEventListener(refactored.ui.UIObject.RESIZED,this.handleResize)},addToDOM:function(a){this.base(a);this.context=this.childrenElement.get(0).getContext("2d");
this.childrenElement.attr("width",this.getWidth());this.childrenElement.attr("height",this.getHeight());this.requestUpdate()},update:function(){},handleResize:function(){parseInt(this.childrenElement.attr("width"))==this.getWidth()&&parseInt(this.childrenElement.attr("height"))==this.getHeight()||(this.childrenElement.attr("width",this.getWidth()),this.childrenElement.attr("height",this.getHeight()),this.requestUpdate())},getContext:function(){return this.context},clear:function(){this.context.clearRect(0,
0,this.context.canvas.width,this.context.canvas.height)},requestUpdate:function(){if(!this.isUpdateRequested){this.isUpdateRequested=!0;var a=this;setTimeout(function(){a.update();a.isUpdateRequested=!1},16)}}});namespace("refactored.ui.control");
refactored.ui.control.UITooltip=refactored.ui.control.UILabel.extend({tooltip:"",settings:null,size:null,constructor:function(a){this.base(Base.apply({className:"refactored.ui.control.UITooltip"},a));this.text=this.tooltip;this.size=refactored.utils.TextMetrics.measureTextByStyle(this.text,"uiTooltip",this.settings.maxWidth)},addToDOM:function(a){this.base(a);this.viewElement.css("border-color",this.settings.borderColor);this.viewElement.css("background-color",this.settings.color);this.viewElement.css("border-style",
"solid");this.viewElement.css("border-width",this.settings.border+"px");this.updateWidth()},updateWidth:function(){this.setWidth(this.size.width)},setText:function(a){this.base(a);this.tooltip=a;this.size=refactored.utils.TextMetrics.measureTextByStyle(a,"uiTooltip",this.settings.maxWidth);this.updateWidth()}});namespace("refactored.ui.control");
refactored.ui.control.UINineScaleCanvas=refactored.ui.control.UICanvas.extend({configuration:null,constructor:function(a){this.base(Base.apply({className:"refactored.ui.control.UINineScaleCanvas"},a));this.baseClass+=" uiNineScaleCanvas"},addToDOM:function(a){this.base(a);this.requestUpdate()},update:function(){this.configuration&&this.isAddedToDOM&&!refactored.utils.Object.isEmpty(this.configuration)&&(this.profileStart("UINineScaleCanvas.update"),refactored.ui.graphic.NineScalePainter.paint(this.context,
this.configuration,0,0,this.getWidth(),this.getHeight(),!0),this.profileEnd("UINineScaleCanvas.update"))},setConfiguration:function(a){this.configuration=a;this.requestUpdate()}});namespace("refactored.ui.control");
refactored.ui.control.UIImage=refactored.ui.UIObject.extend({className:"refactored.ui.control.UIImage",url:"",alt:"",isLoaded:!1,configure:function(a){this.base(a);this.baseClass+=" uiImage"},createChildrenViewElement:function(){var a=this;this.childrenElement=$j("<img/>");this.childrenElement.get(0).onload=function(){a.isLoaded=!0;a.didLoad();a.dispatchEvent(refactored.ui.UIObject.RESIZED)};this.url&&this.childrenElement.attr("src",this.url);this.alt&&this.childrenElement.attr("alt",this.alt);this.viewElement.append(this.childrenElement)},
createEventListeners:function(){this.addEventListener(refactored.ui.UIObject.RESIZED,this.handleResize,this)},addToDOM:function(a){this.base(a);this.handleResize()},didLoad:function(){this.autoWidth&&this.setWidth(parseInt(this.childrenElement.width()));this.autoHeight&&this.setHeight(parseInt(this.childrenElement.height()))},handleResize:function(){this.autoWidth||this.childrenElement.attr("width",this.getWidth());this.autoHeight||this.childrenElement.attr("height",this.getHeight())},setUrl:function(a){this.url=
a;this.isLoaded=!1;this.isAddedToDOM&&this.childrenElement.attr("src",a)},setAlt:function(a){this.alt=a;this.isLoaded=!1;this.isAddedToDOM&&this.childrenElement.attr("alt",a)}},{LOADED:"UIImageLoaded.refactored"});namespace("refactored.ui.graphic");
refactored.ui.graphic.NineScaleConfiguration=refactored.Object.extend({isNineScale:!1,imageKey:null,imageUrl:null,image:null,top:null,left:null,bottom:null,right:null,offsetX:0,offsetY:0,width:0,height:0,direction:"horizontal",innerWidth:0,innerHeight:0,constructor:function(a){this.base(Base.apply({className:"refactored.ui.graphic.NineScaleConfiguration"},a));this.innerWidth=this.width-this.left-this.right;this.innerHeight=this.height-this.bottom-this.top},hasImageUrl:function(){return this.imageUrl!=
null},loadImage:function(){var a=this;this.image=new Image;this.image.onload=function(){a.dispatchEvent(refactored.ui.graphic.NineScaleConfiguration.IMAGE_LOADED)};this.image.src=this.imageUrl},toString:function(){var a=this.base();a+=",top="+this.top;a+=",left="+this.left;a+=",bottom="+this.bottom;a+=",right="+this.right;a+=",width="+this.width;a+=",height="+this.height;a+=",offsetX="+this.offsetX;a+=",offsetY="+this.offsetY;return a}},{IMAGE_LOADED:"NineScaleConfigurationImageLoaded.refactored"});
namespace("refactored.ui.graphic");
refactored.ui.graphic.NineScalePainter=refactored.Object.extend({},{imageCache:[],imageCacheSize:1,paintWithImage:function(a,b,c,d,g,f,h,n){if(a&&b&&c&&!(f==Number.NaN||h==Number.NaN||f==null||h==null||h<1||f<1)){d=d||0;g=g||0;try{if(n===!0&&a.clearRect(0,0,a.canvas.width,a.canvas.height),b.isNineScale){var l=b.left,u=b.right,t=b.top,z=b.bottom,n=0;l+u>f&&(n=(l+u-f)/2,l-=n,u-=n,f-l-u<1&&(u=0),f-l-u<1&&(l=0));t+z>h&&(n=(t+z-f)/2,t-=n,z-=n,h-t-z<1&&(t=0),f-t-z<1&&(z=0));l>0&&(a.drawImage(c,b.offsetX,
b.offsetY,l,t,d,g,l,t),a.drawImage(c,b.offsetX,b.offsetY+t,l,b.innerHeight,d,g+t,l,h-t-z),a.drawImage(c,b.offsetX,b.offsetY+t+b.innerHeight,l,z,d,g+h-z,l,z));a.drawImage(c,b.offsetX+l,b.offsetY,b.innerWidth,t,d+l,g,f-l-u,t);a.drawImage(c,b.offsetX+l,b.offsetY+t,b.innerWidth,b.innerHeight,d+l,g+t,f-l-u,h-t-z);a.drawImage(c,b.offsetX+l,b.offsetY+t+b.innerHeight,b.innerWidth,z,d+l,g+h-z,f-l-u,z);u>0&&u<f&&(a.drawImage(c,b.offsetX+l+b.innerWidth,b.offsetY,u,t,d+f-u,g,u,t),a.drawImage(c,b.offsetX+l+b.innerWidth,
b.offsetY+t,u,b.innerHeight,d+f-u,g+t,u,h-t-z),a.drawImage(c,b.offsetX+l+b.innerWidth,b.offsetY+t+b.innerHeight,u,z,d+f-u,g+h-z,u,z))}else a.drawImage(c,b.offsetX,b.offsetY,b.width,b.height,d,g,f,h)}catch(B){console.log("Painting Error -> "+B.message,b.imageKey,b,d,g,f,h)}}},paint:function(a,b,c,d,g,f,h){if(a&&b&&!(g==Number.NaN||f==Number.NaN)){var n=refactored.ui.graphic.NineScalePainter;a.save();b.direction=="vertical"&&(a.translate(f,0),a.rotate(90*Math.PI/180));b.image!==null?(n.paintWithImage(a,
b,b.image,c,d,g,f,h),a.restore()):typeof n.imageCache[b.imageUrl]!="undefined"&&(n.paintWithImage(a,b,n.imageCache[b.imageUrl],c,d,g,f,h),a.restore())}}});namespace("refactored.ui.control");
refactored.ui.control.ToggleButtonGroup=refactored.Object.extend({name:"",buttons:null,selectedIndex:-1,constructor:function(a){this.base(Base.apply({className:"refactored.ui.control.ToggleButtonGroup"},a));if(this.name=="")this.name="toggleButtonGroup_"+Math.round(Math.random()*1E4);this.buttons=[]},handleToggleButtonClick:function(a){for(i=0;i<this.buttons.length;i++)this.buttons[i]===a.currentTarget?this.selectedIndex=i:this.buttons[i].setSelected(!1);this.dispatchEvent(refactored.ui.control.ToggleButtonGroup.SELECTION_CHANGED,
this)},register:function(a){this.buttons.indexOf(a)==-1&&(this.buttons.push(a),a.addEventListener(refactored.ui.control.UIButton.EXECUTE,$j.proxy(this.handleToggleButtonClick,this)))},getSelectedIndex:function(){return this.selectedIndex},setSelectedIndex:function(a){if(!(a<0||a==this.selectedIndex||a>this.buttons.length)){for(i=0;i<this.buttons.length;i++)this.buttons[i].setSelected(i===a);this.selectedIndex=a;this.dispatchEvent(refactored.ui.control.ToggleButtonGroup.SELECTION_CHANGED,this)}}},
{SELECTION_CHANGED:"ToggleButtonGroup.selectionChanged"});namespace("refactored.ui.strategy");refactored.ui.strategy.UIStrategy=refactored.Object.extend({owner:null,constructor:function(a){this.base(Base.apply({className:"refactored.ui.strategy.UIStrategy"},a))},execute:function(){}});namespace("refactored.ui.manager");
refactored.ui.manager.TooltipManager=Base.extend({currentTarget:null,currentText:null,previousTarget:null,currentTooltip:null,currentTooltipPosition:{left:0,top:0},mouseOnTarget:!1,constructor:function(a){Base.apply(this,a||{})},checkIfTargetChanged:function(a){if(this.mouseOnTarget)this.findTarget(a),this.currentTarget!=this.previousTarget?(this.targetChanged(),this.previousTarget=this.currentTarget):this.currentTooltip&&(this.positionTip(),this.showTip())},findTarget:function(a){for(;a;){this.currentText=
a.tooltip;if(this.currentText!=null){this.currentTarget=a;break}a=a.parent}},targetChanged:function(){this.destroyTip();this.currentTarget&&this.currentText!=""&&this.currentTarget.getEnabled()&&(this.createTip(),this.positionTip(),this.showTip())},createTip:function(){this.currentTooltip=new refactored.ui.manager.TooltipManager.tooltipClass({customClass:" uiTooltip",settings:this.getTooltipSettings(),tooltip:this.currentText,stage:this.currentTarget.stage});this.currentTooltip.renderTo(this.currentTarget.stage.viewElement);
this.hideTip()},getTooltipSettings:function(){var a={};a.color=refactored.ui.manager.TooltipManager.tooltipColor;a.border=refactored.ui.manager.TooltipManager.tooltipBorder;a.borderColor=refactored.ui.manager.TooltipManager.tooltipBorderColor;a.maxWidth=refactored.ui.manager.TooltipManager.maxTooltipWidth;return a},positionTip:function(){if(this.currentTooltipPosition!=void 0){var a=this.currentTooltipPosition,b=this.currentTarget.localToGlobal(new refactored.geometry.Point),c=this.currentTarget.stage.localToGlobal(new refactored.geometry.Point),
d=this.currentTarget.stage.getWidth(),g=this.currentTarget.stage.getHeight(),f=b.left-c.left,b=b.top-c.top,h=this.currentTarget.getWidth(),c=f+a.left+11,a=b+a.top+this.currentTarget.getHeight()+11,n=this.currentTooltip.getWidth();c+n>d&&(c=f+h-n-11);d=this.currentTooltip.getHeight();a+d>g&&(a=b-d-11);this.currentTooltip.setLeft(c);this.currentTooltip.setTop(a)}},showTip:function(){this.mouseOnTarget&&this.currentTooltip.show()},hideTip:function(){this.currentTooltip.hide()},destroyTip:function(){if(this.currentTooltip)this.currentTooltip.detach(),
this.currentTooltip=null},registerTip:function(a){$j(a.viewElement).bind("mouseenter",$j.proxy(this.handleTooltipMouseenter,this));$j(a.viewElement).bind("mouseleave",$j.proxy(this.handleTooltipMouseleave,this))},handleTooltipMouseenter:function(a){var b=this,c,d=refactored.ui.manager.TooltipManager.delay,g=$j(a.currentTarget).data("UIObject");this.mouseOnTarget=!0;handleMousemove=function(a){c={left:a.layerX||a.offsetX||0,top:a.layerY||a.offsetY||0}};$j(g.viewElement).bind("mousemove",handleMousemove);
setTimeout(function(){b.currentTooltipPosition=c;b.checkIfTargetChanged(g);$j(g.viewElement).unbind("mousemove",handleMousemove)},d)},handleTooltipMouseleave:function(){this.mouseOnTarget=!1;this.currentTooltip&&this.destroyTip();this.currentText=this.currentTarget=null}},{instance:null,tooltipClass:null,tooltipColor:"#FFFFCC",tooltipBorder:1,tooltipBorderColor:"#000000",maxTooltipWidth:250,delay:500,registerTooltip:function(a){if(!a.instanceOf(refactored.ui.manager.TooltipManager.tooltipClass)){if(!refactored.ui.manager.TooltipManager.instance)refactored.ui.manager.TooltipManager.instance=
new refactored.ui.manager.TooltipManager;refactored.ui.manager.TooltipManager.instance.registerTip(a)}}});namespace("refactored.loader");
refactored.loader.Loader=refactored.Object.extend({url:"",params:null,data:null,constructor:function(a){this.base(Base.apply({className:"refactored.loader.Loader"},a))},buildURL:function(){if(this.params==null)return this.url;var a=this.url;if(this.url.indexOf("?")==-1){var b=0,c;for(c in this.params)a+=b==0?"?":"&",a+=c+"="+this.params[c],b++}else for(c in this.params)a+="&"+c+"="+this.params[c];return a},load:function(){var a=this,b=this.buildURL();a.log("Load file",b);$j.ajax({url:b,dataType:"xml",
success:function(c){a.data=c;a.log("File",b,"loaded");a.dispatchEvent(refactored.loader.Loader.COMPLETE,c)},error:function(c){a.log("Error while loading file",b,c);a.dispatchEvent(refactored.loader.Loader.ERROR,c)}})}},{COMPLETE:"Loader.complete",ERROR:"Loader.error"});namespace("refactored.loader");
refactored.loader.ImagePreloader=refactored.Object.extend({loading:!1,imagesToLoad:null,urls:null,images:null,numRequests:0,constructor:function(a){this.base(Base.apply({className:"refactored.loader.ImagePreloader"},a));this.images={};this.imagesToLoad={}},handleSingleImageComplete:function(){this.numRequests--;if(this.numRequests==0)this.loading=!1,this.log("Image preloading completed"),this.dispatchEvent(refactored.loader.ImagePreloader.LOADING_COMPLETE)},addImageToLoad:function(a,b){if(this.urls==
null)this.urls={};typeof this.imagesToLoad[a]=="undefined"?(typeof this.urls[b]=="undefined"&&(this.urls[b]=b),this.imagesToLoad[a]=this.urls[b]):this.log("Warning, image "+b+" with "+a+" already exists! ("+this.imagesToLoad[a]+")")},getImageByID:function(a){return this.getImageByURL(this.imagesToLoad[a])},getImageByURL:function(a){return this.isLoading?null:this.images[a]!=null&&typeof this.images[a]!="undefined"?this.images[a]:null},reset:function(){if(loading)this.loading=!1;this.numRequests=0;
this.urls={};this.images={};this.imagesToLoad={}},load:function(){if(this.loading)this.log("Is already loading!");else if(this.urls==null)this.log("No images to load"),this.dispatchEvent(refactored.loader.ImagePreloader.LOADING_COMPLETE);else{this.log("Start image preloading");this.loading=!0;var a,b;for(b in this.urls)if(b!="indexOf"){a=new Image;this.images[b]=a;this.numRequests++;var c=this;$j(a).load(function(){c.handleSingleImageComplete(!0)}).error(function(){c.log("Error while loading image "+
$j(this).attr("src"));c.handleSingleImageComplete(!1)}).attr("src",b)}}}},{LOADING_COMPLETE:"ImagePreloadingComplete.zdfplayer"});namespace("zdfplayer");zdfplayer.Error=refactored.Error.extend({constructor:function(a,b,c,d){this.base(a,b,c,d);this.className="zdfplayer.Error"}},{ERROR_CONFIGURATION:"ERROR_CONFIGURATION",ERROR_TRACKING:"ERROR_TRACKING",ERROR_SEND_MAIL:"ERROR_SEND_MAIL",ERROR_MEDIA_ASSET:"ERROR_MEDIA_ASSET",ERROR_ASSET_LIST:"ERROR_ASSET_LIST",ERROR_EMBEDDING:"ERROR_EMBEDDING"});namespace("zdfplayer");
zdfplayer.Configuration=refactored.Object.extend({configurationUrl:"",specificConfigurationUrl:"",settings:null,media:null,flashEmbedParams:null,teaserImageDefaultKey:"476x268",fullScreenAvailable:!1,configurationXml:null,specificConfigurationXml:null,completeConfigurationXml:null,imageLoader:null,assetConfigurations:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.Configuration",isDebugEnabled:!0},a))},configurationLoaded:function(){this.log("Loading configuration complete");
var a=this;this.specificConfigurationUrl!=""?(this.log("Loading specific configuration from : ",this.specificConfigurationUrl),$j.ajax({url:this.specificConfigurationUrl,dataType:"text",success:function(b){a.specificConfigurationXml=$j.parseXML($j.trim(b));a.loaded()},error:function(){throw new zdfplayer.Error(a,zdfplayer.Error.ERROR_CONFIGURATION,"Specific Configuration could not be loaded");}})):this.loaded()},mergeConfiguration:function(a,b){this.log("Merging configuration for "+a);var c=this;
$j($j("chrome > "+a,c.completeConfigurationXml).get(0)).size()==0&&$j("chrome",c.completeConfigurationXml).append($j("<"+a+"/>"));this.specificConfigurationXml&&$j.each($j("chrome > "+a,this.specificConfigurationXml).children(),function(b,g){var f=$j(g),h=$j($j("chrome > "+a+" > "+f.get(0).tagName,c.completeConfigurationXml).get(0));h.size()>0?h.children().length==0?$j(f.get(0)).children().length>0?(c.log("clone specific configuration "+f.get(0).tagName),f=f.get(0).cloneNode(!0),$j("chrome > "+a,
c.completeConfigurationXml).append(f)):(c.log("Setting existing specific configuration "+f.get(0).tagName+" to "+f.text()),h.text(f.text())):(c.log("clone specific configuration "+f.get(0).tagName),f=f.get(0).cloneNode(!0),$j("chrome > "+a,c.completeConfigurationXml).append(f)):(h=c.configurationXml.createElement(f.get(0).tagName),h.appendChild(c.configurationXml.createTextNode(f.text())),$j("chrome > "+a,c.completeConfigurationXml).append(h))});$j.each(b,function(b,g){var f=$j($j("chrome > "+a+" > "+
b,c.completeConfigurationXml).get(0));if(f.size()>0)if(typeof g=="object")for(var h in g){var n=$j($j(h,f));n.size()>0?n.text(g[h].toString()):(n=$j("<"+h+"/>"),n.text(g[h]),f.append(n))}else f.text(g.toString());else f=c.completeConfigurationXml.createElement(b),f.appendChild(c.completeConfigurationXml.createTextNode(g)),$j("chrome > "+a,c.completeConfigurationXml).append(f)})},loaded:function(){this.completeConfigurationXml=this.configurationXml;this.mergeConfiguration("settings",this.settings);
this.mergeConfiguration("media",this.media);this.isDebugEnabled=this.getSettingById("isDebugEnabled",!1)=="true";this.log("All configurations are loaded.");this.preloadImages();this.determineFullscreenAvailability()},preloadImages:function(){this.log("Preload images");this.imageLoader=new refactored.loader.ImagePreloader({isDebugEnabled:this.isDebugEnabled});var a={},b=this.getConfigurationAsXMLString();for(regex=/(track|face|down|up|disabled|animation)+\s*=\s*[\'|\"](\w+)[\'|\"]/ig;(part=regex.exec(b))!=
null;)a[part[2]]=!0;var c=this,b=$j('chrome > assets > asset[type="bitmapFile"]',this.completeConfigurationXml);this.assetConfigurations={};$j.each(b,function(b,g){var f=$j(g);imageID=f.attr("id");if(a[imageID]){var h={imageKey:imageID,imageUrl:f.parent().attr("baseURL")+f.attr("url"),width:parseInt(f.attr("width"))||0,height:parseInt(f.attr("height"))||0};if(f.attr("scale9")){var n=f.attr("scale9");if(n.search(/(\d{1,4},*){4}/)!=-1)n=n.split(","),h.left=parseInt(n[0]),h.top=parseInt(n[1]),h.right=
parseInt(h.width-h.left-n[2]),h.bottom=parseInt(h.height-h.top-n[3]),h.isNineScale=!0}if(f.attr("offsetX"))h.offsetX=parseInt(f.attr("offsetX"));if(f.attr("offsetY"))h.offsetY=parseInt(f.attr("offsetY"));c.assetConfigurations[imageID]=new refactored.ui.graphic.NineScaleConfiguration(h);c.imageLoader.addImageToLoad(imageID,h.imageUrl)}});this.imageLoader.addEventListener(refactored.loader.ImagePreloader.LOADING_COMPLETE,function(){$j.each(c.assetConfigurations,function(a){c.assetConfigurations[a].image=
c.imageLoader.getImageByID(a)});c.dispatchEvent(zdfplayer.Configuration.LOADED)});this.imageLoader.load()},determineFullscreenAvailability:function(){var a=document.createElement("div"),b={requestFullscreen:{change:"onfullscreenchange",request:"requestFullscreen",error:"onfullscreenerror",enabled:"fullscreenEnabled",cancel:"exitFullscreen",fullScreenElement:"fullscreenElement"},mozRequestFullScreen:{change:"onmozfullscreenchange",request:"mozRequestFullScreen",error:"onmozfullscreenerror",cancel:"mozCancelFullScreen",
enabled:"mozFullScreenEnabled",fullScreenElement:"mozFullScreenElement"},webkitRequestFullScreen:{change:"onwebkitfullscreenchange",request:"webkitRequestFullScreen",cancel:"webkitCancelFullScreen",error:"onwebkitfullscreenerror",fullScreenElement:"webkitCurrentFullScreenElement"}};this.fullScreenAvailable=!1;for(var c in b){if(b.hasOwnProperty(c)&&c in a){this.fullScreenAvailable=b[c];for(var d in this.fullScreenAvailable)!(this.fullScreenAvailable[d]in document)&&!(this.fullScreenAvailable[d]in
a)&&delete this.fullScreenAvailable[d]}if(this.fullScreenAvailable)break}this.fullScreenAvailable=this.fullScreenAvailable!=!1},setMedia:function(a,b){var c=!1;if(b&&b!=this.media.type)this.media.type=b,c=!0;if(a&&a!=this.media.assetID)this.media.assetID=a,c=!0;c===!0&&this.mergeConfiguration("media",this.media)},setSetting:function(a,b){this.settings[a]=b;this.mergeConfiguration("settings",this.settings)},setSource:function(a){if(a&&a!=this.settings.source)this.settings.source=a,this.mergeConfiguration("settings",
this.settings)},getConfigurationAsXMLString:function(){return zdfplayer.utils.XMLUtils.toXMLString(this.completeConfigurationXml)},getFontById:function(a){var b={},a=$j($j('asset[id="'+a+'"]',this.completeConfigurationXml).get(0));b.font=a.attr("fontFamily")||"Verdana";b.size=a.attr("fontSize")||11;b.defaultSize=b.size;b.color=a.attr("color")?a.attr("color").replace("0x","#"):"#000000";return b},getAssetById:function(a){return this.assetConfigurations[a]||{}},getAssetURLById:function(a){a=$j($j('asset[id="'+
a+'"]',this.completeConfigurationXml).get(0));return a.size()>0?a.parent().attr("baseURL")+a.attr("url"):null},getTextById:function(a){var b=$j($j('chrome > dictionary > entry[key="'+a+'"]',this.completeConfigurationXml).get(0));return b.size()>0?b.text():a},getSystemMessageById:function(a,b){var c={};if(a==null||typeof a=="undefined")a="information";c.caption=this.getTextById(a);c.message=this.getTextById(b);if(c.caption.length==0)this.log("Warning: Missing dictionary entry for -> "+a),c.caption=
a;if(c.message.length==0)this.log("Warning: Missing dictionary entry for -> "+b),c.message=b;return c},getServiceUrlById:function(a){var b="",a=$j($j('chrome > services > service[key="'+a+'"][type="'+this.getSettingById("source")+'"]',this.completeConfigurationXml).get(0));a.size()>0&&(b=a.text()+"?"+a.attr("params"));return b},getSettingById:function(a,b){var c=null;b!=null&&typeof b!="undefined"&&(c=b);var d=$j($j("chrome > settings > "+a,this.completeConfigurationXml).get(0));d.size()>0&&(c=d.text());
return c},getIVWTrackingSettings:function(){var a={},b=$j($j("chrome > settings > tracking > ivw",this.completeConfigurationXml));a.source=$j($j("source",b).get(0)).text();a.context=$j($j("context",b).get(0)).text();if(a.source==zdfplayer.player.tracking.IVWTracker.FLASHVARS||a.source==zdfplayer.player.tracking.IVWTracker.MANUAL){var c=$j($j("family",b));if(c.size()>0)a.family=c.text();b=$j($j("count",b));if(b.size()>0)a.count=b.text()}return a},getBeaconTrackingSettings:function(a){function b(b){var c=
[];$j.each(b.children(),function(b,d){var n=$j(d),l={};l.id=n.attr("id");l.track=refactored.utils.Convert.toBoolean(n.attr("track"));l.mappings=[];$j.each(n.children(),function(b,c){var d=$j(c),f={};f.beaconName=d.attr("beaconName");f.prefix=d.attr("prefix")||"";f.delimiter=d.attr("delimiter")||"";f.modelNames=[];$j.each(d.children(),function(b,c){var d=$j(c);d.attr("source")==a&&$j.each(d.children(),function(a,b){var c=$j(b);f.modelNames.push(c.attr("modelName"))})});l.mappings.push(f)});c.push(l)});
return c}var c={};settingXml=$j($j("chrome > settings > tracking > beacon",this.completeConfigurationXml));$j.each($j("chrome > settings > tracking > beacon",this.completeConfigurationXml).children(),function(a,g){var f=$j(g);switch(f.get(0).tagName){case "enabledFlash":c[f.get(0).tagName]=f.text()=="true"?!0:!1;break;case "enabledHTML5":c[f.get(0).tagName]=f.text()=="true"?!0:!1;break;case "events":c[f.get(0).tagName]=b(f);break;case "twentyFourSevenAssets":c[f.get(0).tagName]=String(f.text()).split(",");
break;default:c[f.get(0).tagName]=f.text()}});return c},getMonitoringSettings:function(){var a={},b=$j($j("chrome > settings > monitoring",this.completeConfigurationXml)),c=$j($j("html5",b));a.enabled=$j($j("enabled",b).get(0)).text()=="true"?!0:!1;a.playerId=$j($j("playerID",b).get(0)).text();a.configURL=$j($j("configURL",b).get(0)).text();a.scriptURL=$j($j("scriptURL",c).get(0)).text();return a},getQualityMapping:function(){var a=[];$j.each($j("chrome > settings > qualities",this.completeConfigurationXml).children(),
function(b,c){var d=$j(c),g={};g.quality=d.attr("quality");g.bitrate=d.attr("bitrate");g.fromBitrate=d.attr("fromBitrate");g.toBitrate=d.attr("toBitrate");g.label=d.attr("label");a.push(g)});return a},getMediaSettings:function(){var a={},b=$j("chrome > media",this.completeConfigurationXml),c=$j("assetID",b).text();if(c)a.assetID=c;c=$j("type",b).text();a.type=c?c:"video";if(c=$j("channelID",b).text())a.channelID=c;b=$j("playlist",b).text();a.playlistUrl=b?b:null;return a},getWidgets:function(){return $j("chrome > widgets > widget",
this.completeConfigurationXml)},hasWidgetType:function(a){if(a==null||typeof a=="undefined")return!1;var b=!1;$j.each(this.getWidgets().children(),function(c,d){$j(d).attr("type")==a&&(b=!0)});return b},load:function(){this.log("Loading configuration from : ",this.configurationUrl);var a=this;$j.ajax({url:this.configurationUrl,dataType:"text",success:function(b){a.configurationXml=$j.parseXML($j.trim(b));a.configurationLoaded()},error:function(){throw new zdfplayer.Error(a,zdfplayer.Error.ERROR_CONFIGURATION,
"Configuration could not be loaded");}})}},{LOADED:"ConfigurationLoaded.zdfplayer"});namespace("zdfplayer");zdfplayer.Version=Base.extend({},{VERSION:"1.4.2356"});namespace("zdfplayer.utils");zdfplayer.utils.XMLUtils={toXMLString:function(a){var b=$j(a).xml();if(b=="undefined")try{b=(new XMLSerializer).serializeToString(a)}catch(c){try{b=a.xml}catch(d){b=""}}return b}};namespace("zdfplayer.embed");
zdfplayer.embed.Strategy=refactored.Object.extend({configuration:null,mediaAsset:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.embed.Strategy",isDebugEnabled:!0},a))},execute:function(){}},{COMPLETE:"StrategyComplete.zdfplayer"});namespace("zdfplayer.embed");
zdfplayer.embed.DefaultStrategy=zdfplayer.embed.Strategy.extend({constructor:function(a){this.base(Base.apply({className:"zdfplayer.embed.Strategy"},a))},error:function(a){this.dispatchEvent(zdfplayer.embed.Strategy.COMPLETE,{builderClass:null,reason:a})},useFlash:function(){this.dispatchEvent(zdfplayer.embed.Strategy.COMPLETE,{builderClass:zdfplayer.player.flash.FlashBuilder})},useVideo:function(){if(this.mediaAsset.isProcessed())this.dispatchEvent(zdfplayer.embed.Strategy.COMPLETE,{builderClass:zdfplayer.player.video.VideoBuilder});
else{var a=this;this.mediaAsset.addEventListener(zdfplayer.media.Asset.READY,function(){a.dispatchEvent(zdfplayer.embed.Strategy.COMPLETE,{builderClass:zdfplayer.player.video.VideoBuilder})});this.mediaAsset.doProcess()}},execute:function(){var a=this.configuration.getSettingById("embedTypes","flash,html5").replace(/\s/g,"").split(","),b=refactored.utils.Array.contains(a,"flash")&&swfobject.hasFlashPlayerVersion("10.2.0")===!0,c=b&&a[0]=="flash",d=refactored.utils.Array.contains(a,"html5")&&ModernizrCustom.video!==
null,a=null,g;if(d){if(a==null&&ModernizrCustom.video.h264!="")this.mediaAsset.supportsFormat(zdfplayer.media.Asset.FORMAT_H264,zdfplayer.media.Asset.FACET_PROGRESSIVE)?a=zdfplayer.media.Asset.FORMAT_H264:g="missingVideo";if(a==null&&ModernizrCustom.video.webm!="")this.mediaAsset.supportsFormat(zdfplayer.media.Asset.FORMAT_WEBM,zdfplayer.media.Asset.FACET_PROGRESSIVE)?a=zdfplayer.media.Asset.FORMAT_WEBM:g="missingVideo";if(a==null&&ModernizrCustom.audio.mp3!="")this.mediaAsset.supportsFormat(zdfplayer.media.Asset.FORMAT_MP3,
null)?a=zdfplayer.media.Asset.FORMAT_MP3:g="missingVideo";if(a==null){var f=/iPhone|iPod|iPad/i.test(navigator.platform),d=this.configuration.getSettingById("iOSNativeMode",!0);if(f&&d&&this.mediaAsset.supportsFormat(zdfplayer.media.Asset.FORMAT_M3U8))a=zdfplayer.media.Asset.FORMAT_M3U8}if(a==null){var h=refactored.utils.Os.isAndroid(),d=this.configuration.getSettingById("androidMinUseEmbedVersion").split("."),n=this.configuration.getSettingById("androidMinUseDevicePlayerVersion").split(".");if(!a&&
h)if(refactored.utils.Os.matchesMinAndroidVersion(d[0],d[1],d[2])&&this.mediaAsset.supportsFormat(zdfplayer.media.Asset.FORMAT_M3U8))a=zdfplayer.media.Asset.FORMAT_M3U8;else if(refactored.utils.Os.matchesMinAndroidVersion(n[0],n[1],n[2])&&this.mediaAsset.supportsFormat(zdfplayer.media.Asset.FORMAT_H264_RTSP))a=zdfplayer.media.Asset.FORMAT_H264_RTSP}d=a!=null}else g="compatibilityError";this.log("Support Summary : Flash = ",b,", Flash first = ",c,", Video = ",d,", Video Format = ",a," HTML5 Canvas = ",
ModernizrCustom.canvas);if(!b&&!d)this.log("Flash and Video are not supported."),this.error(g);else if(b&&c)this.log("Flash supported and should be used first."),this.useFlash();else if(this.mediaAsset.isLive)d&&f&&a==zdfplayer.media.Asset.FORMAT_M3U8?(this.log("Using Livestreaming for iOS Devices with m3u8 Format"),this.useVideo()):d&&h&&(a==zdfplayer.media.Asset.FORMAT_M3U8||a==zdfplayer.media.Asset.FORMAT_H264_RTSP)?(this.log("Using Livestreaming for Android Devices with m3u8 or h264 rtsp Format"),
this.useVideo()):b?(this.log("Using flash because media is live."),this.useFlash()):(this.log("Flash is not supported but media is live."),this.error("compatibilityError"));else{if(d)if(this.log("Video supported."),ModernizrCustom.canvas==!0){this.log("HTML5 Canvas supported.");this.useVideo();return}else this.log("HTML5 Canvas not supported.");b?(this.log("Flash supported."),this.useFlash()):this.error("commonError")}}});namespace("zdfplayer.media");
zdfplayer.media.Asset=refactored.Object.extend({configuration:null,isLive:!1,isError:!1,constructor:function(a){this.base(Base.apply({className:"zdfplayer.media.Asset"},a))},getTeaserImageByFormat:function(){return null},getTeaserImageAltByFormat:function(){return null},supportsFormat:function(a,b){return this.getStreamsByFormat(a,b)!==null},getStreamsByFormat:function(){return null},getStreamByFormatAndQuality:function(a,b,c){return this.getStreamsByFormat(a,b)[c]||null},getStreamByFormatAndBitrate:function(a,
b,c){var a=this.getStreamsByFormat(a,b)||null,d;for(d in a)if(a[d].videoBitrate==c)return a[d];return null},getDownloadURLs:function(){return[]},getCuepoints:function(){return null},load:function(){}},{READY:"MediaAssetReady.zdfplayer",DATA_LOADED:"MediaAssetDataLoaded.zdfplayer",ERROR:"MediaAssetError.zdfplayer",FORMAT_OGG:"OGG",FORMAT_WEBM:"WEBM",FORMAT_H264:"H264",FORMAT_H264_RTSP:"H264_RTSP",FORMAT_SMIL:"SMIL",FORMAT_M3U8:"M3U8",FORMAT_FLV:"FLV",FORMAT_MP3:"MP3",FACET_PROGRESSIVE:"progressive"});
namespace("zdfplayer");
zdfplayer.media.MediathekAsset=zdfplayer.media.Asset.extend({id:"",title:"",length:"",description:"",airTime:null,timeToLive:null,channelTitle:"",channelName:"",articleXml:null,vcmsURL:"",hasCaption:!1,captionURL:null,captionOffset:0,captionDocument:null,cuepoints:null,lengthSec:0,programProdNumber:"",articleProdNumber:"",basename:"",geolocation:"",recommendationXML:null,recommendations:null,immediateProcess:!0,processed:!1,constructor:function(a){this.base(Base.apply({className:"zdfplayer.media.MediathekAsset"},a))},
articleLoaded:function(){this.isLive=$j("video > type",this.articleXml).text().indexOf("live")!=-1;this.dispatchEvent(zdfplayer.media.Asset.DATA_LOADED);this.immediateProcess&&this.doProcess()},articleError:function(a,b){this.isError=!0;this.log("Mediaasset error",a,b);this.dispatchEvent(zdfplayer.media.Asset.ERROR,{statusCode:a,debugInfo:b})},parseCuepoints:function(){this.cuepoints=[];var a=$j("video > cuepoints > value",this.articleXml);if(a.size()>0){var b,c=this;$j.each(a,function(a,g){b={};
b.time=refactored.utils.TimeCodeUtil.timecodeToMilliseconds($j(g).attr("key"));b.text=$j(g).text();c.cuepoints.push(b)})}},ready:function(){this.log("Media Asset ready");this.dispatchEvent(zdfplayer.media.Asset.READY)},mapFormatToType:function(a){var b="";switch(a){case zdfplayer.media.Asset.FORMAT_H264:b="h264_aac_mp4_http_na_na";break;case zdfplayer.media.Asset.FORMAT_H264_RTSP:b="h264_aac_3gp_rtsp_na_na";break;case zdfplayer.media.Asset.FORMAT_WEBM:b="vp8_vorbis_webm_http_na_na";break;case zdfplayer.media.Asset.FORMAT_SMIL:b=
"h264_aac_mp4_rtmp_smil_http";break;case zdfplayer.media.Asset.FORMAT_M3U8:b="h264_aac_ts_http_m3u8_http";break;case zdfplayer.media.Asset.FORMAT_FLV:b="h264_aac_ts_http_flv_http";break;case zdfplayer.media.Asset.FORMAT_MP3:b="na_mp3_mpeg_http_na_na"}return b},loadCaption:function(){if(this.captionURL==null||this.captionURL.length==0)this.ready();else{var a=new refactored.loader.Loader({url:this.captionURL,isDebugEnabled:this.isDebugEnabled});this.log("Load caption file");var b=this;a.addEventListener(refactored.loader.Loader.COMPLETE,
function(a,d){var g=new zdfplayer.player.video.caption.DFXPParser({offset:b.captionOffset,isDebugEnabled:this.isDebugEnabled});b.captionDocument=g.parse(d);b.ready()});a.addEventListener(refactored.loader.Loader.ERROR,function(a,d){this.log("An error occurred while loading the caption file: "+b.captionURL+" ("+d.statusMessage+")");b.ready()});a.load()}},getRecommendations:function(a,b){if(this.recommendations!=null)a.call(this,this.recommendations);else{var c=this.configuration.getServiceUrlById("recommend");
if(c==null||c.length==0)b.call("missing url");else{var c=new refactored.loader.Loader({url:c,params:{id:this.id,kanalId:this.channelID}}),d=this;c.addEventListener(refactored.loader.Loader.COMPLETE,function(b,c){d.recommendations=[];var h=$j("teaserlist > teasers > teaser",c);if(h.size()>0){var n;$j.each(h,function(a,b){n={xml:c,id:$j("details > assetId",b).text(),description:$j("information > detail",b).text(),title:$j("information > title",b).text()};d.recommendations.push(n)});a.call(d,d.recommendations)}});
c.addEventListener(refactored.loader.Loader.ERROR,function(){b.call(d,"")});c.load()}}},getArticleXML:function(){return zdfplayer.utils.XMLUtils.toXMLString(this.articleXml)},getTeaserImageByFormat:function(a){var b=null,a=$j('video > teaserimages > teaserimage[key="'+a+'"]',this.articleXml);a.size()>0&&(b=a.text());return b},getTeaserImageAltByFormat:function(a){var b=null,a=$j('video > teaserimages > teaserimage[key="'+a+'"]',this.articleXml);a.size()>0&&(b=a.attr("alt"));return b},getStreamsByFormat:function(a,
b){var c=null,d=this.mapFormatToType(a),d=$j('video > formitaeten > formitaet[basetype="'+d+'"]',this.articleXml);d.size()>0&&$j.each(d,function(a,d){if(b!=null&&typeof b!="undefined"){var h=$j("facets > facet",d);h.size()!=0&&$j.each(h,function(a,g){$j(g).text()==b&&(c==null&&(c={}),c[$j("quality",d).text()]={url:$j("url",d).text(),quality:$j("quality",d).text(),width:parseInt($j("width",d).text()),height:parseInt($j("height",d).text()),videoBitrate:parseInt($j("videoBitrate",d).text()),audioBitrate:parseInt($j("audioBitrate",
d).text())})})}else c==null&&(c={}),c[$j("quality",d).text()]={url:$j("url",d).text(),quality:$j("quality",d).text(),width:parseInt($j("width",d).text()),height:parseInt($j("height",d).text()),videoBitrate:parseInt($j("videoBitrate",d).text()),audioBitrate:parseInt($j("audioBitrate",d).text())}});return c},getCuepoints:function(){return this.cuepoints},getDownloadURLs:function(){var a=$j('video > formitaeten > formitaet[isDownload="true"]',this.articleXml),b=[],c,d,g=/http:\/\/[-a-zA-Z0-9@:%_+.~#?&//=]+.(wmv|mp4)/i;
a.size()>0&&$j.each(a,function(a,h){c=$j("url",h).text();d=$j("facets > facet",h).size()>0;g.test(c)&&d==!1&&b.push({url:c,quality:$j("quality",h).text(),width:parseInt($j("width",h).text())})});return b},getTrackingPixel:function(a,b){var c=this.configuration.getIVWTrackingSettings();switch(c.source){case zdfplayer.player.tracking.IVWTracker.MEDIATHEK:if(this.id.length==0){this.log("Cannot invoke ivw tracking due to missing assetID");break}var d=this.configuration.getServiceUrlById("tracking");if(d.length==
0){this.log("Cannot invoke ivw tracking due to missing service url");break}var g={};g.beitragsId=this.id;g.embeddedEdition=c.context||zdfplayer.player.tracking.IVWTracker.INTERN;$j.ajax({url:d,data:g,dataType:"text",success:function(c){responseXML=$j.parseXML($j.trim(c));$j($j("response > status > statuscode",responseXML).get(0)).text()=="ok"?(c={family:$j($j('response > ivwUrls > value[key="family"]',responseXML).get(0)).text(),count:$j($j('response > ivwUrls > value[key="count"]',responseXML).get(0)).text()},
a.call(this,c)):b.call(this,$j($j("response > status > debuginfo",responseXML).get(0)).text())},error:function(){b.call(this,"Tracking Pixel could not be determined!")}});break;case zdfplayer.player.tracking.IVWTracker.FLASHVARS:case zdfplayer.player.tracking.IVWTracker.MANUAL:a.call(this,{family:c.family,count:c.count});break;default:b.call(this,"Cannot invoke ivw tracking due to invalid tracking source: "+c.source)}},load:function(){var a=this.configuration.getServiceUrlById("article")+"&id="+this.configuration.getMediaSettings().assetID,
b=this;$j.ajax({url:a,dataType:"text",success:function(a){b.articleXml=$j.parseXML($j.trim(a));a=$j($j("response > status > statuscode",b.articleXml).get(0)).text();if(a=="ok")b.articleLoaded();else{var d=$j($j("response > status > debuginfo",b.articleXml).get(0)).text();b.articleError(a,d)}},error:function(a,d){b.articleError("ajaxError",a.statusText||d)}})},isProcessed:function(){return this.processed},doProcess:function(){this.processed?this.log("Media asset already processed"):(this.processed=
!0,this.id=$j("video > details > assetId",this.articleXml).text(),this.title=$j("video > information > title",this.articleXml).text(),this.description=$j("video > information > detail",this.articleXml).text(),this.length=$j("video > details > length",this.articleXml).text(),this.channelTitle=$j("video > details > originChannelTitle",this.articleXml).text(),this.channelID=$j("video > details > originChannelId",this.articleXml).text(),this.channelName=$j("video > details > channel",this.articleXml).text(),
this.airTime=refactored.utils.Convert.toDate($j("video > details > airtime",this.articleXml).text()),this.timeToLive=refactored.utils.Convert.toDate($j("video > details > timetolive",this.articleXml).text()),this.vcmsURL=$j("video > details > vcmsUrl",this.articleXml).text(),this.hasCaption=$j("video > details > hasCaption",this.articleXml).text()=="true",this.lengthSec=$j("video > details > lengthSec",this.articleXml).text(),this.programProdNumber=$j("video > details > programProdNumber",this.articleXml).text(),
this.articleProdNumber=$j("video > details > articleProdNumber",this.articleXml).text(),this.basename=$j("video > details > basename",this.articleXml).text(),this.geolocation=$j("video > details > geolocation",this.articleXml).text(),this.parseCuepoints(),this.hasCaption==!0&&this.configuration.hasWidgetType("caption")?(this.log("Asset has caption and configuration has caption widget"),this.captionURL=$j("video > caption > url",this.articleXml).text(),this.captionOffset=$j("video > caption > offset",
this.articleXml).text(),this.loadCaption()):this.ready())}});namespace("zdfplayer");
zdfplayer.media.TiviAsset=zdfplayer.media.Asset.extend({id:"",title:"",description:"",airTime:null,timeToLive:null,channelTitle:"",articleXml:null,articleWithNameSpacesXml:null,vcmsURL:"",hasCaption:!1,captionURL:null,captionOffset:0,captionDocument:null,cuepoints:null,recommendationXML:null,recommendations:null,immediateProcess:!0,processed:!1,trackingPixel:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.media.TiviAsset"},a))},articleLoaded:function(){this.isLive=$j("embedded-video > type",
this.articleXml).text().indexOf("livevideo")!=-1;this.dispatchEvent(zdfplayer.media.Asset.DATA_LOADED);this.immediateProcess&&this.doProcess()},articleError:function(a,b){this.isError=!0;this.log("Mediaasset error",a,b);this.dispatchEvent(zdfplayer.media.Asset.ERROR,{statusCode:a,debugInfo:b})},ready:function(){this.log("Media Asset ready");this.dispatchEvent(zdfplayer.media.Asset.READY)},mapFormatToType:function(a){var b="";switch(a){case zdfplayer.media.Asset.FORMAT_H264:b="h264_aac_mp4_http_na_na";
break;case zdfplayer.media.Asset.FORMAT_H264_RTSP:b="h264_aac_3gp_rtsp_na_na";break;case zdfplayer.media.Asset.FORMAT_WEBM:b="vp8_vorbis_webm_http_na_na";break;case zdfplayer.media.Asset.FORMAT_SMIL:b="h264_aac_mp4_rtmp_smil_http";break;case zdfplayer.media.Asset.FORMAT_M3U8:b="h264_aac_ts_http_m3u8_http";break;case zdfplayer.media.Asset.FORMAT_FLV:b="h264_aac_ts_http_flv_http";break;case zdfplayer.media.Asset.FORMAT_MP3:b="na_mp3_mpeg_http_na_na"}return b},getRecommendations:function(a,b){if(this.recommendations!=
null)a.call(this,this.recommendations);else{var c=this.configuration.getServiceUrlById("recommend");if(c==null||c.length==0)b.call("missing url");else{var c=new refactored.loader.Loader({url:c,params:{id:this.id,kanalId:this.channelID}}),d=this;c.addEventListener(refactored.loader.Loader.COMPLETE,function(b,c){d.recommendations=[];var h=$j("teaserlist > teasers > teaser",c);if(h.size()>0){var n;$j.each(h,function(a,b){n={xml:c,id:$j("details > assetId",b).text(),description:$j("information > detail",
b).text(),title:$j("information > title",b).text()};d.recommendations.push(n)});a.call(d,d.recommendations)}});c.addEventListener(refactored.loader.Loader.ERROR,function(){b.call(d,"")});c.load()}}},getArticleXML:function(){return this.articleWithNameSpacesXml},getTeaserImageByFormat:function(a){var b=null,a=$j('embedded-video > teaser-images > image[key="'+a+'"]',this.articleXml);a.size()>0&&(b=a.text());return b},getStreamsByFormat:function(a,b){var c=null,d=this.mapFormatToType(a),d=$j('embedded-video > formitaeten > formitaet[basetype="'+
d+'"]',this.articleXml);d.size()>0&&$j.each(d,function(a,d){if(b!=null&&typeof b!="undefined"){var h=$j("facets > facet",d);h.size()!=0&&$j.each(h,function(a,g){$j(g).text()==b&&(c==null&&(c={}),c[$j("quality",d).text()]={url:$j("url",d).text(),quality:$j("quality",d).text(),width:parseInt($j("width",d).text()),height:parseInt($j("height",d).text()),videoBitrate:parseInt($j("videoBitrate",d).text()),audioBitrate:parseInt($j("audioBitrate",d).text())})})}else c==null&&(c={}),c[$j("quality",d).text()]=
{url:$j("url",d).text(),quality:$j("quality",d).text(),width:parseInt($j("width",d).text()),height:parseInt($j("height",d).text()),videoBitrate:parseInt($j("videoBitrate",d).text()),audioBitrate:parseInt($j("audioBitrate",d).text())}});return c},getDownloadURLs:function(){var a=$j('embedded-video > formitaeten > formitaet[isDownload="true"]',this.articleXml),b=[],c,d,g=/http:\/\/[-a-zA-Z0-9@:%_+.~#?&//=]+.(wmv|mp4)/i;a.size()>0&&$j.each(a,function(a,h){c=$j("url",h).text();d=$j("facets > facet",h).size()>
0;g.test(c)&&d==!1&&b.push({url:c,quality:$j("quality",h).text(),width:parseInt($j("width",h).text())})});return b},getTrackingPixel:function(a,b){var c=this.configuration.getIVWTrackingSettings();switch(c.source){case zdfplayer.player.tracking.IVWTracker.TIVI:a.call(this,{family:this.trackingPixel.familyPixel,count:this.trackingPixel.countPixel});break;case zdfplayer.player.tracking.IVWTracker.MEDIATHEK:if(this.id.length==0){this.log("Cannot invoke ivw tracking due to missing assetID");break}var d=
this.configuration.getServiceUrlById("tracking");if(d.length==0){this.log("Cannot invoke ivw tracking due to missing service url");break}var g={};g.beitragsId=this.id;g.embeddedEdition=c.context||zdfplayer.player.tracking.IVWTracker.INTERN;$j.ajax({url:d,data:g,dataType:"text",success:function(c){responseXML=$j.parseXML($j.trim(c));$j($j("response > status > statuscode",responseXML).get(0)).text()=="ok"?(c={family:$j($j('response > ivwUrls > value[key="family"]',responseXML).get(0)).text(),count:$j($j('response > ivwUrls > value[key="count"]',
responseXML).get(0)).text()},a.call(this,c)):b.call(this,$j($j("response > status > debuginfo",responseXML).get(0)).text())},error:function(){b.call(this,"Tracking Pixel could not be determined!")}});break;case zdfplayer.player.tracking.IVWTracker.FLASHVARS:case zdfplayer.player.tracking.IVWTracker.MANUAL:a.call(this,{family:c.family,count:c.count});break;default:b.call(this,"Cannot invoke ivw tracking due to invalid tracking source: "+c.source)}},load:function(){var a=this.configuration.getServiceUrlById("article"),
a=a.replace("?",this.configuration.getMediaSettings().assetID+"?"),b=this;$j.ajax({url:a,dataType:"text",success:function(a){a=$j.trim(a);b.articleWithNameSpacesXml=a;var d=a.match(RegExp("xmlns:[\\S]+=","gim"));$j.each(d,function(b,d){d=d.replace(/xmlns:/i,"");d=d.replace(/=/,"")+":";a=a.replace(RegExp(d,"gim"),"")});b.articleXml=$j.parseXML($j.trim(a));d=$j($j("embedded-video-page > status",b.articleXml).get(0)).text();d=="ok"?b.articleLoaded():b.articleError(d,"")},error:function(a,d){b.articleError("ajaxError",
a.statusText||d)}})},isProcessed:function(){return this.processed},doProcess:function(){this.processed?this.log("Media asset already processed"):(this.processed=!0,this.id="",this.title=$j("embedded-video > information > headline > subtitle",this.articleXml).text(),this.description=$j("embedded-video > information > text",this.articleXml).text(),this.channelTitle=$j("embedded-video > information > headline > title",this.articleXml).text(),this.channelID="",this.airTime=refactored.utils.Convert.toDate($j("embedded-video > information > broadcastInfo > airTime",
this.articleXml).text()),this.timeToLive=null,this.vcmsURL="",this.hasCaption=!1,this.trackingPixel={},this.trackingPixel.familyPixel=$j("embedded-video > ivw > family",this.articleXml).text(),this.trackingPixel.countPixel=$j("embedded-video > ivw > count",this.articleXml).text(),this.ready())}});namespace("zdfplayer");
zdfplayer.media.TiviVideothekAsset=zdfplayer.media.TiviAsset.extend({constructor:function(a){this.base(Base.apply({className:"zdfplayer.media.TiviVideothekAsset"},a))},articleLoaded:function(){this.isLive=$j("video > type",this.articleXml).text().indexOf("live")!=-1;this.dispatchEvent(zdfplayer.media.Asset.DATA_LOADED);this.immediateProcess&&this.doProcess()},mapFormatToType:function(a){var b="";switch(a){case zdfplayer.media.Asset.FORMAT_H264:b="h264_aac_mp4_http_na_na";break;case zdfplayer.media.Asset.FORMAT_H264_RTSP:b=
"h264_aac_3gp_rtsp_na_na";break;case zdfplayer.media.Asset.FORMAT_WEBM:b="vp8_vorbis_webm_http_na_na";break;case zdfplayer.media.Asset.FORMAT_SMIL:b="h264_aac_mp4_rtmp_smil_http";break;case zdfplayer.media.Asset.FORMAT_M3U8:b="h264_aac_ts_http_m3u8_http";break;case zdfplayer.media.Asset.FORMAT_FLV:b="h264_aac_ts_http_flv_http";break;case zdfplayer.media.Asset.FORMAT_MP3:b="na_mp3_mpeg_http_na_na"}return b},getTeaserImageByFormat:function(){var a=null,b=$j("video > externalImage",this.articleXml);
b.size()>0&&(a=b.text());return a},getStreamsByFormat:function(a,b){var c=null,d=this.mapFormatToType(a),d=$j('video > formitaeten > formitaet[basetype="'+d+'"]',this.articleXml);d.size()>0&&$j.each(d,function(a,d){if(b!=null&&typeof b!="undefined"){var h=$j("facets > facet",d);h.size()!=0&&$j.each(h,function(a,g){$j(g).text()==b&&(c==null&&(c={}),c[$j("quality",d).text()]={url:$j("url",d).text(),quality:$j("quality",d).text(),width:parseInt($j("width",d).text()),height:parseInt($j("height",d).text()),
videoBitrate:parseInt($j("videoBitrate",d).text()),audioBitrate:parseInt($j("audioBitrate",d).text())})})}else c==null&&(c={}),c[$j("quality",d).text()]={url:$j("url",d).text(),quality:$j("quality",d).text(),width:parseInt($j("width",d).text()),height:parseInt($j("height",d).text()),videoBitrate:parseInt($j("videoBitrate",d).text()),audioBitrate:parseInt($j("audioBitrate",d).text())}});return c},getDownloadURLs:function(){var a=$j('video > formitaeten > formitaet[isDownload="true"]',this.articleXml),
b=[],c,d,g=/http:\/\/[-a-zA-Z0-9@:%_+.~#?&//=]+.(wmv|mp4)/i;a.size()>0&&$j.each(a,function(a,h){c=$j("url",h).text();d=$j("facets > facet",h).size()>0;g.test(c)&&d==!1&&b.push({url:c,quality:$j("quality",h).text(),width:parseInt($j("width",h).text())})});return b},getTrackingPixel:function(a,b){var c=this.configuration.getIVWTrackingSettings();switch(c.source){case zdfplayer.player.tracking.IVWTracker.TIVI:a.call(this,{family:this.trackingPixel.familyPixel,count:this.trackingPixel.countPixel});break;
case zdfplayer.player.tracking.IVWTracker.MEDIATHEK:if(this.id.length==0){this.log("Cannot invoke ivw tracking due to missing assetID");break}var d=this.configuration.getServiceUrlById("tracking");if(d.length==0){this.log("Cannot invoke ivw tracking due to missing service url");break}var g={};g.beitragsId=this.id;g.embeddedEdition=c.context||zdfplayer.player.tracking.IVWTracker.INTERN;$j.ajax({url:d,data:g,dataType:"text",success:function(c){responseXML=$j.parseXML($j.trim(c));$j($j("response > status > statuscode",
responseXML).get(0)).text()=="ok"?(c={family:$j($j('response > ivwUrls > value[key="family"]',responseXML).get(0)).text(),count:$j($j('response > ivwUrls > value[key="count"]',responseXML).get(0)).text()},a.call(this,c)):b.call(this,$j($j("response > status > debuginfo",responseXML).get(0)).text())},error:function(){b.call(this,"Tracking Pixel could not be determined!")}});break;case zdfplayer.player.tracking.IVWTracker.FLASHVARS:case zdfplayer.player.tracking.IVWTracker.MANUAL:a.call(this,{family:c.family,
count:c.count});break;default:b.call(this,"Cannot invoke ivw tracking due to invalid tracking source: "+c.source)}},load:function(){var a=this.configuration.getServiceUrlById("article"),a=a.replace("?",this.configuration.getMediaSettings().assetID+"?"),b=this;$j.ajax({url:a,dataType:"text",success:function(a){a=$j.trim(a);b.articleWithNameSpacesXml=a;var d=a.match(RegExp("xmlns:[\\S]+=","gim"));$j.each(d,function(b,d){d=d.replace(/xmlns:/i,"");d=d.replace(/=/,"")+":";a=a.replace(RegExp(d,"gim"),"")});
b.articleXml=$j.parseXML($j.trim(a));d=$j($j("video-page > status",b.articleXml).get(0)).text();d=="ok"?b.articleLoaded():b.articleError(d,"")},error:function(a,d){b.articleError("ajaxError",a.statusText||d)}})},doProcess:function(){this.processed?this.log("Media asset already processed"):(this.processed=!0,this.id="",this.title=$j("video > information > headline > subtitle",this.articleXml).text(),this.description=$j("video > information > text",this.articleXml).text(),this.channelTitle=$j("video > information > headline > title",
this.articleXml).text(),this.channelID="",this.airTime=refactored.utils.Convert.toDate($j("video > information > broadcastInfo > airTime",this.articleXml).text()),this.timeToLive=null,this.vcmsURL="",this.hasCaption=!1,this.trackingPixel={},this.trackingPixel.familyPixel=$j("video > ivw > family",this.articleXml).text(),this.trackingPixel.countPixel=$j("video > ivw > count",this.articleXml).text(),this.ready())}});namespace("zdfplayer");
zdfplayer.media.ManualAsset=zdfplayer.media.MediathekAsset.extend({type:"vod",formitaeten:null,teaserImages:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.media.ManualAsset"},a));this.data=a},initialize:function(){this.base();if(this.teaserImages==null||typeof this.teaserImages=="undefined")this.teaserImages=[];if(this.airTime!="")this.airTime=refactored.utils.Convert.toDate(this.airTime);if(this.timeToLive!="")this.timeToLive=refactored.utils.Convert.toDate(this.timeToLive);
this.hasCaption==!0?this.loadCaption():this.ready();this.cuepoints.length>0&&this.checkCuepointFormat()},checkCuepointFormat:function(){for(var a=NaN,b=0;b<this.cuepoints.length;b++)a=refactored.utils.TimeCodeUtil.timecodeToMilliseconds(this.cuepoints[b].time),this.log(this.cuepoints[b].time," to ",a),String(a)!="NaN"?(this.log("Convert Cuepoint time from ",this.cuepoints[b].time,"to",a),this.cuepoints[b].time=a):this.log("No need to convert convert ",this.cuepoints[b].time)},ready:function(){this.log("Manual Asset ready");
this.processed=!0;this.dispatchEvent(zdfplayer.media.Asset.READY)},getTrackingPixel:function(a,b){var c={},d=!1;if(this.family&&this.family.length>0)c.family=this.family,d=!0;if(this.count&&this.count.length>0)c.count=this.count,d=!0;d?a.call(this,c):b.call(this,"Cannot invoke ivw tracking due to missing pixel information.")},transformForFlash:function(){var a={articleData:{}};a.articleData.type=this.type||"";a.articleData.title=this.title||"";a.articleData.details=this.description||"";a.articleData.airTime=
this.airTime||"";a.articleData.expiryDate=this.timeToLive||"";a.articleData.channelTitle=this.channelTitle||"";a.articleData.vcmsURL=this.vcmsURL||"";a.articleData.hasCaption=this.hasCaption||!1;a.articleData.captionURL=this.captionURL||"";a.articleData.captionOffset=this.captionOffset||0;a.formitaeten=[];for(var b=0;b<this.formitaeten.length;b++)a.formitaeten.push({url:this.formitaeten[b].url,baseType:this.formitaeten[b].baseType,quality:this.formitaeten[b].quality,videoBitrate:this.formitaeten[b].videoBitrate,
audioBitrate:this.formitaeten[b].audioBitrate,isDownload:this.formitaeten[b].isDownload,width:this.formitaeten[b].width,height:this.formitaeten[b].height});a.cuepoints=this.cuepoints;return a},getTeaserImageByFormat:function(a){try{return this.teaserImages[a]}catch(b){}return null},getCuepoints:function(){return this.cuepoints},getStreamsByFormat:function(a){for(var a=this.mapFormatToType(a),b,c={},d=0;d<this.formitaeten.length;d++)b=this.formitaeten[d],b.baseType==a&&(c[b.quality]=b);return refactored.utils.Object.isEmpty(c)?
null:c}});namespace("zdfplayer.media");zdfplayer.media.Formitaet=refactored.Object.extend({baseType:null,quality:null,url:"",videoBitrate:0,audioBitrate:0,isDownload:!1,width:null,height:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.media.Asset"},a))}},{HD:"hd",VERYHIGH:"veryhigh",HIGH:"high",MED:"med",LOW:"low"});namespace("zdfplayer.media.playlist");
zdfplayer.media.playlist.PlaylistManager=refactored.Object.extend({controller:null,playlist:null,callbacks:null,loop:!1,constructor:function(a){this.base(Base.apply({className:"zdfplayer.media.playlist.PlaylistManager"},a));this.callbacks=[]},changeMedia:function(){var a={index:this.getIndex(),entry:this.playlist.getEntry()};this.dispatchEvent(zdfplayer.media.playlist.PlaylistManager.CHANGE_MEDIA,a)},toggleListener:function(a){this.playlist!=null&&(a===!0?(this.playlist.addEventListener(zdfplayer.media.playlist.Playlist.INDEX_CHANGED,
$j.proxy(this.handlePlaylistIndexChanged,this)),this.controller!=null&&this.controller.addEventListener(zdfplayer.player.Controller.COMPLETE,$j.proxy(this.handleMediaComplete,this))):(this.playlist.removeEventListener(zdfplayer.media.playlist.Playlist.INDEX_CHANGED,this.handlePlaylistIndexChanged),this.controller!=null&&this.controller.removeEventListener(zdfplayer.player.Controller.COMPLETE,this.handleMediaComplete)))},clearCallbacks:function(){this.callbacks=[]},handleMediaComplete:function(){this.playlist!=
null&&(this.getIndex()<this.playlist.getLength()-1?this.next():this.loop?(this.setIndex(0),this.dispatchEvent(zdfplayer.media.playlist.PlaylistManager.LOOP)):this.dispatchEvent(zdfplayer.media.playlist.PlaylistManager.COMPLETE))},handlePlaylistIndexChanged:function(a,b){this.log("handlePlaylistIndexChanged from",b.oldIndex,"to",b.index);if(this.playlist!=null){if(this.callbacks[b.entry.type]!=null&&typeof this.callbacks[b.entry.type]!="undefined")this.callbacks[b.entry.type](b.entry);this.dispatchEvent(zdfplayer.media.playlist.PlaylistManager.CHANGE_MEDIA,
b)}},setPlaylist:function(a){if(!(this.playlist==null&&a==null)){if(this.playlist!=null)this.toggleListener(!1),this.playlist=null;if(a!=null)if(this.playlist=a,this.playlist.isReady()===!0)this.toggleListener(!0),this.setIndex(0),this.dispatchEvent(zdfplayer.media.playlist.Playlist.READY,{playlist:this.playlist});else{var b=this;this.playlist.addEventListener(zdfplayer.media.playlist.Playlist.READY,function(){b.toggleListener(!0);b.setIndex(0);b.dispatchEvent(zdfplayer.media.playlist.Playlist.READY,
{playlist:b.playlist})})}this.dispatchEvent(zdfplayer.media.playlist.PlaylistManager.PLAYLIST_CHANGED,{playlist:this.playlist})}},getPlaylist:function(){return this.playlist},isProcessing:function(){return this.playlist==null||this.playlist.getLength()==0||this.playlist.getIndex()==-1?!1:!0},setIndex:function(a){this.playlist&&this.playlist.setIndex(a)},getIndex:function(){return this.playlist?this.playlist.getIndex():0},previous:function(){this.setIndex(this.getIndex()-1)},next:function(){this.setIndex(this.getIndex()+
1)},registerCallbackForType:function(a,b){this.callbacks[a]=b},unregisterCallbackForType:function(a,b){typeof this.callbacks[a]!="undefined"&&this.callbacks[a]==b&&(this.callbacks[a]=void 0)},setController:function(a){if(this.controller!=null)this.controller.removeEventListener(zdfplayer.player.Controller.COMPLETE,handleMediaComplete),this.controller=null;this.controller=a;this.controller.addEventListener(zdfplayer.player.Controller.COMPLETE,$j.proxy(this.handleMediaComplete,this))}},{CHANGE_MEDIA:"PlaylistManagerChangeMedia.zdfplayer",
PLAYLIST_CHANGED:"PlaylistManagerPlaylistChanged.zdfplayer",COMPLETE:"PlaylistIndexChanged.zdfplayer",LOOP:"PlaylistLoop.zdfplayer"});namespace("zdfplayer.media.playlist");
zdfplayer.media.playlist.Playlist=refactored.Object.extend({index:-1,ready:!1,entries:null,entry:null,startIndex:0,constructor:function(a){this.base(Base.apply({className:"zdfplayer.media.playlist.Playlist"},a));this.entries=[];this.index=-1},doDestroy:function(){this.base();this.entries=this.entry=null},setReady:function(){this.ready=!0;this.dispatchEvent(zdfplayer.media.playlist.Playlist.READY)},setIndex:function(a){this.log("Set index from",this.index,"to",a,"from overall",this.getLength(),"entries");
if(a>=0&&a<this.getLength()&&this.index!=a){var b=this.index;this.index=a;this.dispatchEvent(zdfplayer.media.playlist.Playlist.INDEX_CHANGED,{index:a,oldIndex:b,entry:this.entries[this.index]})}},getIndex:function(){return this.index},getLength:function(){return this.entries==null?0:this.entries.length},previous:function(){this.index>0&&this.setIndex(index-1)},next:function(){this.index<this.getLength()&&this.setIndex(index+1)},isReady:function(){return this.ready},getEntry:function(){},getEntries:function(){return this.entries}},
{READY:"PlaylistReady.zdfplayer",ERROR:"PlaylistError.zdfplayer",INDEX_CHANGED:"PlaylistIndexChanged.zdfplayer"});namespace("zdfplayer.media.playlist");
zdfplayer.media.playlist.DefaultPlaylist=zdfplayer.media.playlist.Playlist.extend({serviceURL:null,listXML:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.media.playlist.DefaultPlaylist"},a))},doDestroy:function(){this.base();this.listXML=null},parse:function(){var a=$j("media",this.listXML);if(a.size()>0){var b,c=this,d=!0;$j.each(a,function(a,f){$j.each($j(f).children(),function(a,f){var g=$j(f)[0].tagName;if(g=="article")b={},b.type=g,b.value=$j.trim($j(f).text()),b.payload=
null,c.entries.push(b);else return c.dispatchEvent(zdfplayer.media.playlist.Playlist.ERROR,{statusCode:"commonError",debugInfo:"invalid list entry type"}),d=!1,!0})})}d&&this.setReady()},loadError:function(a,b){this.error=!0;this.log("Playlist load error");this.dispatchEvent(zdfplayer.media.playlist.Playlist.ERROR,{statusCode:a,debugInfo:b})},getListXML:function(){return zdfplayer.utils.XMLUtils.toXMLString(this.listXML)},load:function(){var a=this;$j.ajax({url:this.serviceURL,dataType:"text",success:function(b){a.listXML=
$j.parseXML($j.trim(b));a.parse()},error:function(b,c){a.loadError("ajaxError",c)}})}});namespace("zdfplayer.media.playlist");
zdfplayer.media.playlist.ArticlePlaylist=zdfplayer.media.playlist.DefaultPlaylist.extend({channelID:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.media.playlist.ArticlePlaylist"},a))},parse:function(){var a=$j("teaserlist > teasers > teaser",this.listXML);if(a.size()>0){var b,c=this;$j.each(a,function(a,g){b={type:"article"};b.value=$j("details > assetId",g).text();b.payload={title:$j("information > title",g).text()};c.entries.push(b)})}this.setReady()},load:function(){var a=
this;$j.ajax({url:this.serviceURL+"&id="+this.channelID,dataType:"text",success:function(b){a.listXML=$j.parseXML($j.trim(b));var c=$j($j("response > status > statuscode",a.listXML).get(0)).text();c=="ok"?a.parse():(b=$j($j("response > status > debuginfo",b).get(0)).text(),a.loadError(c,b))},error:function(b,c){a.loadError("ajaxError",c)}})}});namespace("zdfplayer.player");
zdfplayer.player.Controller=refactored.Object.extend({mediaAsset:null,_isReady:!1,_canPlay:!1,configuration:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.Controller"},a))},updateMediaAsset:function(){},isReady:function(){return this._isReady},ready:function(){if(!this._isReady)this._isReady=!0,this.dispatchEvent(zdfplayer.player.Controller.READY)},canPlay:function(){return this._canPlay},getMediaAsset:function(){return this.mediaAsset},setMediaAsset:function(a){this.mediaAsset&&
this.mediaAsset!==a&&this.mediaAsset.destroy();this._canPlay=!1;this.mediaAsset=a;this.updateMediaAsset();this.dispatchEvent(zdfplayer.player.Controller.MEDIA_ASSET_CHANGED)},play:function(){},pause:function(){},stop:function(){},seek:function(){},togglePause:function(){},isPlaying:function(){},isPaused:function(){},isStopped:function(){},getAutoPlay:function(){return!1},setAutoPlay:function(){},getMuted:function(){return!1},setMuted:function(){},setVolume:function(){},getVolume:function(){return 0},
getDuration:function(){return 0},getCurrentTime:function(){return 0},setCurrentTime:function(){},changeArticle:function(){},strictlyChangeArticle:function(a,b){this.changeArticle(a,b)},getScaleMode:function(){return""},setScaleMode:function(){},switchToBitrate:function(){},setPlaylistIndex:function(){},playlistNext:function(){},playListPrevious:function(){},getPlaylistIndex:function(){},getFullScreenMode:function(){return!1},getCurrentCuepoint:function(){return{}},jumpToNearestCuepoint:function(){return{}},
setCuepointIndex:function(){}},{READY:"ControllerReady.zdfplayer",MEDIA_ASSET_CHANGED:"ControllerMediaAssetChanged.zdfplayer",MUTE_CHANGED:"ControllerMuteChanged.zdfplayer",VOLUME_CHANGED:"ControllerVolumeChanged.zdfplayer",PLAY_STATE_CHANGED:"ControllerPlayStateChanged.zdfplayer",CUEPOINT:"ControllerCuepoint.zdfplayer",PLAYLIST_INDEX_CHANGED:"ControllerPlaylistIndexChanged.zdfplayer",PLAYLIST_COMPLETE:"ControllerComplete.zdfplayer",COMPLETE:"ControllerComplete.zdfplayer",ERROR:"ControllerError.zdfplayer",
DURATION_CHANGED:"ControllerDurationChanged.zdfplayer",CURRENT_TIME_CHANGED:"ControllerCurrentTimeChanged.zdfplayer",STREAM_CHANGED:"ControllerStreamChanged.zdfplayer",CAN_PLAY:"CanPlay.zdfplayer",TOGGLE_FULLSCREEN:"ToggleFullscreen.zdfplayer",FULLSCREEN_CHANGED:"FullscreenChanged.zdfplayer",SEEKING:"ControllerSeeking.zdfplayer",BUFFERING:"ControllerBuffering.zdfplayer",PLAY_STATE:"playing",PAUSE_STATE:"paused",STOP_STATE:"stopped",WAITING:"ControllerWaiting.zdfplayer",PROGRESS:"ControllerProgress.zdfplayer",
LOAD_STARTED:"ControllerLoadStarted.zdfplayer",LOAD_FINISHED:"ControllerLoadFinished.zdfplayer",SHOW_ALERT:"ControllerShowAlert.zdfplayer",SCALE_MODE_CHANGED:"ControllerScaleModeChanged.zdfplayer",TYPE_INSTANCIATION_COMPLETE:"ControllerTypeInstanciationComplete.zdfplayer",UI_CREATED:"ControllerUiCreated.zdfplayer"});namespace("zdfplayer.player");
zdfplayer.player.Builder=refactored.Object.extend({id:"",configuration:null,mediaAsset:null,playlistManager:null,parentElement:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.Builder"},a))},build:function(){}},{COMPLETE:"BuilderComplete.zdfplayer",ALERT_AVAILABLE:"BuilderAlertAvailable.zdfplayer"});namespace("zdfplayer.player.video");
zdfplayer.player.video.VideoBuilder=zdfplayer.player.Builder.extend({stream:null,video:null,videoFormat:null,container:null,deferredWidgets:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.VideoBuilder"},a));this.deferredWidgets=[];zdfplayer.player.video.ui.control.ControlFactory.register("container",refactored.ui.container.UIContainer)},importConfiguration:function(a,b,c){$j.each(c,function(c,g){var f,h;g.indexOf(":")!=-1?(f=g.split(":"),h=f[0],f=f[1]):f=g;var n=
b.attr(c);if(typeof n!="undefined")switch(h){case "b":a[f]=n=="true";break;case "n":a[f]=parseFloat(n);break;default:a[f]=n}})},getConfiguration:function(a,b){var c={};this.importConfiguration(c,a,b);return c},processTypeInstanciationComplete:function(a){this.controller.registerWidget(a);a=="container"||a=="label"||a=="button"||refactored.utils.String.endsWith(a,"Button")||a=="timeField"||a=="qualitySelector"||this.controller.dispatchEvent(zdfplayer.player.Controller.TYPE_INSTANCIATION_COMPLETE,a)},
addWidget:function(a,b){this.parseWidget(a,this.container,b)},addDeferredWidget:function(a){for(var b=$j("> widget",a.widgetXml),c=0,d=b.length;c<d;c++)this.parseWidget($j(b[c]),a.container,!1)},parseWidget:function(a,b,c){var d=a.attr("type")||"container";if(d=="tooltip")refactored.ui.manager.TooltipManager.tooltipClass=refactored.ui.control.UITooltip,refactored.ui.manager.TooltipManager.borderColor=a.attr("borderColor"),refactored.ui.manager.TooltipManager.borderThickness=a.attr("borderThickness"),
refactored.ui.manager.TooltipManager.backgroundColor=a.attr("backgroundColor"),refactored.ui.manager.TooltipManager.maxTooltipWidth=a.attr("maxWidth"),refactored.ui.manager.TooltipManager.delay=a.attr("delay");if(zdfplayer.player.video.ui.control.ControlFactory.isRegistered(d)){this.profileStart("parseWidget.configuration");var g={name:a.attr("id")||"",customClass:a.attr("type")||"",controller:this.controller,stage:this.container,strategies:[],isDebugEnabled:this.isDebugEnabled,tooltip:a.attr("tooltip")||
null};this.importConfiguration(g,a,{top:"n:top",left:"n:left",right:"n:right",bottom:"n:bottom",width:"n:width",height:"n:height"});var f=a.attr("font")!=void 0?a.attr("font"):"defaultFont";g.font=this.configuration.getFontById(f);this.importConfiguration(g,a,zdfplayer.player.video.ui.control.ControlFactory.getConfigurationMapping(d));g.layoutOptions=b.layout.instanceOf(refactored.ui.container.layout.UIAbsoluteLayout)?new refactored.ui.container.layout.UIAbsoluteLayoutOptions(this.getConfiguration(a,
{horizontalAlign:"horizontalAlignment",verticalAlign:"verticalAlignment",percentWidth:"n:percentWidth",percentHeight:"n:percentHeight",left:"n:left",right:"n:right",top:"n:top",bottom:"n:bottom"})):new refactored.ui.container.layout.UIBoxLayoutOptions(this.getConfiguration(a,{horizontalAlign:"horizontalAlignment",verticalAlign:"verticalAlignment",percentWidth:"n:percentWidth",percentHeight:"n:percentHeight",left:"n:left",right:"n:right",top:"n:top",bottom:"n:bottom"}));if(d=="container")f=a.attr("layoutMode")||
"absolute",g.layout=f=="absolute"?new refactored.ui.container.layout.UIAbsoluteLayout({isDebugEnabled:!1}):new refactored.ui.container.layout.UIBoxLayout({direction:f,gap:a.attr("gap")?parseInt(a.attr("gap")):0,isDebugEnabled:!1});if(g.layoutOptions.percentHeight>0)g.autoHeight=!1;if(g.layoutOptions.percentWidth>0)g.autoWidth=!1;refactored.utils.Convert.toBoolean(a.attr("autoHide"))==!0&&(f={container:this.container,autoHide:refactored.utils.Convert.toBoolean(a.attr("autoHide"))||!1,autoHideDelay:this.configuration.getSettingById("autoHideDelay"),
fadeSteps:parseInt(a.attr("fadeSteps"))||0,isDebugEnabled:this.isDebugEnabled},f=new zdfplayer.player.video.ui.strategy.AutoHideStrategy(f),g.strategies.push(f));this.profileEnd("parseWidget.configuration");this.profileStart("parseWidget.skin");g.backgroundSkin=this.configuration.getAssetById(a.attr("face")||"");if(a.attr("upFace"))g.normalSkin=this.configuration.getAssetById(a.attr("upFace"));else if(a.attr("markerUpFace"))g.normalSkin=this.configuration.getAssetById(a.attr("markerUpFace"));if(a.attr("downFace"))g.hoverSkin=
this.configuration.getAssetById(a.attr("downFace"));else if(a.attr("markerDownFace"))g.hoverSkin=this.configuration.getAssetById(a.attr("markerDownFace"));if(a.attr("disabledFace"))g.disabledSkin=this.configuration.getAssetById(a.attr("disabledFace"));else if(a.attr("markerDisabledFace"))g.disabledSkin=this.configuration.getAssetById(a.attr("markerDisabledFace"));if(a.attr("selectedUpFace"))g.selectedNormalSkin=this.configuration.getAssetById(a.attr("selectedUpFace"));else if(a.attr("markerSelectedUpFace"))g.selectedNormalSkin=
this.configuration.getAssetById(a.attr("markerSelectedUpFace"));if(a.attr("selectedDownFace"))g.selectedHoverSkin=this.configuration.getAssetById(a.attr("selectedDownFace"));else if(a.attr("markerSelectedDownFace"))g.selectedHoverSkin=this.configuration.getAssetById(a.attr("markerSelectedDownFace"));if(a.attr("selectedDisabledFace"))g.selectedDisabledSkin=this.configuration.getAssetById(a.attr("selectedDisabledFace"));else if(a.attr("markerSelectedDisabledFace"))g.selectedDisabledSkin=this.configuration.getAssetById(a.attr("markerSelectedDisabledFace"));
if(a.attr("track"))g.trackSkin=this.configuration.getAssetById(a.attr("track"));if(a.attr("progressTrack"))g.progressTrackSkin=this.configuration.getAssetById(a.attr("progressTrack"));g.scrubberUpSkin=a.attr("scrubberUp")?this.configuration.getAssetById(a.attr("scrubberUp")):this.configuration.getAssetById(a.attr("thumbUp"));g.scrubberDownSkin=a.attr("scrubberDown")?this.configuration.getAssetById(a.attr("scrubberDown")):this.configuration.getAssetById(a.attr("thumbDown"));g.scrubberDisabledSkin=
a.attr("scrubberDisabled")?this.configuration.getAssetById(a.attr("scrubberDisabled")):this.configuration.getAssetById(a.attr("thumbDisabled"));if(a.attr("accessabilityName"))g.accessabilityName=a.attr("accessabilityName");this.profileEnd("parseWidget.skin");this.profileStart("parseWidget.instanciation");var h=zdfplayer.player.video.ui.control.ControlFactory.instanciate(d,g);this.profileEnd("parseWidget.instanciation");this.profileStart("parseWidget.addChild");b.addChild(h);d=="alert"&&this.dispatchEvent(zdfplayer.player.Builder.ALERT_AVAILABLE,
h);if(d=="popupContainer")this.controller.popupManager.sourceContainer=h;this.profileEnd("parseWidget.addChild");if(c)this.deferredWidgets.push({widgetXml:a,container:h});else{this.processTypeInstanciationComplete(a.attr("type")||"container");var n=this;$j.each($j("> widget",a),function(a,b){n.parseWidget($j(b),h,c)})}}},createStream:function(){var a=this.configuration.getSettingById("initialBitrate"),a=this.mediaAsset.getStreamByFormatAndBitrate(this.videoFormat,zdfplayer.media.Asset.FACET_PROGRESSIVE,
a);if(a!=null)this.stream=a;else for(var b=["hd","veryhigh","high","med","low"];b.length>0;)if(a=this.mediaAsset.getStreamByFormatAndQuality(this.videoFormat,zdfplayer.media.Asset.FACET_PROGRESSIVE,b.shift()),a!=null){this.stream=a;break}},createUI:function(a){var b=parseInt(this.configuration.getSettingById("width",400)),c=parseInt(this.configuration.getSettingById("height",225));this.container=new zdfplayer.player.video.ui.container.Stage({id:this.id,customClass:"zdfplayer",layout:new refactored.ui.container.layout.UIAbsoluteLayout({isDebugEnabled:!1}),
width:b,height:c,isDebugEnabled:this.isDebugEnabled,backgroundColor:this.configuration.getSettingById("backgroundColor","#000000").replace("0x","#"),controller:this.controller,name:"stage"});this.container.renderTo(this.parentElement);var d=refactored.utils.Convert.toBoolean(this.configuration.getSettingById("loop",!1));this.playlistManager&&this.playlistManager.playlist!=null&&(d=!1);var g=a==!0?!1:!0;this.video=new refactored.ui.control.UIVideo({width:b,height:c,autoPlay:refactored.utils.Convert.toBoolean(this.configuration.getSettingById("autoPlay",
!1)),loop:d,isDebugEnabled:this.isDebugEnabled,scaleMode:this.configuration.getSettingById("scaleMode","letterbox"),showControls:g});this.container.addChild(this.video);if(a){var f=this;$j.each(this.configuration.getWidgets(),function(a,b){$widgetXml=$j(b);f.addWidget($widgetXml,$widgetXml.attr("id")!="controlBar")});a=new refactored.utils.DistributedOperation({operation:$j.proxy(this.addDeferredWidget,this),perRunGapTicks:10});a.addEventListener(refactored.utils.DistributedOperation.COMPLETE,function(){f.controller.dispatchEvent(zdfplayer.player.Controller.UI_CREATED)});
a.start(this.deferredWidgets)}else this.controller.dispatchEvent(zdfplayer.player.Controller.UI_CREATED)},build:function(){this.log("Building Video Player");if(!this.videoFormat&&ModernizrCustom.video.webm!=""&&this.mediaAsset.supportsFormat(zdfplayer.media.Asset.FORMAT_WEBM,zdfplayer.media.Asset.FACET_PROGRESSIVE))this.videoFormat=zdfplayer.media.Asset.FORMAT_WEBM,this.log("filetype = webm");var a=/iPhone|iPod|iPad/i.test(navigator.platform),b=refactored.utils.Convert.toBoolean(this.configuration.getSettingById("iOSNativeMode",
!0)),c=refactored.utils.Os.isAndroid(),d=!1,g=refactored.utils.Convert.toBoolean(this.configuration.getSettingById("androidNativeMode",!0)),f=this.configuration.getSettingById("androidMinUseEmbedVersion").split("."),h=this.configuration.getSettingById("androidMinUseDevicePlayerVersion").split(".");if(!this.videoFormat&&ModernizrCustom.video.h264!="")if(a&&b&&this.mediaAsset.supportsFormat(zdfplayer.media.Asset.FORMAT_M3U8))this.videoFormat=zdfplayer.media.Asset.FORMAT_M3U8,this.log("isIOS = "+a,", iOSNativeMode = "+
b,", filetype = m3u8");else if(this.mediaAsset.supportsFormat(zdfplayer.media.Asset.FORMAT_H264,zdfplayer.media.Asset.FACET_PROGRESSIVE))this.log("isIOS = "+a,", iOSNativeMode = "+b,", filetype = mp4"),this.videoFormat=zdfplayer.media.Asset.FORMAT_H264;if(!this.videoFormat&&c)if(refactored.utils.Os.matchesMinAndroidVersion(f[0],f[1],f[2])&&this.mediaAsset.supportsFormat(zdfplayer.media.Asset.FORMAT_M3U8))this.videoFormat=zdfplayer.media.Asset.FORMAT_M3U8;else if(refactored.utils.Os.matchesMinAndroidVersion(h[0],
h[1],h[2])&&this.mediaAsset.supportsFormat(zdfplayer.media.Asset.FORMAT_H264_RTSP))this.videoFormat=zdfplayer.media.Asset.FORMAT_H264_RTSP,d=!0;if(!this.videoFormat&&ModernizrCustom.audio.mp3!=""&&this.mediaAsset.supportsFormat(zdfplayer.media.Asset.FORMAT_MP3,null))this.videoFormat=zdfplayer.media.Asset.FORMAT_MP3;this.controller=new zdfplayer.player.video.VideoController({isDebugEnabled:this.isDebugEnabled,videoFormat:this.videoFormat,configuration:this.configuration});this.controller.setMediaAsset(this.mediaAsset);
this.controller.setPlaylistManager(this.playlistManager);this.playlistManager.setController(this.controller);a==!0&&b==!0||c&&g==!0?this.createUI(!1):this.createUI(!0);this.controller.video=this.video;if(d){var n=this;this.controller.addEventListener(zdfplayer.player.Controller.UI_CREATED,function(){n.controller.popupManager.showPopup("redirect")})}this.dispatchEvent(zdfplayer.player.Builder.COMPLETE,this.controller)}});namespace("zdfplayer.player.video");
zdfplayer.player.video.VideoController=zdfplayer.player.Controller.extend({video:null,videoFormat:null,stream:null,storedTime:0,captionManager:null,playlistManager:null,popupManager:null,isFullScreen:!1,registeredWidgets:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.VideoController"},a))},doDestroy:function(){this.base();$j(document).unbind("fullscreenchange",$j.proxy(this.handleFullScreenChanged,this))},initialize:function(){this.base();this.storedTime=this.configuration.getSettingById("startTime",
0);this.popupManager=new zdfplayer.player.video.manager.PopupManager({});this.registeredWidgets=[]},handlePause:function(){this.dispatchEvent(zdfplayer.player.Controller.PLAY_STATE_CHANGED,{playState:zdfplayer.player.Controller.PAUSE_STATE})},handlePlay:function(){this.dispatchEvent(zdfplayer.player.Controller.PLAY_STATE_CHANGED,{playState:zdfplayer.player.Controller.PLAY_STATE})},handleStop:function(){this.dispatchEvent(zdfplayer.player.Controller.PLAY_STATE_CHANGED,{playState:zdfplayer.player.Controller.STOP_STATE})},
handleSeeking:function(){this.dispatchEvent(zdfplayer.player.Controller.SEEKING,{seeking:!0,currentTime:this.video.storedTime})},handleSeeked:function(){this.dispatchEvent(zdfplayer.player.Controller.SEEKING,{seeking:!1,currentTime:this.getCurrentTime()})},handleScaleModeChanged:function(a,b){this.dispatchEvent(zdfplayer.player.Controller.SCALE_MODE_CHANGED,{scaleMode:b})},handleLoadStarted:function(){this.dispatchEvent(zdfplayer.player.Controller.LOAD_STARTED)},handleLoadFinished:function(){this.dispatchEvent(zdfplayer.player.Controller.LOAD_FINISHED)},
handleVolumeChanged:function(){this.dispatchEvent(zdfplayer.player.Controller.VOLUME_CHANGED,{volume:this.getVolume()})},handleMutedChanged:function(){this.dispatchEvent(zdfplayer.player.Controller.MUTE_CHANGED,{muted:this.getMuted()})},handleCanPlay:function(){if(this.storedTime>0)this.storedTime<this.video.getDuration()&&this.seek(this.storedTime),this.storedTime=0;this._canPlay=!0;this.dispatchEvent(zdfplayer.player.Controller.CAN_PLAY,{enabled:!0})},handleDurationChanged:function(){this.dispatchEvent(zdfplayer.player.Controller.DURATION_CHANGED,
{time:this.getDuration()})},handleCurrentTimeChanged:function(){this.dispatchEvent(zdfplayer.player.Controller.CURRENT_TIME_CHANGED,{time:this.getCurrentTime()})},handleVideoCompleted:function(){this.getLoop()==!0?this.video.seek(0):(this.video.stop(),this.log("handleVideoCompleted"),this.dispatchEvent(zdfplayer.player.Controller.COMPLETE))},handleVideoError:function(a,b){var c;try{switch(b.error.code){case b.error.MEDIA_ERR_ABORTED:rrorKey="MEDIA_ERR_ABORTED";break;case b.error.MEDIA_ERR_NETWORK:c=
"MEDIA_ERR_NETWORK";break;case b.error.MEDIA_ERR_DECODE:c="MEDIA_ERR_DECODE";break;case b.error.MEDIA_ERR_SRC_NOT_SUPPORTED:c="MEDIA_ERR_SRC_NOT_SUPPORTED";break;default:c="commonError"}}catch(d){c="commonError"}this.dispatchEvent(zdfplayer.player.Controller.ERROR,{errorID:c});var g=this.configuration.getTextById("error"),f=this.configuration.getTextById(c);g.length==0&&this.log("Warning: Missing dictionary entry for -> error");f.length==0&&this.log("Warning: Missing dictionary entry for -> "+c);
this.dispatchEvent(zdfplayer.player.Controller.SHOW_ALERT,{caption:g,message:f})},handleVideoWaiting:function(){this.dispatchEvent(zdfplayer.player.Controller.WAITING)},handleProgress:function(a,b,c,d){this.dispatchEvent(zdfplayer.player.Controller.PROGRESS,{state:b,percent:c,mode:d})},handleFullScreenChanged:function(){this.isFullScreen=!this.isFullScreen;this.dispatchEvent(zdfplayer.player.Controller.FULLSCREEN_CHANGED,[this.isFullScreen])},play:function(){this.video&&this.isReady()&&this.video.play()},
pause:function(){this.video&&this.isReady()&&this.video.pause()},togglePause:function(){this.video&&this.isReady()&&(this.isPaused()?this.play():this.isPlaying()&&this.pause())},stop:function(){this.video&&this.isReady()&&this.video.stop()},toggleFullscreen:function(a){this.isFullScreen=a;this.dispatchEvent(zdfplayer.player.Controller.TOGGLE_FULLSCREEN,[a])},seek:function(a){this.video&&this.isReady()&&this.video.seek(a)},isPlaying:function(){return!this.video||!this.isReady()?!1:this.video.isPlaying()},
isPaused:function(){return!this.video||!this.isReady()?!1:this.video.isPaused()},isStopped:function(){return!this.video||!this.isReady()?!1:this.video.isStopped()},setMuted:function(a){this.video&&this.isReady()&&(this.video.setMuted(a),this.dispatchEvent(zdfplayer.player.Controller.MUTE_CHANGED,{muted:a}))},getMuted:function(){return!this.video||!this.isReady()?!1:this.video.getMuted()},setVolume:function(a){this.video&&this.isReady()&&this.video.setVolume(a)},getVolume:function(){return!this.video||
!this.isReady()?0:this.video.getVolume()},getDuration:function(){return!this.video||!this.isReady()?0:this.video.getDuration()},getCurrentTime:function(){return!this.video||!this.isReady()?0:this.video.getCurrentTime()},setCurrentTime:function(a){this.video&&this.isReady()&&this.video.setCurrentTime(a)},getAutoPlay:function(){return!this.video||!this.isReady()?!1:this.video.getAutoPlay()},setAutoPlay:function(a){this.video&&this.isReady()&&this.video.setAutoPlay(a)},getLoop:function(){return!this.video||
!this.isReady()?!1:this.video.getLoop()},setLoop:function(a){this.video&&this.isReady()&&this.video.setLoop(a)},getScaleMode:function(){return!this.video||!this.isReady()?"":this.video.getScaleMode()},setScaleMode:function(a){this.video&&this.isReady()&&this.video.setScaleMode(a)},getReadyState:function(){return!this.video||!this.isReady()?void 0:this.video.getReadyState()||void 0},setStream:function(a,b){this.log("setStream",a);if(b==!0)this.storedTime=this.getCurrentTime();this.stream=a;this.video&&
this._isReady&&this.video.setStreamUrl(a.url);this.configuration.getSettingById("initialBitrate")!=a.videoBitrate&&this.configuration.setSetting("initialBitrate",a.videoBitrate);this.dispatchEvent(zdfplayer.player.Controller.STREAM_CHANGED,{stream:a})},getStream:function(){return this.stream},switchToBitrate:function(a){if(a==null)return!1;var b;if(this.videoFormat==zdfplayer.media.Asset.FORMAT_WEBM||this.videoFormat==zdfplayer.media.Asset.FORMAT_H264)b=zdfplayer.media.Asset.FACET_PROGRESSIVE;b=this.mediaAsset.getStreamByFormatAndBitrate(this.videoFormat,
b,a*1E3);return b==null?(this.log("Cannot switch bitrate. No bitrate availabe for "+a),!1):(this.setStream(b,!0),!0)},switchToQuality:function(a){if(a==null)return!1;var b;if(this.videoFormat==zdfplayer.media.Asset.FORMAT_WEBM||this.videoFormat==zdfplayer.media.Asset.FORMAT_H264)b=zdfplayer.media.Asset.FACET_PROGRESSIVE;a=this.mediaAsset.getStreamByFormatAndQuality(this.videoFormat,b,a);return a!=null?(this.setStream(a),!0):!1},setPlaylistIndex:function(a){this.playlistManager&&this.playlistManager.setIndex(a)},
getPlaylistIndex:function(){return this.playlistManager?this.playlistManager.getIndex():0},playlistNext:function(){this.playlistManager&&this.playlistManager.next()},playlistPrevious:function(){this.playlistManager&&this.playlistManager.previous()},setCuepointIndex:function(a){var b=this.mediaAsset.getCuepoints();b.length!=0&&a<b.length&&this.seek(b[a].time/1E3)},jumpToNearestCuepoint:function(a,b){var c=this.mediaAsset.getCuepoints();if(c.length!=0){var d=null;$j.each(c,function(c,f){if(f.time==
a)return d=f,!1;if(b)if(f.time<a)d=f;else return!1;else if(f.time>a)return d=f,!1});d&&this.seek(d.time/1E3)}},getCurrentCuepoint:function(){var a=this.mediaAsset.getCuepoints();if(a.length==0)return null;for(var b=null,c=null,d=c=null,d=this.getCurrentTime()*1E3,g=1;g<a.length;g++){b=a[g-1];c=a[g];if(g==1&&d<Number(b.time))return null;if(d>=Number(b.time)&&d<Number(c.time))return c={},c.index=g-1,c.time=b.time,c.name=b.text,c}c={};c.index=a.length-1;c.time=a[c.index].time;c.name=a[c.index].text;
return c},getVideoFormat:function(){return this.videoFormat},setPlaylistManager:function(a){this.playlistManager=a},setMediaAsset:function(a){this.base(a);this.captionManager==null?this.captionManager=new zdfplayer.player.video.caption.CaptionManager({controller:this,captionDocument:a.captionDocument,isDebugEnabled:this.isDebugEnabled}):this.captionManager.setCaptionDocument(a.captionDocument);var b=this.configuration.getSettingById("initialQuality",null),a=!1;b!=null&&(a=isNaN(parseInt(b))?this.switchToQuality(b):
this.switchToBitrate(parseInt(b)/1E3));if(!a){for(b=["hd","veryhigh","high","med","low"];b.length>0;)if(a=this.switchToQuality(b.shift()))return;if(this.isReady())this.dispatchEvent(zdfplayer.player.Controller.SHOW_ALERT,{caption:this.configuration.getTextById("error"),message:this.configuration.getTextById("missingVideo")});else{var c=this;this.addEventListener(zdfplayer.player.Controller.READY,function(){c.dispatchEvent(zdfplayer.player.Controller.SHOW_ALERT,{caption:c.configuration.getTextById("error"),
message:c.configuration.getTextById("missingVideo")})})}}},enableCaptions:function(){this.dispatchEvent(zdfplayer.player.video.caption.CaptionManager.ENABLE,{enabled:!0})},disableCaptions:function(){this.dispatchEvent(zdfplayer.player.video.caption.CaptionManager.ENABLE,{enabled:!1})},strictlyChangeArticle:function(a,b){this.playlistManager&&(this.playlistManager.setPlaylist(null),this.video.setLoop(refactored.utils.Convert.toBoolean(this.configuration.getSettingById("loop",!1))));this.changeArticle(a,
b)},changeArticle:function(a,b){this.stop();if(b=="video"||typeof b=="undefined"){this.log("change Articel",a);this.configuration.setMedia(a,null);var c=new zdfplayer.media.MediathekAsset({configuration:this.configuration,isDebugEnabled:this.isDebugEnabled}),d=this;c.addEventListener(zdfplayer.media.Asset.READY,function(){d.setMediaAsset(c)});c.addEventListener(zdfplayer.media.Asset.ERROR,function(a,b){var c=this.configuration.getSystemMessageById("error",b.statusCode);this.dispatchEvent(zdfplayer.player.Controller.SHOW_ALERT,
c)});c.load()}else if(b=="list"){this.log("create new playlist");var g=new zdfplayer.media.playlist.ArticlePlaylist({serviceURL:this.configuration.getServiceUrlById("channel"),channelID:a,isDebugEnabled:this.isDebugEnabled});this.playlistManager.setPlaylist(g);this.video.setLoop(!1);g.load()}},getPlaylistMode:function(){return this.playlistManager&&this.playlistManager.getPlaylist()!=null?!0:!1},getFullScreenMode:function(){return this.isFullScreen},ready:function(){if(this.video){this.log("ready");
if(this.configuration.fullScreenAvailable){var a=this;$j(document).bind("fullscreenchange",$j.proxy(this.handleFullScreenChanged,this))}this.video.addEventListener(refactored.ui.control.UIVideo.PLAY,$j.proxy(this.handlePlay,this));this.video.addEventListener(refactored.ui.control.UIVideo.PAUSE,$j.proxy(this.handlePause,this));this.video.addEventListener(refactored.ui.control.UIVideo.STOP,$j.proxy(this.handleStop,this));this.video.addEventListener(refactored.ui.control.UIVideo.VOLUME_CHANGE,$j.proxy(this.handleVolumeChanged,
this));this.video.addEventListener(refactored.ui.control.UIVideo.MUTED,$j.proxy(this.handleMutedChanged,this));this.video.addEventListener(refactored.ui.control.UIVideo.CURRENT_TIME_CHANGE,$j.proxy(this.handleCurrentTimeChanged,this));this.video.addEventListener(refactored.ui.control.UIVideo.DURATION_CHANGE,$j.proxy(this.handleDurationChanged,this));this.video.addEventListener(refactored.ui.control.UIVideo.CAN_PLAY,$j.proxy(this.handleCanPlay,this));this.video.addEventListener(refactored.ui.control.UIVideo.COMPLETE,
$j.proxy(this.handleVideoCompleted,this));this.video.addEventListener(refactored.ui.control.UIVideo.ERROR,$j.proxy(this.handleVideoError,this));this.video.addEventListener(refactored.ui.control.UIVideo.WAITING,$j.proxy(this.handleVideoWaiting,this));this.video.addEventListener(refactored.ui.control.UIVideo.PROGRESS,$j.proxy(this.handleProgress,this));this.video.addEventListener(refactored.ui.control.UIVideo.LOAD_STARTED,$j.proxy(this.handleLoadStarted,this));this.video.addEventListener(refactored.ui.control.UIVideo.LOAD_FINISHED,
$j.proxy(this.handleLoadFinished,this));this.video.addEventListener(refactored.ui.control.UIVideo.SEEKED,$j.proxy(this.handleSeeked,this));this.video.addEventListener(refactored.ui.control.UIVideo.SEEKING,$j.proxy(this.handleSeeking,this));this.video.addEventListener(refactored.ui.control.UIVideo.SCALE_MODE_CHANGED,$j.proxy(this.handleScaleModeChanged,this));this.stream!=null&&typeof this.stream!="undefined"&&(a=this,setTimeout(function(){a.log(a.stream.url);a.video.setStreamUrl(a.stream.url)},0));
this.base()}},registerWidget:function(a){this.registeredWidgets.push(a)},isWidgetRegistered:function(a){return refactored.utils.Array.contains(this.registeredWidgets,a)}});namespace("zdfplayer.player.video.manager");
zdfplayer.player.video.manager.PopupManager=Base.extend({sourceContainer:null,currentPopup:null,hasPausedMedia:!1,handlePopupClose:function(){this.hidePopup()},showPopup:function(a){if(!(this.sourceContainer==null||typeof this.sourceContainer=="undefined"))if(this.currentPopup=a=this.sourceContainer.getChildByName(a)||null)if(a.show(),this.sourceContainer.show(),a.addEventListener(zdfplayer.player.video.ui.container.popup.Popup.CLOSE,$j.proxy(this.handlePopupClose,this)),a.controller.isPlaying()&&
a.pauseMedia)a.controller.pause(),this.hasPausedMedia=!0},hidePopup:function(){if(!(this.sourceContainer==null||typeof this.sourceContainer=="undefined")&&this.currentPopup){this.currentPopup.hide();this.sourceContainer.hide();this.currentPopup.removeEventListener(zdfplayer.player.video.ui.container.popup.Popup.CLOSE,this.handlePopupClose);if(this.hasPausedMedia)this.currentPopup.controller.play(),this.hasPausedMedia=!1;this.currentPopup=null}}});namespace("zdfplayer.player.video.ui.control");
zdfplayer.player.video.ui.control.ControlFactory=Base.extend({},{controls:{},register:function(a,b){zdfplayer.player.video.ui.control.ControlFactory.controls[a]=b},isRegistered:function(a){return typeof zdfplayer.player.video.ui.control.ControlFactory.controls[a]!="undefined"},getConfigurationMapping:function(a){return typeof zdfplayer.player.video.ui.control.ControlFactory.controls[a]=="undefined"?{}:typeof zdfplayer.player.video.ui.control.ControlFactory.controls[a].CONFIGURATION_MAPPING=="undefined"?
{}:zdfplayer.player.video.ui.control.ControlFactory.controls[a].CONFIGURATION_MAPPING},instanciate:function(a,b){if(typeof zdfplayer.player.video.ui.control.ControlFactory.controls[a]=="undefined")return null;var c=new zdfplayer.player.video.ui.control.ControlFactory.controls[a](b);$j.each(c.strategies,function(a,b){b.owner=c});return c}});namespace("zdfplayer.player.video.ui.control");
zdfplayer.player.video.ui.control.PlayPauseButton=refactored.ui.control.UIToggleButton.extend({controller:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.control.PlayPauseButton"},a))},createEventListeners:function(){this.base();var a=this;this.controller.isReady()?this.controller.stream!=null&&typeof this.controller.stream!="undefined"&&(a.setEnabled(!0),a.setSelected(a.controller.isPlaying())):this.controller.addEventListener(zdfplayer.player.Controller.READY,
function(){this.stream!=null&&typeof this.stream!="undefined"&&(a.setEnabled(!0),a.setSelected(a.controller.isPlaying()))});this.controller.addEventListener(zdfplayer.player.Controller.PLAY_STATE_CHANGED,function(){a.setSelected(a.controller.isPlaying())})},createElements:function(){this.base();this.setEnabled(!1)},doClick:function(){this.getSelected()?this.controller.pause():this.controller.play()}});zdfplayer.player.video.ui.control.ControlFactory.register("playPauseButton",zdfplayer.player.video.ui.control.PlayPauseButton);
namespace("zdfplayer.player.video.ui.control");
zdfplayer.player.video.ui.control.StopButton=refactored.ui.control.UIButton.extend({controller:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.control.StopButton",enabled:!1},a))},createEventListeners:function(){this.base();var a=this;this.controller.addEventListener(zdfplayer.player.Controller.PLAY_STATE_CHANGED,function(){a.setEnabled(!a.controller.isStopped())})},addToDOM:function(a,b){this.base(a,b);this.setEnabled(!1)},doClick:function(){this.controller.stop();
this.setEnabled(!1)}});zdfplayer.player.video.ui.control.ControlFactory.register("stopButton",zdfplayer.player.video.ui.control.StopButton);namespace("zdfplayer.player.video.ui.control");
zdfplayer.player.video.ui.control.MuteButton=refactored.ui.control.UIToggleButton.extend({controller:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.control.MuteButton"},a))},createEventListeners:function(){this.base();var a=this;this.controller.addEventListener(zdfplayer.player.Controller.MUTE_CHANGED,function(){a.setSelected(a.controller.getMuted())})},doClick:function(){this.controller.setMuted(!this.getSelected())}});
zdfplayer.player.video.ui.control.ControlFactory.register("muteButton",zdfplayer.player.video.ui.control.MuteButton);namespace("zdfplayer.player.video.ui.control");
zdfplayer.player.video.ui.control.InfoButton=refactored.ui.control.UIToggleButton.extend({controller:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.control.InfoButton",enabled:!1},a));this.controller.addEventListener(zdfplayer.player.Controller.UI_CREATED,$j.proxy(this.handleUICreated,this))},doClick:function(){this.controller.popupManager.showPopup("articleInfo")},handleUICreated:function(){this.controller.isWidgetRegistered("articleInfo")&&this.setEnabled(!0)}});
zdfplayer.player.video.ui.control.ControlFactory.register("infoButton",zdfplayer.player.video.ui.control.InfoButton);namespace("zdfplayer.player.video.ui.control");
zdfplayer.player.video.ui.control.AdjustmentButton=refactored.ui.control.UIToggleButton.extend({controller:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.control.AdjustmentButton",enabled:!1},a));this.controller.addEventListener(zdfplayer.player.Controller.UI_CREATED,$j.proxy(this.handleUICreated,this))},doClick:function(){this.controller.popupManager.showPopup("adjustment")},handleUICreated:function(){this.controller.isWidgetRegistered("adjustment")&&this.setEnabled(!0)}});
zdfplayer.player.video.ui.control.ControlFactory.register("adjustmentButton",zdfplayer.player.video.ui.control.AdjustmentButton);namespace("zdfplayer.player.video.ui.control");zdfplayer.player.video.ui.control.VideoAdjustmentButton=refactored.ui.control.UIToggleButton.extend({constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.control.VideoAdjustmentButton",enabled:!1},a))}});zdfplayer.player.video.ui.control.ControlFactory.register("videoAdjustmentButton",zdfplayer.player.video.ui.control.VideoAdjustmentButton);
namespace("zdfplayer.player.video.ui.control");zdfplayer.player.video.ui.control.RecommendButton=refactored.ui.control.UIToggleButton.extend({controller:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.control.RecommendButton",enabled:!1},a));this.controller.addEventListener(zdfplayer.player.Controller.READY,$j.proxy(this.handleControllerReady,this))},doClick:function(){this.controller.popupManager.showPopup("recommend")},handleControllerReady:function(){this.setEnabled(!0)}});
zdfplayer.player.video.ui.control.ControlFactory.register("recommendButton",zdfplayer.player.video.ui.control.RecommendButton);namespace("zdfplayer.player.video.ui.control");
zdfplayer.player.video.ui.control.DownloadButton=refactored.ui.control.UIToggleButton.extend({controller:null,hasDownloads:!1,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.control.DownloadButton",enabled:!1},a));this.controller.addEventListener(zdfplayer.player.Controller.UI_CREATED,$j.proxy(this.handleUICreated,this))},doClick:function(){this.controller.popupManager.showPopup("downloadDialog")},handleUICreated:function(){this.controller.isWidgetRegistered("downloadDialog")&&
this.controller.mediaAsset.getDownloadURLs().length>0&&this.setEnabled(!0)}});zdfplayer.player.video.ui.control.ControlFactory.register("downloadButton",zdfplayer.player.video.ui.control.DownloadButton);namespace("zdfplayer.player.video.ui.control");
zdfplayer.player.video.ui.control.TimeLabel=refactored.ui.control.UILabel.extend({controller:null,mode:"elapsedDuration",duration:0,durationSetByEvent:!1,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.control.TimeLabel"},a))},createElements:function(){this.base();this.updateTimecode()},createEventListeners:function(){this.base();var a=this;this.controller.addEventListener(zdfplayer.player.Controller.CURRENT_TIME_CHANGED,$j.proxy(this.handleCurrentTimeChanged,this));
this.controller.addEventListener(zdfplayer.player.Controller.DURATION_CHANGED,function(){a.durationSetByEvent=!0;a.duration=a.controller.getDuration();a.updateTimecode()});this.controller.addEventListener(zdfplayer.player.Controller.PLAY_STATE_CHANGED,function(b,c){c.playState==zdfplayer.player.Controller.STOP_STATE&&a.updateTimecode()})},updateTimecode:function(){this.text=refactored.utils.TimeCodeUtil.prettyFormatTimeCode(this.controller.getCurrentTime(),this.getDuration(),this.mode);this.childrenElement.text(this.text)},
getDuration:function(){return this.durationSetByEvent?this.duration:this.controller.getDuration()},handleCurrentTimeChanged:function(){this.controller.isStopped()||this.updateTimecode()}},{CONFIGURATION_MAPPING:{displayMode:"mode"}});zdfplayer.player.video.ui.control.ControlFactory.register("timeField",zdfplayer.player.video.ui.control.TimeLabel);namespace("zdfplayer.player.video.ui.control");
zdfplayer.player.video.ui.control.ScrubBar=refactored.ui.control.UISlider.extend({showTip:!0,duration:0,currentTime:0,mode:"elapsed",dataTip:null,durationSetByEvent:!1,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.control.ScrubBar"},a));this.setEnabled(!1)},createElements:function(){this.base();this.dataTip=new refactored.ui.control.UITooltip({customClass:" uiTooltip",settings:this.getTooltipSettings(),tooltip:"",isVisible:!1});this.dataTip.renderTo(this.stage.viewElement)},
getTooltipSettings:function(){var a={};a.color=refactored.ui.manager.TooltipManager.tooltipColor;a.border=refactored.ui.manager.TooltipManager.tooltipBorder;a.borderColor=refactored.ui.manager.TooltipManager.tooltipBorderColor;a.maxWidth=refactored.ui.manager.TooltipManager.maxTooltipWidth;return a},createEventListeners:function(){this.base();this.controller.addEventListener(zdfplayer.player.Controller.CURRENT_TIME_CHANGED,$j.proxy(this.handleCurrentTimeChanged,this));this.controller.addEventListener(zdfplayer.player.Controller.DURATION_CHANGED,
$j.proxy(this.handleDurationChanged,this));this.controller.addEventListener(zdfplayer.player.Controller.COMPLETE,$j.proxy(this.handleVideoCompleted,this));var a=this;this.controller.canPlay()?a.getEnabled()!=!0&&a.setEnabled(!0):this.controller.addEventListener(zdfplayer.player.Controller.CAN_PLAY,function(){a.getEnabled()!=!0&&a.setEnabled(!0)});this.controller.addEventListener(zdfplayer.player.Controller.PLAY_STATE_CHANGED,function(){a.controller.isStopped()?(a.setEnabled(!1),a.position=0,a.paint()):
a.setEnabled(!0)})},updatePosition:function(a){var b=this.getWidth()-this.thumbWidth,c=this.localToGlobal(new refactored.geometry.Point),a=Math.max(0,Math.min(b,a-c.left-this.thumbHalfWidth));this.position=a/b;this.currentTime=this.position*this.getDuration();this.updateDataTip(a);this.paint()},updateTime:function(){this.currentTime=Math.min(Math.max(0,this.getDuration()*this.position),this.getDuration());this.currentTime-=Math.max(0,0.0010);this.controller.setCurrentTime(this.currentTime)},updateDataTip:function(a){this.dataTip.setText(refactored.utils.TimeCodeUtil.prettyFormatTimeCode(this.currentTime,
this.duration,this.mode));var b=this.localToGlobal(new refactored.geometry.Point),c=this.stage.localToGlobal(new refactored.geometry.Point),a=(a||0)+this.getLeft()+this.thumbHalfWidth-this.dataTip.getWidth()/2,b=b.top-c.top-this.dataTip.getHeight()-5,c=this.dataTip.viewElement,c=parseInt(c.css("paddingTop"))+parseInt(c.css("paddingBottom"));isNaN(c)&&(c=0);this.dataTip.setLeft(a);this.dataTip.setTop(b-c)},showDataTip:function(){this.showTip&&this.dataTip.show()},hideDataTip:function(){this.dataTip.hide()},
getDuration:function(){return this.durationSetByEvent?this.duration:this.controller.getDuration()},handleCurrentTimeChanged:function(){if(!this.isScrubbing&&!this.controller.isStopped())this.currentTime=this.controller.getCurrentTime(),this.position=this.currentTime/this.getDuration()||0,this.updateDataTip(),this.paint()},handleDurationChanged:function(){if(!this.isScrubbing)this.durationSetByEvent=!0,this.duration=this.controller.getDuration()||0,this.position=this.controller.getCurrentTime()/this.duration||
0,this.paint()},handleVideoCompleted:function(){this.position=0;this.paint()},handleMouseUp:function(a){this.base(a);this.getEnabled()&&(this.hideDataTip(),this.updateTime())},handleMouseDown:function(a){this.base(a);this.getEnabled()&&(this.showDataTip(),this.updatePosition(a.clientX))}},{CONFIGURATION_MAPPING:{dataTipMode:"mode",showDataTip:"b:showTip"}});zdfplayer.player.video.ui.control.ControlFactory.register("scrubBar",zdfplayer.player.video.ui.control.ScrubBar);namespace("zdfplayer.player.video.ui.control");
zdfplayer.player.video.ui.control.VolumeSlider=refactored.ui.control.UISlider.extend({initialValue:1,backgroundColor:null,backgroundAlpha:1,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.control.VolumeSlider"},a));this.baseClass+=" volumeSlider";this.setInitialVolume()},createElements:function(){this.base();if(this.backgroundColor!=null){var a=refactored.utils.Color.hexToRGBA(this.backgroundColor,this.backgroundAlpha);this.viewElement.css("background-color",refactored.utils.String.replaceVariables("rgba({r},{g},{b},{a})",
a))}},createEventListeners:function(){this.base();this.controller.addEventListener(zdfplayer.player.Controller.VOLUME_CHANGED,$j.proxy(this.handleVolumeChanged,this));this.controller.addEventListener(zdfplayer.player.Controller.MUTE_CHANGED,$j.proxy(this.handleMutedChanged,this));this.controller.addEventListener(zdfplayer.player.Controller.READY,$j.proxy(this.handlePlayerReady,this))},updateVolume:function(){this.controller.setVolume(Math.min(Math.max(0,this.position),1))},setInitialVolume:function(){this.position=
this.initialValue=Math.min(Math.max(0,this.initialValue),1);this.paint()},handlePlayerReady:function(){this.updateVolume()},handleMutedChanged:function(){this.position=this.controller.getMuted()?0:this.controller.getVolume();this.paint()},handleVolumeChanged:function(){if(!this.controller.getMuted())this.position=this.controller.getVolume(),this.paint()},handleMouseMove:function(a){this.base(a);this.updateVolume()},handleMouseUp:function(a){this.base(a);this.controller.getMuted()&&this.controller.setMuted(!1);
this.updateVolume()}},{CONFIGURATION_MAPPING:{value:"n:initialValue"}});zdfplayer.player.video.ui.control.ControlFactory.register("volumeSlider",zdfplayer.player.video.ui.control.VolumeSlider);namespace("zdfplayer.player.video.ui.control");zdfplayer.player.video.ui.control.Button=refactored.ui.control.UIButton.extend({controller:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.control.Button"},a))}},{CONFIGURATION_MAPPING:{text:"text"}});
zdfplayer.player.video.ui.control.ControlFactory.register("button",zdfplayer.player.video.ui.control.Button);namespace("zdfplayer.player.video.ui.control");
zdfplayer.player.video.ui.control.Label=refactored.ui.control.UILabel.extend({controller:null,fontSize:null,background:!1,backgroundColor:null,textColor:null,input:!1,inputElement:null,multiline:!1,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.control.Label"},a));if(this.font){if(this.fontSize!=null&&this.fontSize!=this.font.size)this.font.size=this.fontSize;if(this.textColor!=null&&this.textColor!=this.font.color)this.font.color=this.textColor.replace("0x","#")}},
createElements:function(){this.input==!0?(refactored.ui.manager.TooltipManager.registerTooltip(this),this.inputElement=this.multiline==!0?$j("<textArea/>"):$j("<input/>"),this.inputElement.val(this.text),this.viewElement.append(this.inputElement)):this.base();if(this.background==!1)this.input==!0&&this.inputElement.css("background-color","transparent");else if(this.input==!0)this.backgroundColor!=null&&this.inputElement.css("background-color",this.backgroundColor.replace("0x","#"));else{if(this.backgroundColor==
null)this.backgroundColor="#FFFFFF";this.viewElement.css("background-color",this.backgroundColor.replace("0x","#"))}},createEventListeners:function(){this.base();this.addEventListener(refactored.ui.UIObject.RESIZED,this.handleResize)},addToDOM:function(a){this.base(a);this.handleResize(null)},handleResize:function(){this.inputElement&&(this.inputElement.css("width",this.getWidth()),this.inputElement.css("height",this.getHeight()))},setFont:function(a){this.base(a);this.input&&this.inputElement!=null&&
this.inputElement.css("font-family",a)},setFontSize:function(a){this.base(a);this.input&&this.inputElement!=null&&this.inputElement.css("font-size",a+"px")},setFontColor:function(a){this.base(a);this.input&&this.inputElement!=null&&this.inputElement.css("color",a)},setText:function(a){this.input==!0?(this.text=a,this.inputElement.val(a)):this.base(a)},getText:function(){return this.input==!0?this.inputElement.val():this.base()}},{CONFIGURATION_MAPPING:{text:"text",input:"b:input",multiline:"b:multiline",
fontSize:"n:fontSize",background:"b:background",backgroundColor:"backgroundColor",textColor:"textColor"}});zdfplayer.player.video.ui.control.ControlFactory.register("label",zdfplayer.player.video.ui.control.Label);namespace("zdfplayer.player.video.ui.control");
zdfplayer.player.video.ui.control.VolumeButton=refactored.ui.container.UIContainer.extend({sliderValue:1,sliderHeight:80,sliderWidth:25,sliderBackgroundColor:"0xFFFFFF",sliderBackgroundAlpha:0.7,volumeSliderHideTime:500,muteButton:null,volumeSlider:null,volumeSliderHideTimer:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.control.VolumeButton",layout:new refactored.ui.container.layout.UIAbsoluteLayout},a))},createChildren:function(){this.base();this.addEventListener(refactored.ui.UIObject.ADDED_CHILD,
$j.proxy(this.handleChildAdded,this));this.createVolumeSlider();this.createMuteButton()},createVolumeSlider:function(){this.volumeSlider=new zdfplayer.player.video.ui.control.VolumeSlider({controller:this.controller,stage:this.stage,trackSkin:this.trackSkin,progressTrackSkin:this.progressTrackSkin,scrubberUpSkin:this.scrubberUpSkin,scrubberDownSkin:this.scrubberDownSkin,scrubberDisabledSkin:this.scrubberDisabledSkin,backgroundColor:this.sliderBackgroundColor,backgroundAlpha:this.sliderBackgroundAlpha,
direction:"vertical"});this.addChild(this.volumeSlider);this.volumeSlider.addEventListener(refactored.ui.UIObject.MOUSE_ENTER,$j.proxy(this.handleVolumeSliderMouseenter,this));this.volumeSlider.addEventListener(refactored.ui.UIObject.MOUSE_LEAVE,$j.proxy(this.handleVolumeSliderMouseleave,this));this.volumeSlider.hide()},createMuteButton:function(){this.muteButton=new zdfplayer.player.video.ui.control.MuteButton({controller:this.controller,stage:this.stage,normalSkin:this.normalSkin,hoverSkin:this.hoverSkin,
disabledSkin:this.disabledSkin,selectedNormalSkin:this.selectedNormalSkin,selectedHoverSkin:this.selectedHoverSkin,disabledSkin:this.buttonSelectedDisabledFace,accessabilityName:this.accessabilityName});this.muteButton.addEventListener(refactored.ui.UIObject.MOUSE_ENTER,$j.proxy(this.handleMuteButtonMouseenter,this));this.muteButton.addEventListener(refactored.ui.UIObject.MOUSE_LEAVE,$j.proxy(this.handleMuteButtonMouseleave,this));this.addChild(this.muteButton)},afterAddToDOM:function(){this.setWidth(this.muteButton.getWidth());
this.setHeight(this.muteButton.getHeight());this.volumeSlider.setTop(-this.sliderHeight)},showVolumeSlider:function(){this.volumeSlider.show();if(this.volumeSlider.parent==this)this.volumeSlider.hover(),this.volumeSliderHidden=!1},hideVolumeSlider:function(){this.volumeSlider.unhover();this.volumeSlider.hide();this.volumeSliderHidden=!0},startVolumeSliderHideTimer:function(){this.volumeSliderHideTimer=setTimeout($j.proxy(this.handleVolumeSliderHideTimer,this),this.volumeSliderHideTime)},stopVolumeSliderHideTimer:function(){if(this.volumeSliderHideTimer!=
null)clearTimeout(this.volumeSliderHideTimer),this.volumeSliderHideTimer=null},handleChildAdded:function(a,b){b===this.volumeSlider&&(this.volumeSlider.setWidth(this.sliderWidth),this.volumeSlider.setHeight(this.sliderHeight))},handleMuteButtonMouseenter:function(){this.stopVolumeSliderHideTimer();this.showVolumeSlider()},handleMuteButtonMouseleave:function(){this.startVolumeSliderHideTimer()},handleVolumeSliderMouseenter:function(){this.stopVolumeSliderHideTimer()},handleVolumeSliderMouseleave:function(){this.startVolumeSliderHideTimer()},
handleVolumeSliderHideTimer:function(){this.hideVolumeSlider()}},{CONFIGURATION_MAPPING:{value:"n:sliderValue",sliderHeight:"n:sliderHeight",sliderWidth:"n:sliderWidth",sliderBackgroundColor:"sliderBackgroundColor",sliderBackgroundAlpha:"n:sliderBackgroundAlpha"}});zdfplayer.player.video.ui.control.ControlFactory.register("volumeButton",zdfplayer.player.video.ui.control.VolumeButton);namespace("zdfplayer.player.video.ui.control.");
zdfplayer.player.video.ui.control.QualitySelector=refactored.ui.container.UIContainer.extend({normalSkin:null,hoverSkin:null,disabledSkin:null,selectedNormalSkin:null,selectedHoverSkin:null,selectedDisabledSkin:null,font:null,group:null,controller:null,qualities:null,qualityMapping:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.control.QualitySelector",layout:new refactored.ui.container.layout.UIBoxLayout({direction:"vertical",gap:2,isDebugEnabled:this.isDebugEnabled})},
a))},initialize:function(){this.base();this.qualities=[];this.group=new refactored.ui.control.ToggleButtonGroup;this.qualityMapping=this.controller.configuration.getQualityMapping();var a=this.controller.mediaAsset.getStreamsByFormat(this.controller.getVideoFormat(),zdfplayer.media.Asset.FACET_PROGRESSIVE),b;for(b in a)this.qualities.push(a[b]);this.qualities.sort(function(a,b){return b.videoBitrate-a.videoBitrate})},addToDOM:function(a,b){this.base(a,b);this.createToggleButtons();if(this.controller.isReady())this.setSelectedStream(this.controller.getStream()),
this.controller.addEventListener(zdfplayer.player.Controller.STREAM_CHANGED,$j.proxy(this.handleStreamChanged,this));else{var c=this;this.controller.addEventListener(zdfplayer.player.Controller.READY,function(){c.setSelectedStream(c.controller.getStream());c.controller.addEventListener(zdfplayer.player.Controller.STREAM_CHANGED,$j.proxy(c.handleStreamChanged,c))})}},createToggleButtons:function(){if(this.qualityMapping){for(var a,b=0;b<this.qualities.length;b++)a=this.qualities[b],a=new refactored.ui.control.UIToggleButton({text:this.getLabelForBitrate(a.videoBitrate),
font:this.font,normalSkin:this.normalSkin,hoverSkin:this.hoverSkin,disabledSkin:this.disabledSkin,selectedNormalSkin:this.selectedNormalSkin,selectedHoverSkin:this.selectedHoverSkin,selectedDisabledSkin:this.selectedDisabledSkin,labelMode:"rightAside",name:this.group.name+"_button_"+b}),this.addChild(a),this.group.register(a);this.paint()}},getLabelForBitrate:function(a){for(var b,c=0;c<this.qualityMapping.length;c++){b=this.qualityMapping[c];if(b.bitrate==a)return b.label;if(b.fromBitrate<=a&&b.toBitrate>=
a)return b.label}return a},handleStreamChanged:function(a,b){b.stream!=null&&this.setSelectedStream(b.stream)},getSelectedStream:function(){var a=this.group.getSelectedIndex();return!isNaN(a)&&a>=0&&a<this.qualities.length?this.qualities[a]:null},setSelectedStream:function(a){for(var b=0;b<this.qualities.length;b++)if(a.url==this.qualities[b].url&&a.quality==this.qualities[b].quality){this.group.setSelectedIndex(b);break}}});
zdfplayer.player.video.ui.control.ControlFactory.register("qualitySelector",zdfplayer.player.video.ui.control.QualitySelector);namespace("zdfplayer.player.video.ui.control");
zdfplayer.player.video.ui.control.SocialBookmarkButton=refactored.ui.control.UIToggleButton.extend({controller:null,sharedURL:"",sharingURL:"",title:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.control.SocialBookmarkButton"},a))},doClick:function(){var a="";if(!this.sharedURL||this.sharedURL.length==0)this.sharedURL=this.controller.mediaAsset.vcmsURL||"";a=this.sharingURL.replace(zdfplayer.player.video.ui.control.SocialBookmarkButton.URL,this.sharedURL);
if(this.title.length==0)this.sharedURL=this.controller.mediaAsset.title||"";a=a.replace(zdfplayer.player.video.ui.control.SocialBookmarkButton.TITLE,this.title);window.open(a,"_blank")}},{CONFIGURATION_MAPPING:{title:"title",sharingURL:"sharingURL",sharedURL:"sharedURL"},URL:"%(URL)",TITLE:"%(TITLE)"});zdfplayer.player.video.ui.control.ControlFactory.register("socialMediaLinkButton",zdfplayer.player.video.ui.control.SocialBookmarkButton);namespace("zdfplayer.player.video.ui.control");
zdfplayer.player.video.ui.control.CaptionButton=refactored.ui.control.UIToggleButton.extend({controller:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.control.CaptionButton",enabled:!1},a));this.controller.addEventListener(zdfplayer.player.Controller.UI_CREATED,$j.proxy(this.handleUICreated,this));this.controller.addEventListener(zdfplayer.player.Controller.MEDIA_ASSET_CHANGED,$j.proxy(this.handleMediaAssetChanged,this))},doClick:function(){this.base();this.getSelected()==
!0?this.controller.enableCaptions():this.controller.disableCaptions()},updateEnabledState:function(){this.controller&&this.controller.mediaAsset?this.setEnabled(this.controller.mediaAsset.hasCaption):this.setEnabled(!1)},handleUICreated:function(){this.controller.isWidgetRegistered("caption")&&this.updateEnabledState()},handleMediaAssetChanged:function(){this.updateEnabledState()}});zdfplayer.player.video.ui.control.ControlFactory.register("captionButton",zdfplayer.player.video.ui.control.CaptionButton);
namespace("zdfplayer.player.video.ui.control");
zdfplayer.player.video.ui.control.MediathekButton=refactored.ui.control.UIButton.extend({contentURLBase:null,target:"_blank",controller:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.control.MediathekButton"},a))},doClick:function(){this.base();var a=this.controller.mediaAsset.id,b="";a&&a.length>0?(b=this.contentURLBase&&this.contentURLBase.length>0?this.contentURLBase+a:zdfplayer.player.video.ui.control.MediathekButton.DEFAULT_MEDIATEK_CONTENT_URL,this.controller.getCurrentTime()>
0&&(b+="?setTime="+this.controller.getCurrentTime())):b=zdfplayer.player.video.ui.control.MediathekButton.MEDIATEK_BASE_URL;this.controller.pause();window.open(b,this.target)}},{CONFIGURATION_MAPPING:{contentURLBase:"contentURLBase",target:"target"},MEDIATEK_BASE_URL:"http://www.zdf.de/ZDFmediathek",DEFAULT_MEDIATEK_CONTENT_URL:"http://www.zdf.de/ZDFmediathek/content/"});zdfplayer.player.video.ui.control.ControlFactory.register("mediathekFullScreenButton",zdfplayer.player.video.ui.control.MediathekButton);
namespace("zdfplayer.player.video.ui.control");
zdfplayer.player.video.ui.control.FullscreenButton=refactored.ui.control.UIToggleButton.extend({constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.control.FullscreenButton",enabled:!1},a))},createEventListeners:function(){this.base();var a=this;this.controller.addEventListener(zdfplayer.player.Controller.FULLSCREEN_CHANGED,function(){a.setSelected(a.controller.getFullScreenMode())})},addToDOM:function(a,b){this.base(a,b);this.setEnabled(this.controller.configuration.fullScreenAvailable)},
doClick:function(){this.base();this.controller.toggleFullscreen(!this.getSelected())}});zdfplayer.player.video.ui.control.ControlFactory.register("fullScreenButton",zdfplayer.player.video.ui.control.FullscreenButton);namespace("zdfplayer.player.video.ui.control");
zdfplayer.player.video.ui.control.PrivacyButton=refactored.ui.control.UIButton.extend({privacyURL:null,target:"_blank",controller:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.control.PrivacyButton"},a))},doClick:function(){this.base();var a="",a=this.privacyURL&&this.privacyURL.length>0?this.privacyURL:zdfplayer.player.video.ui.control.PrivacyButton.DEFAULT_PRIVACY_URL;this.controller.pause();window.open(a,this.target)}},{CONFIGURATION_MAPPING:{privacyURL:"privacyURL",
target:"target"},DEFAULT_PRIVACY_URL:"http://www.zdf.de/Hinweise-zum-Datenschutz-21533138.html"});zdfplayer.player.video.ui.control.ControlFactory.register("privacyButton",zdfplayer.player.video.ui.control.PrivacyButton);namespace("zdfplayer.player.video.ui.control");
zdfplayer.player.video.ui.control.Preloader=refactored.ui.container.UIContainer.extend({containerWidth:null,containerHeight:null,finished:!1,url:"",preloaderImage:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.control.Preloader",layout:new refactored.ui.container.layout.UIAbsoluteLayout,name:"preloader"},a))},createChildren:function(){this.base();var a={url:this.url,autoWidth:!0,autoHeight:!0,layoutOptions:new refactored.ui.container.layout.UIAbsoluteLayoutOptions({verticalAlignment:refactored.geometry.VerticalAlignment.MIDDLE,
horizontalAlignment:refactored.geometry.HorizontalAlignment.CENTER})};this.preloaderImage=new refactored.ui.control.UIImage(a);this.addChild(this.preloaderImage)},handleResize:function(a){this.base(a);if(this.finished!==!0&&!(this.viewElement.width()==0||this.parentElement.height()==0))this.show(),this.finished=!0},hide:function(){this.finished=!0;this.base()}});namespace("zdfplayer.player.video.ui.control");
zdfplayer.player.video.ui.control.NativeAlert=refactored.ui.container.UIContainer.extend({alert:null,alertContainer:null,messageLabel:null,captionLabel:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.control.NativeAlert",layout:new refactored.ui.container.layout.UIAbsoluteLayout,name:"nativeAlert"},a))},createViewElement:function(){this.base();this.hide()},createChildren:function(){this.base();var a={autoWidth:!0,autoHeight:!0,customClass:"nativeAlert",layoutOptions:new refactored.ui.container.layout.UIAbsoluteLayoutOptions({verticalAlignment:refactored.geometry.VerticalAlignment.MIDDLE,
horizontalAlignment:refactored.geometry.HorizontalAlignment.CENTER})};this.alertContainer=new refactored.ui.container.UIContainer(a);this.addChild(this.alertContainer);this.messageLabel=new zdfplayer.player.video.ui.control.Label({name:"messageLabel",top:34,bottom:10,left:"15",right:"15",multiline:!0});this.alertContainer.addChild(this.messageLabel);this.captionLabel=new zdfplayer.player.video.ui.control.Label({name:"captionLabel",top:10,left:"15",right:"15"});this.alertContainer.addChild(this.captionLabel)},
alertMessage:function(a,b){this.messageLabel!=null&&this.messageLabel.setText(b);this.captionLabel!=null&&this.captionLabel.setText(a);this.show()}});namespace("zdfplayer.player.video.ui.control");
zdfplayer.player.video.ui.control.AlertDialog=refactored.ui.container.UIContainer.extend({controller:null,captionLabel:null,messageLabel:null,messagePipe:null,resumeOnHide:!0,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.control.AlertDialog",layout:new refactored.ui.container.layout.UIAbsoluteLayout},a));this.messagePipe=[]},createEventListeners:function(){this.base();this.addEventListener(refactored.ui.UIObject.ADDED_CHILD,$j.proxy(this.handleChildAdded,this))},
createViewElement:function(){this.base();this.viewElement.addClass("dropShadow");this.hide()},setCaption:function(a){this.captionLabel!=null&&this.captionLabel.setText(a)},setMessage:function(a){this.messageLabel!=null&&this.messageLabel.setText(a)},isOccupied:function(){if(this.messageLabel&&this.messageLabel.getText()!="")return!0;else if(this.captionLabel&&this.captionLabel.getText()!="")return!0;return!1},nextMessage:function(){var a=this.messagePipe.pop();this.setMessage(a.message);this.setCaption(a.caption)},
handleChildAdded:function(a,b){switch(b.name){case "closeButton":b.addEventListener(refactored.ui.control.UIButton.EXECUTE,$j.proxy(this.handleCloseButtonExcute,this));break;case "captionLabel":this.captionLabel=b;break;case "messageLabel":this.messageLabel=b}this.captionLabel&&this.messageLabel&&this.messagePipe.length>0&&(this.show(),this.nextMessage())},handleCloseButtonExcute:function(){this.messagePipe.length==0?(this.setMessage(""),this.setCaption(""),this.hide()):this.nextMessage()},hide:function(a){this.base(a);
this.lastPlayState===!0&&this.controller!=null&&this.controller.play();this.lastPlayState=null},show:function(a){this.base(a);if(this.controller!=null)this.lastPlayState=this.controller.isPlaying(),this.controller.pause()},alertMessage:function(a,b){!this.captionLabel&&!this.messageLabel?this.messagePipe.push({caption:a,message:b}):this.isOccupied()?this.messagePipe.push({caption:a,message:b}):(this.show(),this.setCaption(a),this.setMessage(b))}});
zdfplayer.player.video.ui.control.ControlFactory.register("alert",zdfplayer.player.video.ui.control.AlertDialog);namespace("zdfplayer.player.video.ui");
zdfplayer.player.video.ui.BufferNotifier=refactored.ui.container.UIContainer.extend({controller:null,loaderAnimation:null,animationID:"",constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.BufferNotifier",layout:new refactored.ui.container.layout.UIAbsoluteLayout},a))},createChildren:function(){this.base();var a=new refactored.ui.container.layout.UIAbsoluteLayoutOptions({verticalAlignment:refactored.geometry.VerticalAlignment.MIDDLE,horizontalAlignment:refactored.geometry.HorizontalAlignment.CENTER}),
a={url:this.getAnimationURL(),autoWidth:!0,autoHeight:!0,layoutOptions:a};this.image=new refactored.ui.control.UIImage(a);this.addChild(this.image)},createEventListeners:function(){this.base();this.controller.addEventListener(zdfplayer.player.Controller.WAITING,$j.proxy(this.handleWaiting,this));this.controller.addEventListener(zdfplayer.player.Controller.PROGRESS,$j.proxy(this.handleProgress,this));this.controller.addEventListener(zdfplayer.player.Controller.PLAY_STATE_CHANGED,$j.proxy(this.handlePlayStateChanged,
this));this.controller.addEventListener(zdfplayer.player.Controller.CURRENT_TIME_CHANGED,$j.proxy(this.handleCurrentTimeChanged,this))},addToDOM:function(a){this.base(a);this.hideBuffer()},getAnimationURL:function(){if(this.animationID.length>0){var a=this.controller.configuration;if(a)return a.getAssetURLById(this.animationID)||""}return""},showBuffer:function(){var a=this;setTimeout(function(){a.buffering&&a.viewElement.css("visibility","visible")},500)},hideBuffer:function(){this.viewElement.css("visibility",
"hidden");this.buffering=!1},handleWaiting:function(){if(!this.controller.isStopped())this.buffering=!0,this.showBuffer()},handleProgress:function(a,b){switch(b.state){case 3:case 4:this.hideBuffer()}},handleCurrentTimeChanged:function(){this.controller.getReadyState()>=3&&this.hideBuffer()},handlePlayStateChanged:function(a,b){b.playState==zdfplayer.player.Controller.STOP_STATE&&this.hideBuffer()}},{CONFIGURATION_MAPPING:{animation:"animationID"}});
zdfplayer.player.video.ui.control.ControlFactory.register("bufferNotifier",zdfplayer.player.video.ui.BufferNotifier);namespace("zdfplayer.player.video.ui.container");
zdfplayer.player.video.ui.container.StartImage=refactored.ui.container.UIContainer.extend({url:null,alt:null,fixedURL:null,key:null,imageWidth:null,imageHeight:null,imagePercentWidth:null,imagePercentHeight:null,hideImageWhilePlayback:!0,image:null,initialStartImageUrl:"",constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.StartImage",layout:new refactored.ui.container.layout.UIAbsoluteLayout},a))},initialize:function(){this.base();this.initialStartImageUrl=this.controller.configuration.getSettingById("startImageURL",
"")},createChildren:function(){this.base();var a=new refactored.ui.container.layout.UIAbsoluteLayoutOptions({verticalAlignment:refactored.geometry.VerticalAlignment.MIDDLE,horizontalAlignment:refactored.geometry.HorizontalAlignment.CENTER}),b={url:this.fixedURL||this.url,autoWidth:!1,autoHeight:!1,layoutOptions:a,isVisible:!1,alt:this.alt};this.imagePercentWidth?a.percentWidth=this.imagePercentWidth:this.imageWidth?b.width=this.imageWidth:b.autoWidth=!0;this.imagePercentHeight?a.percentHeight=this.imagePercentHeight:
this.imageHeight?b.height=this.imageHeight:b.autoHeight=!0;this.image=new refactored.ui.control.UIImage(b);this.addChild(this.image)},createEventListeners:function(){this.base();this.controller.addEventListener(zdfplayer.player.Controller.READY,$j.proxy(this.handleControllerReady,this));this.controller.addEventListener(zdfplayer.player.Controller.MEDIA_ASSET_CHANGED,$j.proxy(this.handleMediaAssetChanged,this));this.hideImageWhilePlayback&&this.controller.addEventListener(zdfplayer.player.Controller.PLAY_STATE_CHANGED,
$j.proxy(this.handlePlayStateChanged,this))},updateImage:function(){this.initialStartImageUrl.length>0?(this.image.setUrl(this.initialStartImageUrl),this.initialStartImageUrl=""):(this.url=this.controller.mediaAsset.getTeaserImageByFormat(this.key||this.controller.configuration.teaserImageDefaultKey),this.image.setUrl(this.url),this.alt=this.controller.mediaAsset.getTeaserImageAltByFormat(this.key||this.controller.configuration.teaserImageDefaultKey),this.image.setAlt(this.alt));this.image.show()},
handleControllerReady:function(){this.controller.removeEventListener(zdfplayer.player.Controller.READY,this.handleControllerReady);this.updateImage()},handleMediaAssetChanged:function(){this.fixedURL||this.updateImage()},handlePlayStateChanged:function(a,b){switch(b.playState){case zdfplayer.player.Controller.PLAY_STATE:this.hide();break;case zdfplayer.player.Controller.STOP_STATE:this.show()}}},{CONFIGURATION_MAPPING:{imageKey:"key",imageURL:"fixedURL",imageWidth:"n:imageWidth",imageHeight:"n:imageHeight",
imagePercentWidth:"n:imagePercentWidth",imagePercentHeight:"n:imagePercentHeight",hideImageWhilePlayback:"b:hideImageWhilePlayback"}});zdfplayer.player.video.ui.control.ControlFactory.register("startImage",zdfplayer.player.video.ui.container.StartImage);namespace("zdfplayer.player.video.ui.control");
zdfplayer.player.video.ui.container.OverlayPlayButton=refactored.ui.container.UIContainer.extend({controller:null,button:null,mouseOnTarget:!1,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.container.OverlayPlayButton",layout:new refactored.ui.container.layout.UIAbsoluteLayout},a))},createChildren:function(){this.base();var a={layoutOptions:new refactored.ui.container.layout.UIAbsoluteLayoutOptions({verticalAlignment:refactored.geometry.VerticalAlignment.MIDDLE,
horizontalAlignment:refactored.geometry.HorizontalAlignment.CENTER}),normalSkin:this.normalSkin,hoverSkin:this.hoverSkin,disabledSkin:this.disabledSkin,enabled:!1,accessabilityName:this.accessabilityName};this.button=new refactored.ui.control.UIButton(a);this.addChild(this.button)},createEventListeners:function(){this.base();var a=this;this.controller.addEventListener(zdfplayer.player.Controller.READY,function(){this.stream!=null&&typeof this.stream!="undefined"&&a.button.setEnabled(!0);a.button.addEventListener(refactored.ui.control.UIButton.EXECUTE,
$j.proxy(a.handleButtonClick,a));a.controller.addEventListener(zdfplayer.player.Controller.PLAY_STATE_CHANGED,$j.proxy(a.handlePlayStateChanged,a))})},addToDOM:function(a){this.base(a);this.button.hide()},update:function(){!this.controller.isPlaying()&&this.mouseOnTarget?this.button.show():this.button.hide()},handleButtonClick:function(){this.controller.play();this.button.hide()},handlePlayStateChanged:function(a,b){b.playState==zdfplayer.player.Controller.PLAY_STATE?this.hide():b.playState==zdfplayer.player.Controller.STOP_STATE&&
this.show();this.update()},handleMouseenter:function(a){this.base(a);this.mouseOnTarget=!0;this.update()},handleMouseleave:function(a){this.base(a);this.mouseOnTarget=!1;this.update()}});zdfplayer.player.video.ui.control.ControlFactory.register("overlayPlayButton",zdfplayer.player.video.ui.container.OverlayPlayButton);namespace("zdfplayer.player.video.ui.container");
zdfplayer.player.video.ui.container.ContextMenuOverlay=refactored.ui.container.UIContainer.extend({controller:null,versionDetails:!1,scaleOptions:!0,menuID:null,currentMode:null,modes:[refactored.ui.control.UIVideo.LETTERBOX,refactored.ui.control.UIVideo.ZOOM,refactored.ui.control.UIVideo.NONE],constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.ContextMenuOverlay",layout:new refactored.ui.container.layout.UIAbsoluteLayout},a));this.menuID="menu_"+Math.round(Math.random()*
1E5)},createEventListeners:function(){this.base();var a=this;this.controller.addEventListener(zdfplayer.player.Controller.READY,function(){a.viewElement.disableContextMenuItems("#"+a.controller.getScaleMode());a.currentMode=a.controller.getScaleMode()});this.controller.addEventListener(zdfplayer.player.Controller.SCALE_MODE_CHANGED,function(b,c){if(a.currentMode!=c.scaleMode)a.currentMode=c.scaleMode,a.viewElement.enableContextMenuItems(null),a.viewElement.disableContextMenuItems("#"+c.scaleMode)})},
createMenu:function(){var a=$j('<ul id="'+this.menuID+'" class="contextMenu">');if(this.versionDetails){var b=this.controller.configuration.getTextById("htmlVersionInfo"),b=b.replace("%(VERSION)",zdfplayer.Version.VERSION);a.append('<li><a href="#'+this.objectId+'">'+b+"</a></li>")}if(this.scaleOptions){b=this.controller.configuration.getTextById("scaleMode");b.length>0&&(b+=":");this.versionDetails&&a.append('<li class="cut separator"></li>');for(var c=0;c<this.modes.length;c++)a.append('<li><a href="#'+
this.modes[c]+'">'+b+" "+this.modes[c]+"</a></li>")}this.viewElement.append(a);this.viewElement.contextMenu({menu:this.menuID},$j.proxy(this.handleContextMenuClicked,this));this.viewElement.disableContextMenuItems("#"+this.controller.getScaleMode())},addToDOM:function(a){this.base(a);(this.versionDetails===!0||this.scaleOptions===!0)&&this.createMenu()},handleContextMenuClicked:function(a){if(this.modes.indexOf(a)!=-1)this.currentMode=a,this.viewElement.enableContextMenuItems(null),this.viewElement.disableContextMenuItems("#"+
a),this.controller.setScaleMode(a)}},{CONFIGURATION_MAPPING:{versionDetails:"b:versionDetails",scaleOptions:"b:scaleOptions"}});zdfplayer.player.video.ui.control.ControlFactory.register("contextMenuOverlay",zdfplayer.player.video.ui.container.ContextMenuOverlay);namespace("zdfplayer.player.video.ui.container");
zdfplayer.player.video.ui.container.PopupContainer=refactored.ui.container.UIContainer.extend({constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.PopupContainer",layout:new refactored.ui.container.layout.UIAbsoluteLayout,isVisible:!1},a))},createEventListeners:function(){this.base();this.addEventListener(refactored.ui.UIObject.ADDED_CHILD,$j.proxy(this.handleChildAdded,this))},handleChildAdded:function(a,b){b.hide()},hide:function(a){this.base(a);this.viewElement.addClass("invisible");
this.viewElement.removeClass("apparent")},show:function(a){this.base(a);this.viewElement.addClass("apparent");this.viewElement.removeClass("invisible")},setModal:function(){}});zdfplayer.player.video.ui.control.ControlFactory.register("popupContainer",zdfplayer.player.video.ui.container.PopupContainer);namespace("zdfplayer.player.video.ui.container");
zdfplayer.player.video.ui.container.Stage=refactored.ui.container.UIContainer.extend({controller:null,controllerReady:!1,normalVideoWidth:null,normalVideoHeight:null,fullScreenVideoWidth:null,fullScreenVideoHeight:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.container.Stage"},a))},createEventListeners:function(){this.base();this.viewElement.bind("mousemove",$j.proxy(this.handleMousemove,this));this.controller&&(this.controller.addEventListener(zdfplayer.player.Controller.TOGGLE_FULLSCREEN,
$j.proxy(this.handleToggleFullScreen,this)),this.controller.addEventListener(zdfplayer.player.Controller.FULLSCREEN_CHANGED,$j.proxy(this.handleFullScreenChanged,this)))},handleControllerReady:function(){this.controllerReady=!0},handleClick:function(a){this.controllerReady&&$j(a.target).is("video")&&(this.controller.isPlaying()?this.controller.pause():this.controller.play())},handleMousemove:function(){this.dispatchEvent(refactored.ui.UIObject.MOUSE_MOVE)},handleToggleFullScreen:function(a,b){if(!b&&
(this.normalScreenVideoWidth=this.controller.video.getWidth(),this.normalScreenVideoHeight=this.controller.video.getHeight(),this.normalVideoScaleMode=this.controller.video.getScaleMode(),$j.browser.webkit))this.normalLeft=this.getLeft(),this.normalTop=this.getTop(),this.normalWidth=this.getWidth(),this.normalHeight=this.getHeight();this.viewElement.toggleFullScreen()},handleFullScreenChanged:function(){$j(document).fullScreen()==this.viewElement[0]?(this.fullScreenVideoWidth=window.innerWidth,this.fullScreenVideoHeight=
window.innerHeight,$j.browser.webkit&&(this.setLeft(0),this.setTop(0),this.setWidth(window.innerWidth),this.setHeight(window.innerHeight)),this.controller.video.setWidth(window.innerWidth),this.controller.video.setHeight(window.innerHeight),this.controller.video.setScaleMode(refactored.ui.control.UIVideo.STRETCH)):(this.controller.video.setWidth(this.normalScreenVideoWidth),this.controller.video.setHeight(this.normalScreenVideoHeight),this.controller.video.setScaleMode(this.normalVideoScaleMode),
$j.browser.webkit&&(this.setLeft(this.normalLeft),this.setTop(this.normalTop),this.setWidth(this.normalWidth),this.setHeight(this.normalHeight)))}});namespace("zdfplayer.player.video.ui.container");
zdfplayer.player.video.ui.container.ButtonLayer=refactored.ui.container.UIContainer.extend({controller:null,normalSkin:null,hoverSkin:null,disabledSkin:null,buttons:[],scrollSpeed:5,scrollSensitivity:50,font:null,interval:null,buttonContainer:null,direction:null,gap:1,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.container.ButtonLayer",layout:new refactored.ui.container.layout.UIBoxLayout({direction:"horizontal"})},a));this.scrollSpeed=Math.max(Math.min(this.scrollSpeed,
1),10);this.scrollSensitivity=Math.max(Math.min(this.scrollSensitivity,5),100)},addToDOM:function(a){this.base(a);this.createButtons()},createButtons:function(){},cleanUp:function(){if(this.buttons.length>0){this.buttonContainer.setLeft(0);this.buttonContainer.removeAllChildren();for(var a=0;a<this.buttons.length;a++)this.buttons[a].destroy();this.buttons=[]}},scroll:function(){var a=this.buttonContainer.getLeft();if(this.direction=="right"){var b=this.getWidth()-this.buttonContainer.getWidth();a>
b&&(a=Math.max(a-this.scrollSpeed,b),this.buttonContainer.setLeft(a))}else this.direction=="left"&&a<0&&(a=Math.min(a+this.scrollSpeed,0),this.buttonContainer.setLeft(a))},detectScrolling:function(a){if(a>=0&&a<=this.scrollSensitivity){if(this.direction="left",!this.interval)this.interval=setInterval($j.proxy(this.scroll,this),40)}else if(a<=this.getWidth()&&a>=this.getWidth()-this.scrollSensitivity){if(this.direction="right",!this.interval)this.interval=setInterval($j.proxy(this.scroll,this),40)}else if(this.interval)clearInterval(this.interval),
this.interval=this.direction=null},handleMouseMove:function(a){this.detectScrolling(a.clientX)},handleMouseenter:function(a){this.base();this.detectScrolling(a.clientX);this.viewElement.bind("mousemove",$j.proxy(this.handleMouseMove,this))},handleMouseleave:function(){this.base();this.viewElement.unbind("mousemove",this.handleMouseMove);if(this.interval)clearInterval(this.interval),this.interval=this.direction=null}},{CONFIGURATION_MAPPING:{scrollSpeed:"n:scrollSpeed",scrollSensitivity:"n:scrollSensitivity"}});
namespace("zdfplayer.player.video.ui.container.popup");
zdfplayer.player.video.ui.container.CaptionLayer=refactored.ui.container.UIContainer.extend({controller:null,captionLabel:null,captionLabelDefaultFontSize:null,magnificationFactor:1,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.container.CaptionLayer",layout:new refactored.ui.container.layout.UIAbsoluteLayout},a))},createEventListeners:function(){this.base();this.addEventListener(refactored.ui.UIObject.ADDED_CHILD,$j.proxy(this.handleChildAdded,this));this.controller.captionManager.addEventListener(zdfplayer.player.video.caption.CaptionManager.CAPTION_BEGIN,
$j.proxy(this.handleCaptionBegin,this));this.controller.captionManager.addEventListener(zdfplayer.player.video.caption.CaptionManager.CAPTION_END,$j.proxy(this.handleCaptionEnd,this));this.controller.addEventListener(zdfplayer.player.Controller.FULLSCREEN_CHANGED,$j.proxy(this.handleFullScreenChanged,this));var a=this;this.controller.addEventListener(zdfplayer.player.video.caption.CaptionManager.ENABLE,function(b,c){c.enabled==!0?a.show():a.hide()})},addToDOM:function(a){this.base(a);this.hide()},
calculateMagnificationFactor:function(){return Math.min(Math.max(Math.floor(this.stage.fullScreenVideoWidth/this.stage.normalScreenVideoWidth),Math.floor(this.stage.fullScreenVideoHeight/this.stage.normalScreenVideoHeight)),3)},magnifyText:function(){var a=this.captionLabelDefaultFontSize;a*=this.magnificationFactor;this.captionLabel.setFontSize(a)},handleChildAdded:function(a,b){if(b.name=="captionLabel")this.captionLabel=b,this.captionLabel.html=!0,this.captionLabelDefaultFontSize=this.captionLabel.getFontSize()},
handleCaptionBegin:function(a,b){this.captionLabel!=null&&(this.captionLabel.setText(b.text),this.magnifyText())},handleCaptionEnd:function(){this.captionLabel!=null&&this.captionLabel.setText("")},handleFullScreenChanged:function(a,b){b?(this.magnificationFactor=this.calculateMagnificationFactor(),this.magnifyText(),this.setHeight(this.height*this.magnificationFactor)):(this.setHeight(this.height/this.magnificationFactor),this.magnificationFactor=1,this.magnifyText())}});
zdfplayer.player.video.ui.control.ControlFactory.register("caption",zdfplayer.player.video.ui.container.CaptionLayer);namespace("zdfplayer.player.video.ui.container");
zdfplayer.player.video.ui.container.CuepointLayer=zdfplayer.player.video.ui.container.ButtonLayer.extend({cuepoints:[],constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.container.CuepointLayer"},a));this.buttons=[]},createChildren:function(){this.base();this.cuepoints=this.controller.mediaAsset.getCuepoints()},createEventListeners:function(){this.base();this.controller.addEventListener(zdfplayer.player.Controller.MEDIA_ASSET_CHANGED,$j.proxy(this.handleMediaAssetChanged,
this));this.controller.addEventListener(zdfplayer.player.Controller.PLAY_STATE_CHANGED,$j.proxy(this.handlePlayStateChanged,this));this.controller.addEventListener(zdfplayer.player.Controller.FULLSCREEN_CHANGED,$j.proxy(this.handleFullScreenChanged,this))},createButtons:function(){this.base();if(this.cuepoints&&!(this.cuepoints&&this.cuepoints.length==0)){if(this.buttonContainer==null)this.buttonContainer=new refactored.ui.container.UIContainer({layout:new refactored.ui.container.layout.UIBoxLayout({horizontal:"horizontal",
gap:this.gap}),isDebugEnabled:this.isDebugEnabled,name:"cuepointButtonContainer"}),this.addChild(this.buttonContainer);for(var a,b=0;b<this.cuepoints.length;b++)a={layoutOptions:new refactored.ui.container.layout.UIAbsoluteLayoutOptions({verticalAlignment:refactored.geometry.VerticalAlignment.MIDDLE}),normalSkin:this.normalSkin,hoverSkin:this.hoverSkin,disabledSkin:this.disabledSkin,text:this.cuepoints[b].text,font:this.font,name:"cuepoint_button_"+b},a=new refactored.ui.control.UIButton(a),a.addEventListener(refactored.ui.UIObject.CLICK,
$j.proxy(this.handleCuepointButtonClicked,this)),this.buttonContainer.addChild(a),this.buttons.push(a)}},cleanUp:function(){if(this.buttons.length>0)for(var a=0;a<this.buttons.length;a++)this.buttons[a].removeEventListener(refactored.ui.UIObject.CLICK,this.handleCuepointButtonClicked);this.base();this.buttons=[]},calculateMagnificationFactor:function(){return Math.min(Math.max(Math.floor(this.stage.fullScreenVideoWidth/this.stage.normalScreenVideoWidth),Math.floor(this.stage.fullScreenVideoHeight/
this.stage.normalScreenVideoHeight)),3)},magnifyButtons:function(){for(var a=0;a<this.buttons.length;a++)this.buttons[a].magnify(this.magnificationFactor)},handleCuepointButtonClicked:function(a){a=this.buttons.indexOf(a.target);a!=-1&&this.controller.seek(this.cuepoints[a].time/1E3)},handleMediaAssetChanged:function(){this.cleanUp();this.cuepoints=this.controller.mediaAsset.getCuepoints();this.createButtons()},handlePlayStateChanged:function(a,b){this.buttonContainer!=null&&typeof buttonContainer!=
"undefined"&&b.playState==zdfplayer.player.Controller.STOP_STATE&&this.buttonContainer.setLeft(0)},handleFullScreenChanged:function(a,b){this.magnificationFactor=b?this.calculateMagnificationFactor():1;this.magnifyButtons()}},{CONFIGURATION_MAPPING:{scrollSpeed:"n:scrollSpeed",scrollSensitivity:"n:scrollSensitivity",gap:"n:gap"}});zdfplayer.player.video.ui.control.ControlFactory.register("cuepoint",zdfplayer.player.video.ui.container.CuepointLayer);namespace("zdfplayer.player.video.ui.container");
zdfplayer.player.video.ui.container.AssetListLayer=zdfplayer.player.video.ui.container.ButtonLayer.extend({assets:null,playlistManager:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.container.AssetListLayer"},a));this.buttons=[];this.assets=[];this.playlistManager=this.controller.playlistManager},createChildren:function(){this.base();if(this.playlistManager.playlist!=null&&this.playlistManager.playlist.instanceOf(zdfplayer.media.playlist.DefaultPlaylist)==
!1)this.assets=this.playlistManager.playlist.getEntries()},createEventListeners:function(){this.base();this.playlistManager.addEventListener(zdfplayer.media.playlist.PlaylistManager.CHANGE_MEDIA,$j.proxy(this.handleMediaChange,this));this.playlistManager.addEventListener(zdfplayer.media.playlist.PlaylistManager.PLAYLIST_CHANGED,$j.proxy(this.handlePlaylistChanged,this));this.playlistManager.addEventListener(zdfplayer.media.playlist.PlaylistManager.LOOP,$j.proxy(this.handlePlaylistLoop,this))},createButtons:function(){if(this.assets&&
!(this.assets&&this.assets.length==0)){if(this.buttonContainer==null)this.buttonContainer=new refactored.ui.container.UIContainer({layout:new refactored.ui.container.layout.UIBoxLayout({horizontal:"horizontal",gap:this.gap,isDebugEnabled:this.isDebugEnabled}),isDebugEnabled:this.isDebugEnabled,name:"cuepointButtonContainer"}),this.addChild(this.buttonContainer);for(var a,b=0;b<this.assets.length;b++)a={layoutOptions:new refactored.ui.container.layout.UIAbsoluteLayoutOptions({verticalAlignment:refactored.geometry.VerticalAlignment.MIDDLE}),
normalSkin:this.normalSkin,hoverSkin:this.hoverSkin,disabledSkin:this.disabledSkin,selectedNormalSkin:this.selectedNormalSkin,selectedHoverSkin:this.selectedHoverSkin,selectedDisabledSkin:this.selectedDisabledSkin,text:this.assets[b].payload.title,font:this.font,name:"asset_button_"+b,isDebugEnabled:this.isDebugEnabled},a=new refactored.ui.control.UIToggleButton(a),a.addEventListener(refactored.ui.control.UIButton.EXECUTE,$j.proxy(this.handleAssetButtonClicked,this)),this.buttonContainer.addChild(a),
b==this.playlistManager.getIndex()&&a.setSelected(!0),this.buttons.push(a),this.show()}},cleanUp:function(){this.playlistManager&&this.playlistManager.removeEventListener(zdfplayer.media.playlist.Playlist.READY,this.handlePlaylistReady);for(var a=0;a<this.buttons.length;a++)this.buttons[a].removeEventListener(refactored.ui.UIObject.CLICK,this.handleAssetButtonClicked);this.base();this.buttons=[];this.assets=[];this.hide()},handleAssetButtonClicked:function(a){this.playlistManager.setIndex(this.buttons.indexOf(a.target))},
handleMediaChange:function(a,b){this.log("index changed from",b.oldIndex,"to",b.index);for(var c=0;c<this.assets.length;c++)this.buttons[c].setSelected(b.index==c)},handlePlaylistReady:function(a,b){b.playlist.getEntries();this.assets=b.playlist.getEntries();this.createButtons()},handlePlaylistChanged:function(a,b){this.cleanUp();b.playlist!=null&&(b.playlist.isReady()?this.handlePlaylistReady(a,b):this.playlistManager.addEventListener(zdfplayer.media.playlist.Playlist.READY,$j.proxy(this.handlePlaylistReady,
this)))},handlePlaylistLoop:function(){this.buttonContainer.setLeft(0)}},{CONFIGURATION_MAPPING:{scrollSpeed:"n:scrollSpeed",scrollSensitivity:"n:scrollSensitivity",gap:"n:gap"}});zdfplayer.player.video.ui.control.ControlFactory.register("articleList",zdfplayer.player.video.ui.container.AssetListLayer);namespace("zdfplayer.player.video.ui.container");
zdfplayer.player.video.ui.container.RecommendationLayer=refactored.ui.container.UIContainer.extend({controller:null,font:null,recommendations:null,recommendationItems:null,imageKey:"94x65",names:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.container.RecommendationLayer",layout:new refactored.ui.container.layout.UIAbsoluteLayout},a));this.recommendationItems=[];this.names=["first","second","third"]},addToDOM:function(a){this.base(a);this.hide()},createEventListeners:function(){var a=
this;this.controller.playlistManager&&this.controller.playlistManager.addEventListener(zdfplayer.media.playlist.PlaylistManager.COMPLETE,$j.proxy(this.handlePlaylistComplete,this));this.controller.addEventListener(zdfplayer.player.Controller.COMPLETE,$j.proxy(this.handleMediaComplete,this));this.controller.addEventListener(zdfplayer.player.Controller.PLAY_STATE_CHANGED,function(b,c){c.playState==zdfplayer.player.Controller.PLAY_STATE&&a.hide()})},determineRecommendationItems:function(){if(this.recommendationItems==
null)this.recommendationItems=[];for(var a,b=["first","second","third"],c=0;c<b.length;c++)if(a=this.getChildByName(b[c]+"RecommendationItem",!0))this.recommendationItems.push(a),a.addEventListener(refactored.ui.UIObject.CLICK,$j.proxy(this.handleRecommendationItemClicked,this))},getRecommendations:function(){(!this.recommendationItems||this.recommendationItems&&this.recommendationItems.length==0)&&this.determineRecommendationItems();if(this.recommendationItems.length!=0){var a=this;this.controller.mediaAsset.getRecommendations(function(b){a.log("Received recommendations");
if(a.recommendations==null)a.recommendations=b,a.renderRecommendation();a.show()},function(b){a.log("Error while loading recommendation: "+b)})}},renderRecommendation:function(){var a=Math.min(this.recommendations.length,this.recommendationItems.length),b,c;if(a.length!=0)for(var d=0;d<a;d++)b=this.recommendationItems[d],c=this.recommendations[d],b.setTitle(c.title),b.setDescription(c.description),c=$j("teaserlist > teasers > teaser > teaserimages > teaserimage[key="+this.imageKey+"]",c.xml).slice(d),
c!=null&&b.addImage(c.text())},handleRecommendationItemClicked:function(a){for(var b=-1,c=0;c<this.names.length;c++)if(a.target.name.indexOf(this.names[c])!=-1){b=c;break}b>=0&&this.controller.strictlyChangeArticle(this.recommendations[b].id);this.hide()},handlePlaylistComplete:function(){this.getRecommendations()},handleMediaComplete:function(){this.controller.getPlaylistMode()==!1&&this.controller.getLoop()==!1&&this.getRecommendations()}},{CONFIGURATION_MAPPING:{imageKey:"s:imageKey"}});
zdfplayer.player.video.ui.control.ControlFactory.register("recommendationLayer",zdfplayer.player.video.ui.container.RecommendationLayer);namespace("zdfplayer.player.video.ui.container");
zdfplayer.player.video.ui.container.RecommendationItem=refactored.ui.container.UIContainer.extend({controller:null,font:null,titleLabel:null,description:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.container.RecommendationItem",layout:new refactored.ui.container.layout.UIBoxLayout({direction:"vertical"})},a))},createChildren:function(){this.base()},createEventListeners:function(){this.base();this.addEventListener(refactored.ui.UIObject.ADDED_CHILD,$j.proxy(this.handleChildAdded,
this))},addToDOM:function(a){this.base(a)},handleChildAdded:function(a,b){switch(b.name){case "titleLabel":this.titleLabel=b;break;case "descriptionLabel":this.descriptionLabel=b}},setTitle:function(a){this.titleLabel!=null&&this.titleLabel.setText(a)},setDescription:function(a){this.descriptionLabel!=null&&this.descriptionLabel.setText(a)},addImage:function(a){if(a!=null){var b="img_"+this.id;this.viewElement.append('<img id="'+b+'"src="'+a+'" />');var c=this;$j("#"+b).load(function(a){c.childrenElement.css("left",
a.target.width+10+"px")});$j("#"+b).error(function(){$j(this).remove()})}}});zdfplayer.player.video.ui.control.ControlFactory.register("recommendationItem",zdfplayer.player.video.ui.container.RecommendationItem);namespace("zdfplayer.player.video.ui.container.popup");
zdfplayer.player.video.ui.container.popup.Popup=refactored.ui.container.UIContainer.extend({controller:null,pauseMedia:!1,dropShadow:!1,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.Popup",layout:new refactored.ui.container.layout.UIAbsoluteLayout},a))},createEventListeners:function(){this.base();this.addEventListener(refactored.ui.UIObject.ADDED_CHILD,$j.proxy(this.handleChildAdded,this))},addToDOM:function(a){this.base(a);this.dropShadow&&this.viewElement.addClass("dropShadow")},
handleChildAdded:function(a,b){b.name=="closeButton"&&b.addEventListener(refactored.ui.control.UIButton.EXECUTE,$j.proxy(this.handleCloseButtonExcute,this))},handleCloseButtonExcute:function(){this.dispatchEvent(zdfplayer.player.video.ui.container.popup.Popup.CLOSE)}},{CLOSE:"close.Popup"});namespace("zdfplayer.player.video.ui.container.popup");
zdfplayer.player.video.ui.container.popup.ArticleInfo=zdfplayer.player.video.ui.container.popup.Popup.extend({titleLabel:null,descriptionLabel:null,broadcastLabel:null,airDateLabel:null,expiryDateLabel:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.ArticleInfo",layout:new refactored.ui.container.layout.UIAbsoluteLayout},a))},setArticleTitleLabel:function(){this.titleLabel&&this.titleLabel.setText(this.controller.mediaAsset.title)},setArticleDescriptionLabel:function(){this.descriptionLabel&&
this.descriptionLabel.setText(this.controller.mediaAsset.description)},setBroadcastLabel:function(){this.broadcastLabel&&this.broadcastLabel.setText(this.controller.configuration.getTextById("broadcastPrefix")+this.controller.mediaAsset.channelTitle)},setAirDateLabel:function(){if(this.airDateLabel){var a=this.getDateString(this.controller.mediaAsset.airTime);this.airDateLabel.setText(this.controller.configuration.getTextById("airDatePrefix")+a)}},setExpiryDateLabel:function(){if(this.expiryDateLabel){var a=
this.getDateString(this.controller.mediaAsset.timeToLive);this.expiryDateLabel.setText(this.controller.configuration.getTextById("expirydatePrefix")+a)}},getDateString:function(a){if(a==null)return"";var b=refactored.utils.String.padLeft(String(a.getMonth()+1),"0",2),c=refactored.utils.String.padLeft(String(a.getHours()),"0",2),d=refactored.utils.String.padLeft(String(a.getMinutes()),"0",2);return refactored.utils.String.padLeft(String(a.getDate()),"0",2)+"."+b+"."+a.getFullYear()+" "+c+":"+d},createEventListeners:function(){this.base();
this.controller.addEventListener(zdfplayer.player.Controller.MEDIA_ASSET_CHANGED,$j.proxy(this.handleMediaAssetChanged,this))},handleChildAdded:function(a,b){this.base(a,b);switch(b.name){case "articleTitleLabel":this.titleLabel=b;this.setArticleTitleLabel();break;case "articleDescriptionLabel":this.descriptionLabel=b;this.setArticleDescriptionLabel();break;case "broadcastLabel":this.broadcastLabel=b;this.setBroadcastLabel();break;case "airDateLabel":this.airDateLabel=b;this.setAirDateLabel();break;
case "expiryDateLabel":this.expiryDateLabel=b,this.setExpiryDateLabel()}},handleMediaAssetChanged:function(){this.setExpiryDateLabel();this.setAirDateLabel();this.setBroadcastLabel();this.setArticleDescriptionLabel();this.setArticleTitleLabel()}},{CONFIGURATION_MAPPING:{pauseMedia:"b:pauseMedia",dropShadow:"b:dropShadow"}});zdfplayer.player.video.ui.control.ControlFactory.register("articleInfo",zdfplayer.player.video.ui.container.popup.ArticleInfo);namespace("zdfplayer.player.video.ui.container.popup");
zdfplayer.player.video.ui.container.popup.AdjustmentDialog=zdfplayer.player.video.ui.container.popup.Popup.extend({qualitySelector:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.AdjustmentDialog",layout:new refactored.ui.container.layout.UIAbsoluteLayout},a))},handleChildAdded:function(a,b){this.base(a,b);switch(b.name){case "cancelSettingsButton":b.addEventListener(refactored.ui.control.UIButton.EXECUTE,$j.proxy(this.handleCancelButtonExcute,this));break;
case "saveSettingsButton":b.addEventListener(refactored.ui.control.UIButton.EXECUTE,$j.proxy(this.handleSaveButtonExcute,this));break;case "qualitySelector":this.qualitySelector=b}if(this.qualitySelector==null)this.qualitySelector=this.getChildByName("qualitySelector",!0)},handleCancelButtonExcute:function(){this.qualitySelector.setSelectedStream(this.controller.getStream());this.dispatchEvent(zdfplayer.player.video.ui.container.popup.Popup.CLOSE)},handleSaveButtonExcute:function(){var a=this.qualitySelector.getSelectedStream();
this.log(a);a!=null&&this.controller.setStream(a,!0);this.dispatchEvent(zdfplayer.player.video.ui.container.popup.Popup.CLOSE)}},{CONFIGURATION_MAPPING:{pauseMedia:"b:pauseMedia",dropShadow:"b:dropShadow"}});zdfplayer.player.video.ui.control.ControlFactory.register("adjustment",zdfplayer.player.video.ui.container.popup.AdjustmentDialog);namespace("zdfplayer.player.video.ui.container.popup");
zdfplayer.player.video.ui.container.popup.RecommendDialog=zdfplayer.player.video.ui.container.popup.Popup.extend({linkInput:null,messageInput:null,receiverInput:null,senderInput:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.RecommendDialog",layout:new refactored.ui.container.layout.UIAbsoluteLayout},a))},validate:function(){var a=/\b[\w\.-]+@[\w\.-]+\.\w{2,4}\b/gi,b=!0,c;c=this.receiverInput.getText().match(a);c==null||c&&c.length==0?(this.setValid(this.receiverInput.inputElement,
!1),b=!1,c=this.controller.configuration.getSystemMessageById("error","receiverAdressInvalid"),this.controller.dispatchEvent(zdfplayer.player.Controller.SHOW_ALERT,c)):this.setValid(this.receiverInput.inputElement,!0);c=this.senderInput.getText().match(a);c==null||c&&c.length==0?(this.setValid(this.senderInput.inputElement,!1),b=!1,c=this.controller.configuration.getSystemMessageById("error","senderAdressInvalid"),this.controller.dispatchEvent(zdfplayer.player.Controller.SHOW_ALERT,c)):this.setValid(this.senderInput.inputElement,
!0);this.messageInput.getText().length==0?(this.setValid(this.messageInput.inputElement,!1),b=!1,c=this.controller.configuration.getSystemMessageById("error","messageEmpty"),this.controller.dispatchEvent(zdfplayer.player.Controller.SHOW_ALERT,c)):this.setValid(this.messageInput.inputElement,!0);return b},setValid:function(a,b){b==!0?(a.addClass("validRecommendationInput"),a.removeClass("invalidRecommendationInput")):(a.removeClass("validRecommendationInput"),a.addClass("invalidRecommendationInput"))},
send:function(){var a=this.controller.configuration.getServiceUrlById("mail");if(!a||a.length==0){return;throw new zdfplayer.Error(c,zdfplayer.Error.ERROR_SEND_MAIL,"No service url specified!");}var b={freitext:this.messageInput.getText(),receiverMail:this.receiverInput.getText(),senderMail:this.senderInput.getText(),template:"empfehlen",beitragstitel:this.controller.mediaAsset.title,beitragsId:this.controller.mediaAsset.id},c=this;$j.ajax({url:a,data:b,type:"GET",dataType:"text",success:function(a){a=
$j.parseXML($j.trim(a));if($j($j("response > status > statuscode",a).get(0)).text()=="ok")c.feedback(!0);else throw c.feedback(!1),a=$j($j("response > status > debuginfo",responseXML).get(0)).text(),new zdfplayer.Error(c,zdfplayer.Error.ERROR_SEND_MAIL,"Bad response! "+a);},error:function(){c.feedback(!1)},complete:function(){c.finish()}})},clearForm:function(){for(var a=[this.messageInput,this.receiverInput,this.senderInput],b=0;b<a.length;b++)a[b]!=null&&(a[b].setText(""),a[b].inputElement.addClass("validRecommendationInput"))},
finish:function(){this.clearForm();this.dispatchEvent(zdfplayer.player.video.ui.container.popup.Popup.CLOSE)},feedback:function(a){a===!0?(captionKey="information",messageKey="mailSuccess"):(captionKey="error",messageKey="mailFailure");a=this.controller.configuration.getSystemMessageById(captionKey,messageKey);this.controller.dispatchEvent(zdfplayer.player.Controller.SHOW_ALERT,a)},handleChildAdded:function(a,b){this.base(a,b);switch(b.name){case "linkInput":this.linkInput=b;this.linkInput.inputElement.addClass("validRecommendationInput");
this.linkInput.setText(this.controller.mediaAsset.vcmsURL);break;case "receiverMailInput":this.receiverInput=b;this.receiverInput.inputElement.addClass("validRecommendationInput");this.receiverInput.setText("");break;case "senderMailInput":this.senderInput=b;this.senderInput.inputElement.addClass("validRecommendationInput");this.senderInput.setText("");break;case "messageInput":this.messageInput=b;this.messageInput.inputElement.addClass("validRecommendationInput");this.messageInput.setText("");break;
case "copyLinkButton":b.hide();break;case "sendButton":b.addEventListener(refactored.ui.control.UIButton.EXECUTE,$j.proxy(this.handleSendButtonExecute,this))}},handleSendButtonExecute:function(){this.validate()&&this.send()},hide:function(a){this.base(a);this.clearForm()}},{CONFIGURATION_MAPPING:{pauseMedia:"b:pauseMedia",dropShadow:"b:dropShadow"}});zdfplayer.player.video.ui.control.ControlFactory.register("recommend",zdfplayer.player.video.ui.container.popup.RecommendDialog);namespace("zdfplayer.player.video.ui.container.popup");
zdfplayer.player.video.ui.container.popup.DownloadDialog=zdfplayer.player.video.ui.container.popup.Popup.extend({controller:null,downloadURLs:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.DownloadDialog",layout:new refactored.ui.container.layout.UIAbsoluteLayout},a));this.downloadURLs=this.controller.mediaAsset.getDownloadURLs()},invokeDownload:function(a){for(var a=RegExp("http://[-a-zA-Z0-9@:%_+.~#?&//=]+."+a,"i"),b=0;b<this.downloadURLs.length;b++)if(a.test(this.downloadURLs[b].url)){window.open(this.downloadURLs[b].url,
"_blank");return}this.log("Cannot determine download url")},handleChildAdded:function(a,b){this.base(a,b);switch(b.name){case "wmvButton":b.addEventListener(refactored.ui.control.UIButton.EXECUTE,$j.proxy(this.handleDownloadButtonClick,this));break;case "mp4Button":b.addEventListener(refactored.ui.control.UIButton.EXECUTE,$j.proxy(this.handleDownloadButtonClick,this))}},handleDownloadButtonClick:function(a){a.target.name=="wmvButton"?this.invokeDownload("wmv"):a.target.name=="mp4Button"&&this.invokeDownload("mp4");
this.dispatchEvent(zdfplayer.player.video.ui.container.popup.Popup.CLOSE)}},{CONFIGURATION_MAPPING:{pauseMedia:"b:pauseMedia",dropShadow:"b:dropShadow"}});zdfplayer.player.video.ui.control.ControlFactory.register("downloadDialog",zdfplayer.player.video.ui.container.popup.DownloadDialog);namespace("zdfplayer.player.video.ui.container.popup");
zdfplayer.player.video.ui.container.popup.RedirectDialog=zdfplayer.player.video.ui.container.popup.Popup.extend({constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.RedirectDialog",layout:new refactored.ui.container.layout.UIAbsoluteLayout},a))},handleChildAdded:function(a,b){this.base(a,b);switch(b.name){case "cancelButton":b.addEventListener(refactored.ui.control.UIButton.EXECUTE,$j.proxy(this.handleCancelButtonExcute,this));break;case "redirectButton":b.addEventListener(refactored.ui.control.UIButton.EXECUTE,
$j.proxy(this.handleRedirectButtonExcute,this))}},handleCancelButtonExcute:function(){this.dispatchEvent(zdfplayer.player.video.ui.container.popup.Popup.CLOSE)},handleRedirectButtonExcute:function(){if(this.controller.stream!=null&&this.controller.stream.url!="")window.location.href=this.controller.stream.url;this.dispatchEvent(zdfplayer.player.video.ui.container.popup.Popup.CLOSE)}},{CONFIGURATION_MAPPING:{pauseMedia:"b:pauseMedia",dropShadow:"b:dropShadow"}});
zdfplayer.player.video.ui.control.ControlFactory.register("redirect",zdfplayer.player.video.ui.container.popup.RedirectDialog);namespace("zdfplayer.player.video.caption");
zdfplayer.player.video.caption.DFXPParser=refactored.Object.extend({namedColorMap:null,captioningDocument:{},offset:0,tts:"tts",ttm:"ttm",constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.caption.DFXPParser"},a));this.offset=Math.abs(this.offset);this.initialize()},initialize:function(){this.namedColorMap=[];this.namedColorMap.transparent="#000000";this.namedColorMap.black="#000000";this.namedColorMap.silver="#c0c0c0";this.namedColorMap.gray="#808080";this.namedColorMap.white=
"#ffffff";this.namedColorMap.maroon="#800000";this.namedColorMap.red="#ff0000";this.namedColorMap.purple="#800080";this.namedColorMap.fuchsia="#ff00ff";this.namedColorMap.magenta="#ff00ff";this.namedColorMap.green="#008000";this.namedColorMap.lime="#00ff00";this.namedColorMap.olive="#808000";this.namedColorMap.yellow="#ffff00";this.namedColorMap.navy="#000080";this.namedColorMap.blue="#0000ff";this.namedColorMap.teal="#008080";this.namedColorMap.aqua="#00ffff";this.namedColorMap.cyan="#00ffff"},parseHead:function(a,
b){var c=this;try{a.title=$j("tt > "+this.ttm+"title",b).text(),a.description=$j("tt > "+this.ttm+"desc",b).text(),a.copyright=$j("tt > "+this.ttm+"copyright",b).text()}catch(d){}var g=$j("tt > head > styling > style",b);if(g.size()>0){var f;$j.each(g,function(b,d){f=c.createStyleObject(d);a.addStyle(f)})}},createStyleObject:function(a){for(var b={},c,d,g=0;g<a.attributes.length;g++){d=a.attributes[g];if(d.localName!=null&&typeof d.localName!="undefined")if(c=d.localName,d.prefix==this.tts)d=d.value;
else continue;else if(d.name.indexOf(this.tts)!=-1)c=d.name.replace(this.tts+":",""),d=d.value;else continue;if(d&&d.length>0){var f=c.search(/[A-Z]/g);if(f!=-1){var h=c.substring(0,f);h+="-"+c.substring(f,f+1).toLowerCase();h+=c.substring(f+1,c.length);b[h]=d}else b[c]=d}}c=$j(a).attr(this.tts+":wrapOption");if(!c||typeof c=="undefined")c=$j(a).attr("wrapOption");c&&c.toLowerCase()=="nowrap"&&(b["white-space"]="nowrap");if(b.color!=void 0&&this.namedColorMap[b.color]!=void 0)b.color=this.namedColorMap[b.color];
return b},parseBody:function(a,b){var c=this;if($j("tt > body",b).size()==0)throw Error("Invalid DFXP document: <body> tag is required.");else{var d=$j("tt > body > div:first-child",b);d&&d.size()>0&&(d=$j("tt > body > div:first-child > p",b),$j.each(d,function(b,d){c.parseParagraphTag(a,d,b)}))}},parseParagraphTag:function(a,b,c){var d=$j(b).attr("begin"),g=$j(b).attr("end"),f=$j(b).attr("dur");if(!d||d=="")d="0s";var d=refactored.utils.TimeCodeUtil.parseTime(d)+this.offset,h=0;g!=""?h=refactored.utils.TimeCodeUtil.parseTime(g)+
this.offset:f!=""&&(h=d+refactored.utils.TimeCodeUtil.parseTime(f));g="<p>";f=this.parseStyleAttrib(a,b);if(f!=null){var n="",l;for(l in f)n+=l+":"+f[l]+";";n.length>0&&(g='<p style="'+n+'">')}for(l=0;l<b.childNodes.length;l++)switch(f=b.childNodes[l],f.nodeType){case 3:g+=this.cleanString(f.data);break;case 1:switch(f.tagName){case "set":case "metadata":break;case "span":g+=this.parseSpanTag(a,f);break;case "br":g+="<br />";break;default:g+=this.cleanString(f.data)}}g+="</p>";b=new zdfplayer.player.video.caption.Caption({id:c,
time:d,duration:h>0?h-d:Number.NaN,text:g});a.addCaption(b)},parseStyleAttrib:function(a,b){var c=$j(b).attr("style"),d=null;if(typeof c!="undefined"&&c!="")for(var g=0;g<a.getNumStyles;g++)a.getStyleAt(g).id==c&&(d=a.getStyleAt(g));else d=this.createStyleObject(b);return d},parseSpanTag:function(a,b){var c=this.parseStyleAttrib(a,b),d="<span>";if(c!=null){var g="",f;for(f in c)g+=f+":"+c[f]+";";g.length>0&&(d='<span style="'+g+'">')}for(c=0;c<b.childNodes.length;c++)switch(g=b.childNodes[c],g.nodeType){case 3:d+=
this.cleanString(g.data);break;case 1:switch(g.tagName){case "set":case "metadata":break;case "br":d+="<br />";break;default:d+=g.data}}d+="</span>";return d},cleanString:function(a){return typeof a!="undefined"?a.replace(/\s+/g," "):""},parse:function(a){var b=new zdfplayer.player.video.caption.CaptionDocument;this.parseHead(b,a);this.parseBody(b,a);return b}});namespace("zdfplayer.player.video.caption");
zdfplayer.player.video.caption.CaptionDocument=Base.extend({title:"",description:"",copyright:"",captions:null,styles:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.caption.CaptionDocument"},a));this.styles=[];this.captions=[]},addStyle:function(a){if(this.styles==null)this.styles=[];this.styles.push(a)},getNumStyles:function(){return this.styles!=null?this.styles.length:0},getStyleAt:function(a){return this.styles==null||a>=this.styles?null:this.styles[a]},addCaption:function(a){if(this.captions==
null)this.captions=[];this.captions.push(a)},getNumCaptions:function(){return this.captions!=null?this.captions.length:0},getCaptionAt:function(a){return this.captions==null||a>=this.captions.length?null:this.captions[a]}});namespace("zdfplayer.player.video.caption");
zdfplayer.player.video.caption.Caption=Base.extend({time:0,duration:null,text:"",id:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.caption.Caption"},a))},getClearText:function(){var a="";this.text!=null&&this.text.length>0&&(a=this.text.replace(/<(.|\n)*?>/g,""));return a}});namespace("zdfplayer.player.video.caption");
zdfplayer.player.video.caption.CaptionManager=refactored.Object.extend({controller:null,tickInterval:100,tolerance:0.25,captionDocument:null,timer:null,hideTimer:null,currentTime:-1,currentCaption:null,currentCaptionIndex:null,captionEnabled:!1,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.caption.CaptionManager"},a))},initialize:function(){this.base();if(this.captionDocument!=null)this.timer=new refactored.utils.Timer,this.timer.addEventListener(refactored.utils.Timer.TICK,
$j.proxy(this.handleTimerTick,this)),this.controller.addEventListener(zdfplayer.player.video.caption.CaptionManager.ENABLE,$j.proxy(this.handleEnabledChanged,this))},cleanUp:function(){this.timer&&(this.timer.stop(),this.timer.removeEventListener(refactored.utils.Timer.TICK,$j.proxy(this.handleTimerTick,this)));this.controller.removeEventListener(zdfplayer.player.Controller.CURRENT_TIME_CHANGED,$j.proxy(this.handleCurrentTimeChanged,this));this.controller.removeEventListener(zdfplayer.player.Controller.PLAY_STATE_CHANGED,
$j.proxy(this.handlePlayStateChanged,this));this.controller.removeEventListener(zdfplayer.player.Controller.SEEKING,$j.proxy(this.handleSeeking,this))},checkCaptionData:function(){for(var a,b=this.currentCaptionIndex||0;b<this.captionDocument.captions.length;b++)if(a=this.captionDocument.captions[b],!(a.time+a.duration<this.currentTime)){var c=this.currentTime-this.tolerance,d=a.time+a.duration;if(this.currentTime+this.tolerance>=a.time&&c<d&&this.currentCaptionIndex!=b){this.currentCaptionIndex=
b;this.currentCaption=a;this.hideTimer!=null&&(this.destroyHideTimer(),this.dispatchEvent(zdfplayer.player.video.caption.CaptionManager.CAPTION_END,a));this.dispatchEvent(zdfplayer.player.video.caption.CaptionManager.CAPTION_BEGIN,a);this.hideTimer=new refactored.utils.Timer({tickInterval:a.duration*1E3,repeatCount:1});this.hideTimer.addEventListener(refactored.utils.Timer.COMPLETE,$j.proxy(this.handleHideTimerComplete,this));this.hideTimer.start();break}}},destroyHideTimer:function(){this.hideTimer.destroy();
this.hideTimer=null},handleHideTimerComplete:function(){this.dispatchEvent(zdfplayer.player.video.caption.CaptionManager.CAPTION_END,this.currentCaption);this.destroyHideTimer();this.currentCaption=null},handleTimerTick:function(){this.checkCaptionData()},handleCurrentTimeChanged:function(a,b){this.currentTime=b.time},handleSeeking:function(a,b){if(b.seeking){if(this.currentCaption!=null)this.dispatchEvent(zdfplayer.player.video.caption.CaptionManager.CAPTION_END,this.currentCaption),this.currentCaptionIndex=
this.currentCaption=null;this.hideTimer!=null&&this.destroyHideTimer()}},handleEnabledChanged:function(a,b){this.captionEnabled=b.enabled;this.log("caption detection enabled",b.enabled.toString());this.captionEnabled?(this.controller.addEventListener(zdfplayer.player.Controller.PLAY_STATE_CHANGED,$j.proxy(this.handlePlayStateChanged,this)),this.controller.addEventListener(zdfplayer.player.Controller.CURRENT_TIME_CHANGED,$j.proxy(this.handleCurrentTimeChanged,this)),this.controller.addEventListener(zdfplayer.player.Controller.SEEKING,
$j.proxy(this.handleSeeking,this)),this.timer&&!this.timer.isRunning()&&this.timer.start()):(this.controller.removeEventListener(zdfplayer.player.Controller.CURRENT_TIME_CHANGED,this.handleCurrentTimeChanged),this.controller.removeEventListener(zdfplayer.player.Controller.PLAY_STATE_CHANGED,this.handlePlayStateChanged),this.controller.removeEventListener(zdfplayer.player.Controller.SEEKING,this.handleSeeking),this.timer&&this.timer.isRunning()&&this.timer.pause())},handlePlayStateChanged:function(a,
b){switch(b.playState){case zdfplayer.player.Controller.PLAY_STATE:this.timer&&!this.timer.isRunning()&&this.timer.start();break;case zdfplayer.player.Controller.PAUSE_STATE:this.timer&&this.timer.isRunning()&&this.timer.pause();break;case zdfplayer.player.Controller.STOP_STATE:this.timer.stop(),this.dispatchEvent(zdfplayer.player.video.caption.CaptionManager.CAPTION_END,this.currentCaption),this.currentCaptionIndex=this.currentCaption=null}},setCaptionDocument:function(a){this.cleanUp();this.captionDocument=
a;this.initialize()}},{CAPTION_BEGIN:"CaptionManager.captionBegin",CAPTION_END:"CaptionManager.captionEnd",ENABLE:"CaptionManager.enable"});namespace("zdfplayer.player.video.ui.strategy");
zdfplayer.player.video.ui.strategy.AutoHideStrategy=refactored.ui.strategy.UIStrategy.extend({container:null,autoHide:!1,duration:0,autoHideDelay:0,timer:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.video.ui.strategy.AutoHideStrategy"},a));if(typeof a.fadeSteps!="undefined"&&a.fadeSteps!=null)this.duration=a.fadeSteps*40},apply:function(){this.container.addEventListener(refactored.ui.UIObject.MOUSE_MOVE,$j.proxy(this.handleMousemove,this))},startTimer:function(){this.timer=
setTimeout($j.proxy(this.handleTime,this),this.autoHideDelay)},killTimer:function(){if(this.timer)clearTimeout(this.timer),this.timer=null},handleMousemove:function(){this.killTimer();this.owner.isVisible||this.owner.show(this.duration);this.startTimer()},handleTime:function(){this.killTimer();this.owner.hide(this.duration)},execute:function(){this.autoHide&&(this.apply(),this.startTimer())}});namespace("zdfplayer.player.flash");
zdfplayer.player.flash.FlashBuilder=zdfplayer.player.Builder.extend({swf:null,controller:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.flash.FlashBuilder"},a))},getEmbedParams:function(){var a=this.configuration.flashEmbedParams||{},b=this.configuration.getSettingById("backgroundColor");a.bgcolor=b!=null?b.replace("0x","#"):"#000000";a.quality="high";if(!a.allowscriptaccess)a.allowscriptaccess="always";if(!a.allowfullscreen)a.allowfullscreen="true";if(!a.url)a.url=
"flash/EmbeddedPlayer.swf";return a},getConfigurationXML:function(){return this.configuration.getConfigurationAsXMLString()},getArticleXML:function(){if(this.playlistManager!=null&&this.playlistManager!="undefined"){var a=this.playlistManager.getPlaylist();if(a!=null&&typeof a!="undefined")return a.getListXML()}return this.mediaAsset.getArticleXML()},getManualArticle:function(){return this.mediaAsset.transformForFlash()},createConfigurationCallback:function(){var a="getConfiguration_"+this.objectId;
window[a]=$j.proxy(this.getConfigurationXML,this);return a},createArticleCallback:function(){var a="getAsset_"+this.objectId;window[a]=$j.proxy(this.getArticleXML,this);return a},createManualArticleCallback:function(){var a="getManualAsset_"+this.objectId;window[a]=$j.proxy(this.getManualArticle,this);return a},getPixelURLs:function(a){var b=this.configuration.getIVWTrackingSettings();if(b.source==zdfplayer.player.tracking.IVWTracker.FLASHVARS||b.source==zdfplayer.player.tracking.IVWTracker.MANUAL)a.familyPixel=
b.family,a.countPixel=b.count},mapManualData:function(a){a.article=!0;var b="title,description,airTime,timeToLive,channelTitle,vcmsURL,hasCaption,captionURL,captionOffset".split(","),c,d;for(d=0;d<b.length;d++)c=b[d],this.mediaAsset[c]==null||typeof this.mediaAsset[c]=="undefined"||(a[c]=this.mediaAsset[c]);if(this.mediaAsset.airTime!=null&&typeof this.mediaAsset.airTime!="undefined")a.airTime=this.getDateString(this.mediaAsset.airTime);if(this.mediaAsset.timeToLive!=null&&typeof this.mediaAsset.timeToLive!=
"undefined")a.expiryDate=this.getDateString(this.mediaAsset.timeToLive);if(this.mediaAsset.formitaeten!=null){b=this.mediaAsset.getStreamsByFormat(zdfplayer.media.Asset.FORMAT_SMIL);c=["hd","veryhigh","high","low"];for(d=0;d<c.length;d++){var g=b[c[d]];if(g!=null)a.mediaURL=g.url}}if(this.mediaAsset.teaserImages!=null)for(var f in this.mediaAsset.teaserImages){a.startImageURL=this.mediaAsset.teaserImages[f];break}if(this.mediaAsset.cuepoints!=null){f="";for(d=0;d<this.mediaAsset.cuepoints.length;d++)b=
this.mediaAsset.cuepoints[d],c=refactored.utils.TimeCodeUtil.millisecondsToTimecode(b.time,!1),f=f.concat("<value time='"+c+"'>"+b.text+"</value>");if(f.length>0)a.cuepoints=f}},getDateString:function(a){if(a==null)return"";var b=refactored.utils.String.padLeft(String(a.getMonth()+1),"0",2),c=refactored.utils.String.padLeft(String(a.getHours()+1),"0",2),d=refactored.utils.String.padLeft(String(a.getMinutes()+1),"0",2);return refactored.utils.String.padLeft(String(a.getDate()+1),"0",2)+"."+b+"."+a.getFullYear()+
" "+c+":"+d},swfLoadedHandler:function(a){if(a.success==!0&&(this.swf=a.ref,zdfplayer.player.flash.FlashBuilder.registerInstance(this),typeof window.playerInitialized=="undefined"))window.playerInitialized=zdfplayer.player.flash.FlashBuilder.playerInitialized},build:function(){this.log("Building Flash Video Player");var a=parseInt(this.configuration.getSettingById("width",400)),b=parseInt(this.configuration.getSettingById("height",225)),c="flashContent_"+Math.round(Math.random()*1E4);this.parentElement.append('<div id="'+
c+'" />');var d={};d.configuration=this.configuration.configurationUrl;d.configurationCallback=this.createConfigurationCallback();this.configuration.getMediaSettings().type="video";d.assetID=this.configuration.media.assetID;d.channelID="";var g=this.configuration.getSettingById("startImageURL","");if(g.length>0)d.startImageURL=g;switch(this.configuration.getSettingById("source")){case "tivi_videothek":case "tivi":case "mediathek":d.articleCallback=this.createArticleCallback();break;case "manual":case "flashvars":d.manualArticleCallback=
this.createManualArticleCallback()}d.showPreloader=!0;d.playerID=this.objectId;this.getPixelURLs(d);var g=this.getEmbedParams(),f={};f.id="embeddedPlayer"+this.objectId;f.name="embeddedPlayer"+this.objectId;f.align="middle";swfobject.embedSWF(g.url,c,a,b,"10.2.0","flash/playerProductInstall.swf",d,g,f,$j.proxy(this.swfLoadedHandler,this))}},{instances:null,registerInstance:function(a){if(zdfplayer.player.flash.FlashBuilder.instances==null)zdfplayer.player.flash.FlashBuilder.instances=[];zdfplayer.player.flash.FlashBuilder.instances[a.objectId]=
a},playerInitialized:function(a){if(a=zdfplayer.player.flash.FlashBuilder.instances[a]||null)a.controller=new zdfplayer.player.flash.FlashController({swf:a.swf}),a.dispatchEvent(zdfplayer.player.Builder.COMPLETE,a.controller)}});namespace("zdfplayer.player.flash");
zdfplayer.player.flash.FlashController=zdfplayer.player.Controller.extend({swf:null,playState:null,stateHandler:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.flash.FlashController"},a))},registerFlashListener:function(){this.stateHandler=new Function("info","zdfplayer.player.flash.FlashController.flashListener(info);");this.swf&&(this.swf.addJSListener("playStateChange",String(this.stateHandler)),this.swf.addJSListener("cuepoint",String(this.stateHandler)),this.swf.addJSListener("volumeChange",
String(this.stateHandler)),this.swf.addJSListener("mutedChange",String(this.stateHandler)),this.swf.addJSListener("durationChange",String(this.stateHandler)),this.swf.addJSListener("complete",String(this.stateHandler)),this.swf.addJSListener("bufferingChange",String(this.stateHandler)),this.swf.addJSListener("mediaSizeChange",String(this.stateHandler)),this.swf.addJSListener("seekingChange",String(this.stateHandler)),this.swf.addJSListener("mediaError",String(this.stateHandler)),this.swf.addJSListener("currentTimeChange",
String(this.stateHandler)),this.swf.addJSListener("canPlayChange",String(this.stateHandler)),this.swf.addJSListener("loadStateChange",String(this.stateHandler)),this.swf.addJSListener("fullScreen",String(this.stateHandler)))},play:function(){this.swf&&this.swf.playVideo()},pause:function(){this.swf&&this.swf.pauseVideo()},togglePause:function(){this.swf&&this.swf.togglePause()},stop:function(){this.swf&&this.swf.stopVideo()},seek:function(a){this.swf&&this.swf.seekVideo(a)},isPlaying:function(){return this.playState==
zdfplayer.player.Controller.PLAY_STATE},isPaused:function(){return this.playState==zdfplayer.player.Controller.PAUSE_STATE},isStopped:function(){return this.playState==zdfplayer.player.Controller.STOP_STATE},getAutoPlay:function(){if(this.swf)return this.swf.getAutoPlay()},setAutoPlay:function(a){this.swf&&this.swf.setAutoPlay(a)},setMuted:function(a){this.swf&&this.swf.setMute(a)},getMuted:function(){if(this.swf)return this.swf.getMute()},setVolume:function(a){this.swf&&this.swf.setVolume(a)},getVolume:function(){if(this.swf)return this.swf.getVolume()},
getDuration:function(){if(this.swf)return this.swf.getDuration()},getCurrentTime:function(){if(this.swf)return this.swf.getCurrentTime()},setCurrentTime:function(a){this.seek(a)},ready:function(){this.log("FlashController : ready");this.registerFlashListener();this.base()},getScaleMode:function(){if(this.swf)return this.swf.getScaleMode()},setScaleMode:function(a){this.swf&&this.swf.setScaleMode(a)},setCuepointIndex:function(a){this.swf&&this.swf.setCuepointIndex(a)},jumpToNearestCuepoint:function(a,
b){if(this.swf){if(b==null||typeof b=="undefined")b=!0;this.swf.jumpToNearestCuepoint(a,b)}},getCurrentCuepoint:function(){if(this.swf)return this.swf.getCurrentCuepoint()},setPlaylistIndex:function(a){this.swf&&this.swf.setPlaylistIndex(a)},playlistNext:function(){this.swf&&this.swf.playlistNext()},playListPrevious:function(){this.swf&&this.swf.playListPrevious()},getPlaylistIndex:function(){this.swf&&this.swf.getPlaylistIndex()},switchToBitrate:function(a){this.swf&&this.swf.switchToBitrate(a)},
changeArticle:function(a,b){if(this.swf){if(b==null||typeof b=="undefined")b="video";this.swf.changeArticle(a,b)}},setMediaAsset:function(a){this.base(a);this.swf&&(a=a.transformForFlash(),this.swf.changeArticleManually(a.articleData,a.formitaeten,a.cuepoints))}},{flashListener:function(a){var b=zdfplayer.player.flash.FlashBuilder.instances[a.playerID]||null;if(b){var c="";switch(a.type){case "loadStateChange":c=zdfplayer.player.Controller.LOAD_FINISHED;break;case "playStateChange":c=zdfplayer.player.Controller.PLAY_STATE_CHANGED;
b.controller.playState=a.playState;break;case "cuepoint":c=zdfplayer.player.Controller.CUEPOINT;break;case "durationChange":c=zdfplayer.player.Controller.DURATION_CHANGED;break;case "complete":c=zdfplayer.player.Controller.COMPLETE;break;case "bufferingChange":c=zdfplayer.player.Controller.BUFFERING;break;case "seekingChange":c=zdfplayer.player.Controller.SEEKING;break;case "currentTimeChange":c=zdfplayer.player.Controller.CURRENT_TIME_CHANGED;break;case "mutedChange":c=zdfplayer.player.Controller.MUTE_CHANGED;
break;case "mediaError":c=zdfplayer.player.Controller.ERROR;break;case "volumeChange":c=zdfplayer.player.Controller.VOLUME_CHANGED;break;case "playlistIndexChanged":c=zdfplayer.player.Controller.PLAYLIST_INDEX_CHANGED;break;case "playlistComplete":c=zdfplayer.player.Controller.PLAYLIST_COMPLETE;break;case "canPlayChange":c=zdfplayer.player.Controller.CAN_PLAY;break;case "fullScreen":c=zdfplayer.player.Controller.FULLSCREEN_CHANGED}c.length>0&&b.controller.dispatchEvent.apply(b.controller,[c,a])}}});
namespace("zdfplayer");
zdfplayer.PlayerFactory=Base.extend({},{instances:[],register:function(a,b){zdfplayer.PlayerFactory.instances[a]=b},unregister:function(a){zdfplayer.PlayerFactory.instances[a]=void 0},exists:function(a){return typeof zdfplayer.PlayerFactory.instances[a]!="undefined"},instanciate:function(a){var b=zdfplayer.PlayerFactory.instances[a.id];if(zdfplayer.PlayerFactory.exists(a.id))return zdfplayer.PlayerFactory.instances[a.id];b=new zdfplayer.Player(a);zdfplayer.PlayerFactory.register(a.id,b);return b}});
namespace("zdfplayer");
zdfplayer.Player=refactored.Object.extend({id:"",configurationUrl:"",specificConfigurationUrl:"",settings:null,media:null,embedStrategy:zdfplayer.embed.DefaultStrategy,configuration:null,configurationLoaded:!1,mediaAsset:null,playlistManager:null,parentElement:null,controller:null,isEmbedded:!1,tracker:null,beaconTracker:null,monitoringTracker:null,alertDialog:null,preloader:null,preloaderImageUrl:"example/assets/images/spinner.gif",controllerEvents:[zdfplayer.player.Controller.CURRENT_TIME_CHANGED,zdfplayer.player.Controller.VOLUME_CHANGED,
zdfplayer.player.Controller.CUEPOINT,zdfplayer.player.Controller.DURATION_CHANGED,zdfplayer.player.Controller.COMPLETE,zdfplayer.player.Controller.BUFFERING,zdfplayer.player.Controller.SEEKING,zdfplayer.player.Controller.MUTE_CHANGED,zdfplayer.player.Controller.PLAY_STATE_CHANGED,zdfplayer.player.Controller.ERROR,zdfplayer.player.Controller.PLAYLIST_INDEX_CHANGED,zdfplayer.player.Controller.PLAYLIST_COMPLETE,zdfplayer.player.Controller.CAN_PLAY],flashEmbedParams:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.Player",
isDebugEnabled:!1},a));if(this.id==null||typeof this.id=="undefined"||this.id=="")this.id="zdfplayer_"+Math.round(Math.random()*1E4);if(this.settings==null)this.settings={};if(this.media==null)this.media={}},track:function(){this.tracker!=null&&typeof this.tracker!="undefined"&&this.tracker.track()},createPlaylistManager:function(){this.log("createPlaylistManager");this.playlistManager=new zdfplayer.media.playlist.PlaylistManager({isDebugEnabled:this.isDebugEnabled,loop:refactored.utils.Convert.toBoolean(this.configuration.getSettingById("loop",
!1))});var a=this;this.playlistManager.registerCallbackForType("article",function(b){a.mediaAsset==null?(a.configuration.setMedia(b.value,null),a.log("Callback invoked for type article -> create initial media asset"),a.mediaAsset=new zdfplayer.media.MediathekAsset({configuration:a.configuration,isDebugEnabled:a.isDebugEnabled}),a.mediaAsset.addEventListener(zdfplayer.media.Asset.READY,$j.proxy(a.handleMediaAssetReady,a)),a.mediaAsset.addEventListener(zdfplayer.media.Asset.DATA_LOADED,$j.proxy(a.handleMediaAssetDataLoaded,
a)),a.mediaAsset.addEventListener(zdfplayer.media.Asset.ERROR,$j.proxy(a.handleMediaAssetError,a)),a.mediaAsset.load()):(a.log("Callback invoked for type article -> change existing media asset"),a.controller.changeArticle(b.value))})},createAlert:function(){var a=400,b=225;if(this.settings.width!=null&&typeof this.settings.width!="undefined")a=this.settings.width;if(this.settings.height!=null&&typeof this.settings.height!="undefined")b=this.settings.height;this.alertDialog=new zdfplayer.player.video.ui.control.NativeAlert({isDebugEnabled:this.isDebugEnabled,
width:a,height:b});this.alertDialog.renderTo(this.parentElement)},createPreloader:function(){var a=400,b=225;if(this.settings.width!=null&&typeof this.settings.width!="undefined")a=this.settings.width;if(this.settings.height!=null&&typeof this.settings.height!="undefined")b=this.settings.height;if(this.preloaderImageUrl!=null)this.preloader=new zdfplayer.player.video.ui.control.Preloader({isDebugEnabled:this.isDebugEnabled,url:this.preloaderImageUrl,width:a,height:b}),this.preloader.renderTo(this.parentElement)},
setReady:function(){var a={};switch(this.controller.className){case "zdfplayer.player.video.VideoController":a.mode=zdfplayer.Player.HTML5;a.nativeElement=this.controller.video.getVideo();break;case "zdfplayer.player.flash.FlashController":a.mode=zdfplayer.Player.FLASH,a.nativeElement=this.controller.swf}this.dispatchEvent(zdfplayer.Player.READY,a)},handleConfigurationLoaded:function(){this.removeEventListener(zdfplayer.Configuration.LOADED,this.handleConfigurationLoaded);if(this.configurationLoaded!==
!0)switch(this.configurationLoaded=!0,this.isDebugEnabled=this.configuration.getSettingById("isDebugEnabled",!1)=="true",this.createPlaylistManager(),this.log("handleConfigurationLoaded"),this.configuration.getSettingById("source")){case "tivi_videothek":var a=this.configuration.getMediaSettings().type;if(a=="video")this.log("Asset type -> Beitrag"),this.mediaAsset=new zdfplayer.media.TiviVideothekAsset({configuration:this.configuration,isDebugEnabled:this.isDebugEnabled,immediateProcess:!1}),this.mediaAsset.addEventListener(zdfplayer.media.Asset.READY,
$j.proxy(this.handleMediaAssetReady,this)),this.mediaAsset.addEventListener(zdfplayer.media.Asset.DATA_LOADED,$j.proxy(this.handleMediaAssetDataLoaded,this)),this.mediaAsset.addEventListener(zdfplayer.media.Asset.ERROR,$j.proxy(this.handleMediaAssetError,this)),this.mediaAsset.load();break;case "tivi":a=this.configuration.getMediaSettings().type;if(a=="video")this.log("Asset type -> Beitrag"),this.mediaAsset=new zdfplayer.media.TiviAsset({configuration:this.configuration,isDebugEnabled:this.isDebugEnabled,
immediateProcess:!1}),this.mediaAsset.addEventListener(zdfplayer.media.Asset.READY,$j.proxy(this.handleMediaAssetReady,this)),this.mediaAsset.addEventListener(zdfplayer.media.Asset.DATA_LOADED,$j.proxy(this.handleMediaAssetDataLoaded,this)),this.mediaAsset.addEventListener(zdfplayer.media.Asset.ERROR,$j.proxy(this.handleMediaAssetError,this)),this.mediaAsset.load();break;case "mediathek":a=this.configuration.getMediaSettings().type;if(a=="video")this.log("Asset type -> Beitrag"),this.mediaAsset=new zdfplayer.media.MediathekAsset({configuration:this.configuration,
isDebugEnabled:this.isDebugEnabled,immediateProcess:!1}),this.mediaAsset.addEventListener(zdfplayer.media.Asset.READY,$j.proxy(this.handleMediaAssetReady,this)),this.mediaAsset.addEventListener(zdfplayer.media.Asset.DATA_LOADED,$j.proxy(this.handleMediaAssetDataLoaded,this)),this.mediaAsset.addEventListener(zdfplayer.media.Asset.ERROR,$j.proxy(this.handleMediaAssetError,this)),this.mediaAsset.load();else if(a=="list")a=null,(a=this.configuration.getMediaSettings().playlistUrl)?a=new zdfplayer.media.playlist.DefaultPlaylist({serviceURL:a,
isDebugEnabled:this.isDebugEnabled}):(this.log("Asset type -> Einzelsendung"),a=new zdfplayer.media.playlist.ArticlePlaylist({serviceURL:this.configuration.getServiceUrlById("channel"),channelID:this.configuration.getMediaSettings().channelID,isDebugEnabled:this.isDebugEnabled})),a.addEventListener(zdfplayer.media.playlist.Playlist.ERROR,$j.proxy(this.handlePlaylistError,this)),this.playlistManager.setPlaylist(a),a.load();break;case "manual":case "flashvars":this.log("Asset type -> Manuell"),this.mediaAsset.configuration=
this.configuration,this.mediaAsset.isDebugEnabled=this.isDebugEnabled,this.handleMediaAssetDataLoaded()}},handleMediaAssetError:function(a,b){this.log("handleMediaAssetError",b.statusCode,b.debugInfo);this.mediaAsset.removeEventListener(zdfplayer.media.Asset.READY,this.handleMediaAssetReady);this.mediaAsset.removeEventListener(zdfplayer.media.Asset.ERROR,this.handleMediaAssetError);this.preloader&&this.preloader.hide();var c=this.configuration.getSystemMessageById("error",b.statusCode);this.alertMessage(c.caption,
c.message)},handleMediaAssetDataLoaded:function(){this.mediaAsset.removeEventListener(zdfplayer.media.Asset.DATA_LOADED,this.handleMediaAssetDataLoaded);this.log("handleMediaAssetDataLoaded");this.preloader&&this.preloader.hide();if(this.controller==null){var a=new this.embedStrategy({configuration:this.configuration,mediaAsset:this.mediaAsset,isDebugEnabled:this.isDebugEnabled});a.addEventListener(zdfplayer.embed.Strategy.COMPLETE,$j.proxy(this.handleStrategyComplete,this));a.execute()}},handleMediaAssetReady:function(){this.log("handleMediaAssetReady");
this.mediaAsset.removeEventListener(zdfplayer.media.Asset.READY,this.handleMediaAssetReady);this.mediaAsset.removeEventListener(zdfplayer.media.Asset.ERROR,this.handleMediaAssetError);this.preloader&&this.preloader.hide()},handlePlaylistError:function(a,b){this.log("handlePlaylistError",b.statusCode,b.debugInfo);this.preloader&&this.preloader.hide();var c=this.configuration.getSystemMessageById("error",b.statusCode);this.alertMessage(c.caption,c.message)},handleStrategyComplete:function(a,b){var c=
b.builderClass;this.log("handleStrategyComplete");if(c===null||typeof c=="undefined")this.log("Strategy failed! -> No suitable Builder found."),c=this.configuration.getSystemMessageById("error",b.reason),this.alertMessage(c.caption,c.message);else{c=new c({id:this.id,configuration:this.configuration,mediaAsset:this.mediaAsset,playlistManager:this.playlistManager,parentElement:this.parentElement,isDebugEnabled:this.isDebugEnabled});c.addEventListener(zdfplayer.player.Builder.COMPLETE,$j.proxy(this.handleBuilderComplete,
this));var d=this;c.addEventListener(zdfplayer.player.Builder.ALERT_AVAILABLE,function(a,b){if(d.alertDialog!=null)d.alertDialog.detach(),d.alertDialog.destroy(),d.alertDialog=null;d.alertDialog=b});c.build()}},handlePlayStateChanged:function(a,b){b.playState==zdfplayer.player.Controller.PLAY_STATE&&(this.tracker.isCompleted()||this.track())},handleBuilderComplete:function(a,b){this.log("handleBuilderComplete");this.controller=b;var c=this.configuration.getBeaconTrackingSettings(this.configuration.getSettingById("source"));
c.enabled=!1;if(c.enabledFlash&&this.controller.className=="zdfplayer.player.flash.FlashController")c.enabled=!0;if(c.enabledHTML5&&this.controller.className=="zdfplayer.player.video.VideoController")c.enabled=!0;if(c.enabled&&!refactored.utils.Object.isEmpty(c))this.beaconTracker=new zdfplayer.player.tracking.BeaconTracker({settings:c,controller:this.controller,isDebugEnabled:this.isDebugEnabled});c=this.configuration.getMonitoringSettings();if(c.enabled&&!refactored.utils.Object.isEmpty(c))this.monitoringTracker=
new zdfplayer.player.tracking.AkamaiAnalyticsTracker({settings:c,controller:this.controller,isDebugEnabled:this.isDebugEnabled});if(this.controller.className=="zdfplayer.player.video.VideoController")this.tracker=new zdfplayer.player.tracking.IVWTracker({configuration:this.configuration,isDebugEnabled:this.isDebugEnabled,stage:this.parentElement,controller:this.controller});this.tracker&&(this.tracker.setAssetID(this.mediaAsset.id),this.controller.addEventListener(zdfplayer.player.Controller.PLAY_STATE_CHANGED,
$j.proxy(this.handlePlayStateChanged,this)));var d=this;this.controller.addEventListener(zdfplayer.player.Controller.MEDIA_ASSET_CHANGED,function(){d.mediaAsset.id=d.controller.mediaAsset.id;d.tracker!=null&&typeof d.tracker!="undefined"&&d.tracker.setAssetID(d.controller.mediaAsset.id)});this.controller.addEventListener(zdfplayer.player.Controller.SHOW_ALERT,function(a,b){d.alertMessage(b.caption,b.message)});this.controller.ready();this.setReady()},addEventListener:function(a,b){this.controllerEvents.indexOf(a)!=
-1?this.controller?this.controller.addEventListener(a,b):this.log("Player not ready to register event "+a+". Please wait for READY event to register eventhandler"):this.base(a,b)},removeEventListener:function(a,b){this.controllerEvents.indexOf(a)!=-1?this.controller&&this.controller.removeEventListener(a,b):this.base(a,b)},alertMessage:function(a,b){this.alertDialog!=null?this.alertDialog.alertMessage(a,b):this.log("No alert dialog available. ",a+": "+b)},embed:function(a){if(!this.isEmbedded){this.parentElement=
a=="body"?$j(a):$j("#"+a);if(this.parentElement==null)this.parentElement=$j("body");this.createPreloader();this.createAlert();this.isEmbedded=!0;this.configuration=new zdfplayer.Configuration({configurationUrl:this.configurationUrl,specificConfigurationUrl:this.specificConfigurationUrl,flashEmbedParams:this.flashEmbedParams,settings:this.settings,media:this.media,playerId:this.id,isDebugEnabled:this.isDebugEnabled});this.configuration.addEventListener(zdfplayer.Configuration.LOADED,$j.proxy(this.handleConfigurationLoaded,
this));this.configuration.load()}},isReady:function(){return this.controller?this.controller.isReady():!1},play:function(){this.controller&&this.isReady()&&this.controller.play()},pause:function(){this.controller&&this.isReady()&&this.controller.pause()},stop:function(){this.controller&&this.isReady()&&this.controller.stop()},seek:function(a){this.controller&&this.isReady()&&this.controller.seek(a)},isPlaying:function(){return!this.controller||!this.isReady()?!1:this.controller.isPlaying()},getAutoPlay:function(){return!this.controller||
!this.isReady()?!1:this.controller.getAutoPlay()},setAutoPlay:function(a){this.controller&&this.isReady()&&this.controller.setAutoPlay(a)},getMuted:function(){return!this.controller||!this.isReady()?!1:this.controller.getMuted()},setMuted:function(a){this.controller&&this.isReady()&&this.controller.setMuted(a)},getVolume:function(){return!this.controller||!this.isReady()?0:this.controller.getVolume()},setVolume:function(a){this.controller&&this.isReady()&&this.controller.setVolume(a)},getDuration:function(){return!this.controller||
!this.isReady()?0:this.controller.getDuration()},getCurrentTime:function(){return!this.controller||!this.isReady()?0:this.controller.getCurrentTime()},setCurrentTime:function(a){this.controller&&this.isReady()&&this.controller.setCurrentTime(a)},switchToBitrate:function(a){this.controller&&this.isReady()&&this.controller.switchToBitrate(a)},togglePause:function(){this.controller&&this.isReady()&&this.controller.togglePause()},changeArticle:function(a,b){this.controller&&this.isReady()&&this.controller.strictlyChangeArticle(a,
b)},changeAsset:function(a){this.controller&&this.isReady()&&this.controller.setMediaAsset(a)},getScaleMode:function(){return!this.controller||!this.isReady()?void 0:this.controller.getScaleMode()},setScaleMode:function(a){this.controller&&this.isReady()&&this.controller.setScaleMode(a)},setPlaylistIndex:function(a){this.controller&&this.isReady()&&this.controller.setPlaylistIndex(a)},getPlaylistIndex:function(){return!this.controller||!this.isReady()?void 0:this.controller.getPlaylistIndex()},playlistPrevious:function(){this.controller&&
this.isReady()&&this.controller.playlistPrevious()},playlistNext:function(){this.controller&&this.isReady()&&this.controller.playlistNext()},getCurrentCuepoint:function(){return!this.controller||!this.isReady()?{}:this.controller.getCurrentCuepoint()},jumpToNearestCuepoint:function(a,b){if(!this.controller||!this.isReady())return{};this.controller.jumpToNearestCuepoint(a,b)},setCuepointIndex:function(a){if(!this.controller||!this.isReady())return{};this.controller.setCuepointIndex(a)}},{READY:"PlayerReady.zdfplayer",
HTML5:"html5",FLASH:"flash"});namespace("zdfplayer.player.tracking");zdfplayer.player.tracking.Tracker=refactored.Object.extend({enabled:!0,controller:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.tracking.Tracker",isDebugEnabled:!0},a))},track:function(){}});namespace("zdfplayer.player.tracking");
zdfplayer.player.tracking.IVWTracker=zdfplayer.player.tracking.Tracker.extend({configuration:null,familyPixel:"",countPixel:"",assetID:null,completed:!1,stage:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.tracking.IVWTracker"},a))},getPixel:function(){var a=this;this.controller.mediaAsset!=null&&typeof this.controller.mediaAsset!="undefined"&&this.controller.mediaAsset.getTrackingPixel(function(b){a.familyPixel=b.family;a.countPixel=b.count;a.setTrackingMarkup()},
function(b){a.log(b)})},setTrackingMarkup:function(){var a="tracker_"+Math.round(Math.random()*1E5),b=$j('<div id="'+a+'">');b.append($j('<img src="'+this.familyPixel+'">'));this.countPixel.length>0&&b.append($j('<img src="'+this.countPixel+'">'));this.stage.append(b);setTimeout(function(){b.remove()},2E3);this.completed=!0},setAssetID:function(a){this.assetID=a;this.setPixelURLs({familyPixel:"",countPixel:""})},getAssetID:function(){return this.assetID},setPixelURLs:function(a){this.completed=!1;
this.familyPixel=a.familyPixel;this.countPixel=a.countPixel},getPixelURLs:function(){var a={};a.familyPixel=this.familyPixel;a.countPixel=this.countPixel;return a},isCompleted:function(){return this.completed},track:function(){this.enabled?this.familyPixel.length>0?this.setTrackingMarkup():this.getPixel():this.log("ivw tracking is not enabled")}},{MEDIATHEK:"mediathek",TIVI:"tivi",MANUAL:"manual",FLASHVARS:"flashvars",INTERN:"intern"});namespace("zdfplayer.player.tracking");
zdfplayer.player.tracking.BeaconTracker=zdfplayer.player.tracking.Tracker.extend({settings:null,controller:null,flashControllerClassName:"zdfplayer.player.flash.FlashController",videoType:"",mode:"",beaconApi:null,videoInfo:null,eventQueue:null,seekingEventCurrentPos:0,nextTimeToTrack:14,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.tracking.BeaconTracker"},a))},initialize:function(){this.eventQueue=[];this.videoType=this.settings.videoType;this.setMode();this.loadBeaconSources(function(){for(this.setupBeaconApi();this.eventQueue.length>
0;)this.track(this.eventQueue.shift())});this.registerContollerEvents()},registerContollerEvents:function(){this.controller.addEventListener(zdfplayer.player.Controller.LOAD_FINISHED,$j.proxy(this.handleVideoLoadFinished,this));this.controller.addEventListener(zdfplayer.player.Controller.PLAY_STATE_CHANGED,$j.proxy(this.handleVideoPlayStateChanged,this));this.controller.addEventListener(zdfplayer.player.Controller.SEEKING,$j.proxy(this.handleVideoSeeking,this));this.controller.addEventListener(zdfplayer.player.Controller.CURRENT_TIME_CHANGED,
$j.proxy(this.handleVideoTimeChanged,this))},loadBeaconSources:function(a){var b=this;$j.getScript(this.settings.scriptUrl,function(){typeof a!="undefined"&&a.call(b)})},setupBeaconApi:function(){var a={clientid:this.settings.clientId,vcid:this.settings.vcid,cisuffix:this.settings.cisuffix,sfcode:this.settings.sfcode,prod:this.settings.prod};this.beaconApi=new gg;this.log("Nielsen Global Params: ","ClientID:",a.clientid," VCID:",a.vcid," cisuffix:",a.cisuffix," sfcode:",a.sfcode," prod:",a.prod);
this.beaconApi.ggInitialize(a,0,!1,!0)},setMode:function(){this.mode=zdfplayer.player.tracking.BeaconTracker.HTML5;if(this.controller.className==this.flashControllerClassName)this.mode=zdfplayer.player.tracking.BeaconTracker.FLASH},track:function(a,b){if(this.beaconApi){var c=this;if(function(a){var b=!1;$j.each(c.settings.events,function(c,d){if(d.id==String(a))return b=d.track,!0});return b}(a))switch(a){case zdfplayer.player.tracking.BeaconTracker.TRACK_EVENT_LOAD:var d=this.settings.clientId+
"_"+this.settings.vcid+"_"+this.videoInfo.id,g=this.getVideoInfoXml(a);this.beaconApi.ggPM(zdfplayer.player.tracking.BeaconTracker.TRACK_EVENT_LOAD,d,this.videoType,g,1);this.log("track load event (3):",g);break;case zdfplayer.player.tracking.BeaconTracker.TRACK_EVENT_PLAY:this.beaconApi.ggPM(zdfplayer.player.tracking.BeaconTracker.TRACK_EVENT_PLAY,b.currentPos);this.log("track play event (5):"," seconds: ",b.currentPos);break;case zdfplayer.player.tracking.BeaconTracker.TRACK_EVENT_PAUSE:this.beaconApi.ggPM(zdfplayer.player.tracking.BeaconTracker.TRACK_EVENT_PAUSE,
b.currentPos);this.log("track pause event (6):"," seconds: ",b.currentPos);break;case zdfplayer.player.tracking.BeaconTracker.TRACK_EVENT_STOP:this.beaconApi.ggPM(zdfplayer.player.tracking.BeaconTracker.TRACK_EVENT_STOP,b.currentPos);this.log("track stop event (7):"," seconds: ",b.currentPos);break;case zdfplayer.player.tracking.BeaconTracker.TRACK_EVENT_SEEK:this.beaconApi.ggPM(zdfplayer.player.tracking.BeaconTracker.TRACK_EVENT_SEEK,b.currentPos,b.newPos);this.log("track seek event (8):"," start seconds: ",
b.currentPos," end seconds: ",b.newPos);break;case zdfplayer.player.tracking.BeaconTracker.TRACK_EVENT_PLAYING:this.beaconApi.ggPM(zdfplayer.player.tracking.BeaconTracker.TRACK_EVENT_PLAYING,b.currentPos),this.log("track playing event (49):"," seconds: ",b.currentPos)}}else this.eventQueue.push(a)},getVideoInfoXml:function(a){var b="",c=this;$j.each(this.settings.events,function(d,g){if(g.id==String(a))return $j.each(g.mappings,function(a,d){b+="<"+d.beaconName+">";b+=d.prefix;$j.each(d.modelNames,
function(a,f){b+=(a>0?d.delimiter:"")+c.getVideoInfo(d.beaconName,f)});b+="</"+d.beaconName+">"}),!0});return b},getVideoInfo:function(a,b){var c="";switch(a){case "livestream":c=this.videoInfo[b]==!0?"yes":"no";break;case "length":case "nol_raw_c8":c=this.videoInfo[b];c=Number(c).toFixed(2);this.videoInfo.isLive&&refactored.utils.Array.contains(this.settings.twentyFourSevenAssets,this.videoInfo.id)==!0&&(c=86400);break;case "nol_raw_c14":c=this.videoInfo[b].originalData||this.videoInfo[b];break;
default:c=this.videoInfo[b]}return c},handleVideoLoadFinished:function(){if(this.videoInfo!=null)this.videoInfo=null;this.mode==zdfplayer.player.tracking.BeaconTracker.HTML5?this.videoInfo=this.controller.getMediaAsset():(this.videoInfo=this.controller.swf.getArticle(),this.videoInfo.isLive=this.videoInfo.type=="livevideo",this.videoInfo.id=this.videoInfo.assetID);this.videoInfo.ci=this.settings.clientId;this.videoInfo.vcid=this.settings.vcid;if(this.videoInfo.isLive)this.videoInfo.initialPlay=!0,
this.videoInfo.isTwentyFourSevenStream=refactored.utils.Array.contains(this.settings.twentyFourSevenAssets,this.videoInfo.id);this.track(zdfplayer.player.tracking.BeaconTracker.TRACK_EVENT_LOAD)},handleVideoPlayStateChanged:function(a){if(this.videoInfo!=null)switch(a.data.playState){case zdfplayer.player.Controller.PLAY_STATE:this.videoInfo.isLive?(a=new Date,this.videoInfo.lastPlayTime=a.getSeconds()+a.getMinutes()*60+a.getHours()*3600,a=this.videoInfo.lastPlayTime,this.videoInfo.isTwentyFourSevenStream||
(a-=Number(refactored.utils.TimeCodeUtil.timecodeToMilliseconds(this.videoInfo.airTime))/1E3),this.nextTimeToTrack+=a):(a=Number(this.controller.getCurrentTime()).toFixed(2),this.nextTimeToTrack=14);this.track(zdfplayer.player.tracking.BeaconTracker.TRACK_EVENT_PLAY,{currentPos:a});break;case zdfplayer.player.Controller.PAUSE_STATE:this.videoInfo.isLive?(a=new Date,a=a.getSeconds()+a.getMinutes()*60+a.getHours()*3600,a=this.videoInfo.isTwentyFourSevenStream?a-this.videoInfo.lastPlayTime:a-Number(refactored.utils.TimeCodeUtil.timecodeToMilliseconds(this.videoInfo.airTime))/
1E3):a=Number(this.controller.getCurrentTime()).toFixed(2);this.track(zdfplayer.player.tracking.BeaconTracker.TRACK_EVENT_PAUSE,{currentPos:a});break;case zdfplayer.player.Controller.STOP_STATE:this.videoInfo.isLive?(a=new Date,a=a.getSeconds()+a.getMinutes()*60+a.getHours()*3600,a=this.videoInfo.isTwentyFourSevenStream?a-this.videoInfo.lastPlayTime:a-Number(refactored.utils.TimeCodeUtil.timecodeToMilliseconds(this.videoInfo.airTime))/1E3):a=Number(this.controller.getCurrentTime()).toFixed(2),this.track(zdfplayer.player.tracking.BeaconTracker.TRACK_EVENT_STOP,
{currentPos:a})}},handleVideoSeeking:function(a){if(this.videoInfo!=null){var b=a.data.currentTime.toFixed(2);a.data.seeking===!1?this.track(zdfplayer.player.tracking.BeaconTracker.TRACK_EVENT_SEEK,{currentPos:this.seekingEventCurrentPos,newPos:b}):this.seekingEventCurrentPos=Number(a.data.currentTime).toFixed(2)}},handleVideoTimeChanged:function(a){if(this.videoInfo!=null&&(a=parseInt(a.data.time),this.videoInfo.isLive&&(a+=this.videoInfo.lastPlayTime,this.videoInfo.isTwentyFourSevenStream||(a-=
Number(refactored.utils.TimeCodeUtil.timecodeToMilliseconds(this.videoInfo.airTime))/1E3)),a%15==0&&a>0&&a>this.nextTimeToTrack))this.nextTimeToTrack=a+14,this.track(zdfplayer.player.tracking.BeaconTracker.TRACK_EVENT_PLAYING,{currentPos:a})}},{HTML5:"html5",FLASH:"flash",TRACK_EVENT_LOAD:"3",TRACK_EVENT_PLAY:"5",TRACK_EVENT_PAUSE:"6",TRACK_EVENT_STOP:"7",TRACK_EVENT_SEEK:"8",TRACK_EVENT_PLAYING:"49",MEDIATHEK:"mediathek",TIVI:"tivi",MANUAL:"manual",FLASHVARS:"flashvars",INTERN:"intern"});namespace("zdfplayer.player.tracking");
zdfplayer.player.tracking.AkamaiAnalyticsTracker=zdfplayer.player.tracking.Tracker.extend({settings:null,controller:null,constructor:function(a){this.base(Base.apply({className:"zdfplayer.player.tracking.AkamaiAnalyticsTracker"},a))},initialize:function(){function a(){if(b.controller){var a=function(){setTimeout(function(){b.log("subscribe video: ",a.src)},1100);var a=b.controller.video.video;akaMediaAnalytics&&(akamaiSetViewerId(""),akaMediaAnalytics.subscribeVideoObject(a))};b.controller.isReady()?
a():b.controller.addEventListener(zdfplayer.player.Controller.READY,function(){a()});b.controller.addEventListener(zdfplayer.player.Controller.MEDIA_ASSET_CHANGED,function(){akamaiHandleStreamSwitch();a()})}}var b=this;this.controller.className=="zdfplayer.player.flash.FlashController"?setTimeout(function(){b.log("Please note: in a flash scenario all initialization and communication is handled by the OSMF Plugin.")},2100):zdfplayer.player.tracking.AkamaiAnalyticsTracker.initialized?a():(this.setAkamaiAnalyticsConfigFilePath(),
this.loadAkamaiAnalyticsSources(function(){a();zdfplayer.player.tracking.AkamaiAnalyticsTracker.initialized=!0}))},loadAkamaiAnalyticsSources:function(a){var b=this;setTimeout(function(){b.log("loading script from: ",b.settings.scriptURL)},1E3);$j.getScript(this.settings.scriptURL,function(){typeof a!="undefined"&&a.call(b)})},setAkamaiAnalyticsConfigFilePath:function(){AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH=this.settings.configURL}},{initialized:!1});$j=jQuery.noConflict();refactored.Object.mixin(refactored.debug.ProfilerMixin);
var AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH="";
